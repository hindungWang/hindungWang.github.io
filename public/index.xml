<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Hindung Blogs</title>
    <link>http://hindung.cn/</link>
    <description>Recent content on Hindung Blogs</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 19 Jul 2022 00:00:00 +0000</lastBuildDate><atom:link href="http://hindung.cn/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>K8s client-goåˆå§‹åŒ–çš„å‡ ç§æ–¹æ³•</title>
      <link>http://hindung.cn/posts/26/</link>
      <pubDate>Tue, 19 Jul 2022 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/26/</guid>
      <description>ç®€ä»‹ client-goæ˜¯k8sçš„ä¸€ä¸ªåŸºç¡€ç»„ä»¶åº“ï¼Œæ˜¯ç”¨äºä¸API-Serveräº¤äº’çš„httpå®¢æˆ·ç«¯ã€‚K8sä¸­å¤§éƒ¨åˆ†ç»„ä»¶éƒ½ä½¿ç”¨äº†è¿™ä¸ªåº“å®ç°ä¸API-Serverçš„é€šä¿¡åŠŸèƒ½ã€‚é™¤äº†èƒ½å¤Ÿå¯¹èµ„æºå¯¹è±¡çš„å¢åˆ æ”¹æŸ¥ï¼Œè¿˜å¯Watchä¸€ä¸ªå¯¹è±¡ã€å‡çº§æˆwebsocketé“¾æ¥ç­‰ç­‰åŠŸèƒ½ã€‚
client-goæ”¯æŒå››ç§å®¢æˆ·ç«¯ï¼šRESTClientã€ClientSetã€DynamicClientã€DiscoveryClientã€‚è¿™å‡ ä¸ªclientå¯ä»¥ç›¸äº’è½¬æ¢ã€‚
RESTClient RESTClientæ˜¯æœ€åŸºç¡€çš„å®¢æˆ·ç«¯ï¼Œç›¸å½“äºæœ€åº•å±‚çš„åŸºç¡€ç»“æ„ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡RESTClientæä¾›çš„RESTfulæ–¹æ³•å¦‚Get()ã€Put()ã€Post()ã€Delete()è¿›è¡Œäº¤äº’ã€‚
ä¸€èˆ¬è€Œè¨€ï¼Œä¸ºäº†æ›´ä¸ºä¼˜é›…çš„å¤„ç†ï¼Œéœ€è¦è¿›ä¸€æ­¥å°è£…ï¼Œé€šè¿‡Clientsetå°è£…RESTClientï¼Œç„¶åå†å¯¹å¤–æä¾›æ¥å£å’ŒæœåŠ¡ã€‚
å¯ä»¥é€šè¿‡ClientSetå®¢æˆ·ç«¯è·å¾—ï¼š
client := cli.CoreV1().RESTClient().(*rest.RESTClient) ClientSet Clientsetæ˜¯è°ƒç”¨Kubernetesèµ„æºå¯¹è±¡æœ€å¸¸ç”¨çš„clientï¼Œå¯ä»¥æ“ä½œæ‰€æœ‰çš„èµ„æºå¯¹è±¡ï¼ŒåŒ…å«RESTClientã€‚éœ€è¦åˆ¶å®šGroupã€Versionï¼Œç„¶åæ ¹æ®Resourceè·å–ã€‚
clientset,err := kubernetes.NewForConfig(config) sa, err := clientset.CoreV1().ServiceAccounts(&amp;#34;kube-system&amp;#34;).Get(&amp;#34;kube-shell-admin&amp;#34;, metav1.GetOptions{}) DynamicClient Dynamic clientæ˜¯ä¸€ç§åŠ¨æ€çš„clientï¼Œå®ƒèƒ½å¤„ç†kubernetesæ‰€æœ‰çš„èµ„æºã€‚ä¸åŒäºclientsetï¼Œdynamic clientè¿”å›çš„å¯¹è±¡æ˜¯ä¸€ä¸ªmap[string]interface{}ã€‚
dynamicClient,err := dynamic.NewForConfig(config) gvr := schema.GroupVersionResource{Version: &amp;#34;v1&amp;#34;,Resource: &amp;#34;pods&amp;#34;} unstructObjList,err := dynamicClient.Resource(gvr).Namespace(&amp;#34;dev&amp;#34;).List(context.TODO(),metav1.ListOptions{Limit: 100}) DiscoveryClient DiscoveryClientæ˜¯å‘ç°å®¢æˆ·ç«¯ï¼Œä¸»è¦ç”¨äºå‘ç°kubernetes API Serveræ‰€æ”¯æŒçš„èµ„æºç»„ã€èµ„æºç‰ˆæœ¬ã€èµ„æºä¿¡æ¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å°†è¿™äº›ä¿¡æ¯å­˜å‚¨åˆ°æœ¬åœ°ï¼Œç”¨æˆ·æœ¬åœ°ç¼“å­˜ï¼Œä»¥å‡è½»å¯¹Kubernetes API Serverè®¿é—®çš„å‹åŠ›ã€‚ kubectlçš„api-versionså’Œapi-resourceså‘½ä»¤è¾“å‡ºä¹Ÿæ˜¯é€šè¿‡DisconversyClientå®ç°çš„ã€‚
discoveryClient,err := discovery.NewDiscoveryClientForConfig(config) APIGroup,APIResourceListSlice,err := discoveryClient.ServerGroupsAndResources() è¿™å‡ ç§å®¢æˆ·ç«¯çš„åˆå§‹åŒ–éƒ½æ¶‰åŠåˆ°äº†å…¥å‚configï¼Œå³*rest.Configï¼Œè¿™ä¸ªæ˜¯ç”¨äºåˆå§‹åŒ–å®¢æˆ·ç«¯çš„æ‰€æœ‰é…ç½®ä¿¡æ¯ã€‚
rest.Configåˆå§‹åŒ– åˆ›å»ºclientå‰ï¼Œéœ€è¦å…ˆä»åˆå§‹åŒ–*rest.Configï¼Œè¿™ä¸ª*rest.Configå¯ä»¥ä»é›†ç¾¤å¤–çš„kubeconfigæ–‡ä»¶æˆ–è€…é›†ç¾¤å†…éƒ¨çš„ tokenFile å’Œ CAFileåˆå§‹åŒ–ï¼ˆé€šè¿‡ServiceAcountè‡ªåŠ¨æŒ‚è½½ï¼‰ã€‚æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š
é›†ç¾¤å¤–é€šè¿‡kubeconfigåˆå§‹åŒ– BuildConfigFromFlagsæ–¹æ³•ä»ç»™å®šçš„urlæˆ–è€…kubeconfigæ–‡ä»¶çš„æ–‡ä»¶å¤¹è·¯å¾„å»åˆå§‹åŒ–configï¼Œå¦‚æœä¸æˆåŠŸåˆ™ä¼šä½¿ç”¨é›†ç¾¤å†…éƒ¨æ–¹æ³•åˆå§‹åŒ–configï¼Œå¦‚æœä¸æˆåŠŸåˆ™è¿”å›ä¸€ä¸ªé»˜è®¤çš„configã€‚
// &amp;#34;k8s.io/client-go/tools/clientcmd&amp;#34; config, err := clientcmd.BuildConfigFromFlags(&amp;#34;&amp;#34;, *kubeconfig) if err != nil {  panic(err.</description>
      <content>&lt;h2 id=&#34;ç®€ä»‹&#34;&gt;ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;client-goæ˜¯k8sçš„ä¸€ä¸ªåŸºç¡€ç»„ä»¶åº“ï¼Œæ˜¯ç”¨äºä¸API-Serveräº¤äº’çš„httpå®¢æˆ·ç«¯ã€‚K8sä¸­å¤§éƒ¨åˆ†ç»„ä»¶éƒ½ä½¿ç”¨äº†è¿™ä¸ªåº“å®ç°ä¸API-Serverçš„é€šä¿¡åŠŸèƒ½ã€‚é™¤äº†èƒ½å¤Ÿå¯¹èµ„æºå¯¹è±¡çš„å¢åˆ æ”¹æŸ¥ï¼Œè¿˜å¯Watchä¸€ä¸ªå¯¹è±¡ã€å‡çº§æˆwebsocketé“¾æ¥ç­‰ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;client-goæ”¯æŒå››ç§å®¢æˆ·ç«¯ï¼š&lt;code&gt;RESTClient&lt;/code&gt;ã€&lt;code&gt;ClientSet&lt;/code&gt;ã€&lt;code&gt;DynamicClient&lt;/code&gt;ã€&lt;code&gt;DiscoveryClient&lt;/code&gt;ã€‚è¿™å‡ ä¸ªclientå¯ä»¥ç›¸äº’è½¬æ¢ã€‚&lt;/p&gt;
&lt;h3 id=&#34;restclient&#34;&gt;RESTClient&lt;/h3&gt;
&lt;p&gt;RESTClientæ˜¯æœ€åŸºç¡€çš„å®¢æˆ·ç«¯ï¼Œç›¸å½“äºæœ€åº•å±‚çš„åŸºç¡€ç»“æ„ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡RESTClientæä¾›çš„RESTfulæ–¹æ³•å¦‚Get()ã€Put()ã€Post()ã€Delete()è¿›è¡Œäº¤äº’ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬è€Œè¨€ï¼Œä¸ºäº†æ›´ä¸ºä¼˜é›…çš„å¤„ç†ï¼Œéœ€è¦è¿›ä¸€æ­¥å°è£…ï¼Œé€šè¿‡Clientsetå°è£…RESTClientï¼Œç„¶åå†å¯¹å¤–æä¾›æ¥å£å’ŒæœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡ClientSetå®¢æˆ·ç«¯è·å¾—ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;client&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cli&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;CoreV1&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;RESTClient&lt;/span&gt;().(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;rest&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;RESTClient&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;clientset&#34;&gt;ClientSet&lt;/h3&gt;
&lt;p&gt;Clientsetæ˜¯è°ƒç”¨Kubernetesèµ„æºå¯¹è±¡æœ€å¸¸ç”¨çš„clientï¼Œå¯ä»¥æ“ä½œæ‰€æœ‰çš„èµ„æºå¯¹è±¡ï¼ŒåŒ…å«RESTClientã€‚éœ€è¦åˆ¶å®šGroupã€Versionï¼Œç„¶åæ ¹æ®Resourceè·å–ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;clientset&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;kubernetes&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewForConfig&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sa&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;clientset&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;CoreV1&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;ServiceAccounts&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;kube-system&amp;#34;&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;kube-shell-admin&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;metav1&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetOptions&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;dynamicclient&#34;&gt;DynamicClient&lt;/h3&gt;
&lt;p&gt;Dynamic clientæ˜¯ä¸€ç§åŠ¨æ€çš„clientï¼Œå®ƒèƒ½å¤„ç†kubernetesæ‰€æœ‰çš„èµ„æºã€‚ä¸åŒäºclientsetï¼Œdynamic clientè¿”å›çš„å¯¹è±¡æ˜¯ä¸€ä¸ª&lt;code&gt;map[string]interface{}&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dynamicClient&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dynamic&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewForConfig&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gvr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;schema&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GroupVersionResource&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;Version&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;v1&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;Resource&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pods&amp;#34;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;unstructObjList&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dynamicClient&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Resource&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gvr&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;Namespace&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dev&amp;#34;&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;List&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;TODO&lt;/span&gt;(),&lt;span style=&#34;color:#a6e22e&#34;&gt;metav1&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ListOptions&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;Limit&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;discoveryclient&#34;&gt;DiscoveryClient&lt;/h3&gt;
&lt;p&gt;DiscoveryClientæ˜¯å‘ç°å®¢æˆ·ç«¯ï¼Œä¸»è¦ç”¨äºå‘ç°kubernetes API Serveræ‰€æ”¯æŒçš„èµ„æºç»„ã€èµ„æºç‰ˆæœ¬ã€èµ„æºä¿¡æ¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å°†è¿™äº›ä¿¡æ¯å­˜å‚¨åˆ°æœ¬åœ°ï¼Œç”¨æˆ·æœ¬åœ°ç¼“å­˜ï¼Œä»¥å‡è½»å¯¹Kubernetes API Serverè®¿é—®çš„å‹åŠ›ã€‚ kubectlçš„api-versionså’Œapi-resourceså‘½ä»¤è¾“å‡ºä¹Ÿæ˜¯é€šè¿‡DisconversyClientå®ç°çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;discoveryClient&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;discovery&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewDiscoveryClientForConfig&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;APIGroup&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;APIResourceListSlice&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;discoveryClient&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ServerGroupsAndResources&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™å‡ ç§å®¢æˆ·ç«¯çš„åˆå§‹åŒ–éƒ½æ¶‰åŠåˆ°äº†å…¥å‚configï¼Œå³&lt;code&gt;*rest.Config&lt;/code&gt;ï¼Œè¿™ä¸ªæ˜¯ç”¨äºåˆå§‹åŒ–å®¢æˆ·ç«¯çš„æ‰€æœ‰é…ç½®ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;restconfigåˆå§‹åŒ–&#34;&gt;rest.Configåˆå§‹åŒ–&lt;/h2&gt;
&lt;p&gt;åˆ›å»ºclientå‰ï¼Œéœ€è¦å…ˆä»åˆå§‹åŒ–&lt;code&gt;*rest.Config&lt;/code&gt;ï¼Œè¿™ä¸ª&lt;code&gt;*rest.Config&lt;/code&gt;å¯ä»¥ä»é›†ç¾¤å¤–çš„kubeconfigæ–‡ä»¶æˆ–è€…é›†ç¾¤å†…éƒ¨çš„ tokenFile å’Œ CAFileåˆå§‹åŒ–ï¼ˆé€šè¿‡ServiceAcountè‡ªåŠ¨æŒ‚è½½ï¼‰ã€‚æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;h3 id=&#34;é›†ç¾¤å¤–é€šè¿‡kubeconfigåˆå§‹åŒ–&#34;&gt;é›†ç¾¤å¤–é€šè¿‡kubeconfigåˆå§‹åŒ–&lt;/h3&gt;
&lt;p&gt;BuildConfigFromFlagsæ–¹æ³•ä»ç»™å®šçš„urlæˆ–è€…kubeconfigæ–‡ä»¶çš„æ–‡ä»¶å¤¹è·¯å¾„å»åˆå§‹åŒ–configï¼Œå¦‚æœä¸æˆåŠŸåˆ™ä¼šä½¿ç”¨é›†ç¾¤å†…éƒ¨æ–¹æ³•åˆå§‹åŒ–configï¼Œå¦‚æœä¸æˆåŠŸåˆ™è¿”å›ä¸€ä¸ªé»˜è®¤çš„configã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// &amp;#34;k8s.io/client-go/tools/clientcmd&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;clientcmd&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;BuildConfigFromFlags&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kubeconfig&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   panic(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Error&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å†…å­˜ä¸­é€šè¿‡kubeconfigå­—ç¬¦ä¸²æˆ–è€…byteæ•°ç»„åˆå§‹åŒ–&#34;&gt;å†…å­˜ä¸­é€šè¿‡kubeconfigå­—ç¬¦ä¸²æˆ–è€…byteæ•°ç»„åˆå§‹åŒ–&lt;/h3&gt;
&lt;p&gt;é€šè¿‡è¯»å–kubeconfigæ–‡ä»¶å†…å®¹è¿›è¡Œåˆå§‹åŒ–ä¸€ä¸ªconfigï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;clientcmd&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewClientConfigFromBytes&lt;/span&gt;([]byte(string(&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;kubeConfig&amp;#34;&lt;/span&gt;])))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;restConfig&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ClientConfig&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é›†ç¾¤ä¸­é€šè¿‡serviceacountåˆå§‹åŒ–&#34;&gt;é›†ç¾¤ä¸­é€šè¿‡ServiceAcountåˆå§‹åŒ–&lt;/h3&gt;
&lt;p&gt;é€šè¿‡é›†ç¾¤å†…éƒ¨é…ç½®åˆ›å»º k8s é…ç½®ä¿¡æ¯ï¼Œé€šè¿‡ KUBERNETES_SERVICE_HOST å’Œ KUBERNETES_SERVICE_PORT ç¯å¢ƒå˜é‡æ–¹å¼è·å–ã€‚&lt;/p&gt;
&lt;p&gt;è‹¥é›†ç¾¤ä½¿ç”¨ TLS è®¤è¯æ–¹å¼ï¼Œåˆ™é»˜è®¤è¯»å–é›†ç¾¤å†…éƒ¨ tokenFile å’Œ CAFileï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;tokenFile = &amp;quot;/var/run/secrets/kubernetes.io/serviceaccount/token&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rootCAFile = &amp;quot;/var/run/secrets/kubernetes.io/serviceaccount/ca.crt&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// &amp;#34;k8s.io/client-go/rest&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rest&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;InClusterConfig&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   panic(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Error&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;operator-sdkä¸­åˆå§‹åŒ–config&#34;&gt;operator-sdkä¸­åˆå§‹åŒ–config&lt;/h3&gt;
&lt;p&gt;ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨operator-sdkå¼€å‘CRDséƒ½ä¼šç”¨åˆ°åœ¨æœ¬åœ°è°ƒè¯•æˆ–è€…åœ¨é›†ç¾¤ä¸­è°ƒè¯•çš„æ–¹æ³•ï¼Œåœ¨ä½ç‰ˆæœ¬operator-sdkä¸­å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// &amp;#34;sigs.k8s.io/controller-runtime/pkg/client/config&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;cfg&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetConfig&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Error&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;os&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Exit&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯¥æ–¹æ³•åˆå§‹åŒ–kubeconfigçš„é¡ºåºæ˜¯&amp;ndash;kubeconfigæ ‡ç­¾ï¼ŒKUBECONFIGç¯å¢ƒå˜é‡ï¼ŒIn-clusteré›†ç¾¤å†…SAï¼Œ$HOME/.kube/configæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨åˆå§‹åŒ–çš„configçš„åŒæ—¶ï¼Œè®¾ç½®äº†è¯·æ±‚çš„QPSï¼Œé»˜è®¤20 QPS, 30 burstã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æŸäº›é«˜ç‰ˆæœ¬sdkä¸­ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•åˆå§‹åŒ–ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//ctrl &amp;#34;sigs.k8s.io/controller-runtime&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ctrl&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetConfigOrDie&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åŸç†åŒä¸Šã€‚&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>About Me</title>
      <link>http://hindung.cn/about/</link>
      <pubDate>Mon, 18 Jul 2022 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/about/</guid>
      <description>Hi there ğŸ‘‹ This is hindung&amp;rsquo;s space   ğŸŒ± Iâ€™m currently learning K8s Docker Go etc.
  ğŸ’¬ Ask me about K8s Docker Go
  ğŸ“« å›ç”µæˆ‘: tangtione@qq.com
  </description>
      <content>&lt;h1 id=&#34;hi-there--this-is-hindungs-space&#34;&gt;Hi there ğŸ‘‹ This is hindung&amp;rsquo;s space&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ğŸŒ± Iâ€™m currently learning &lt;code&gt;K8s&lt;/code&gt; &lt;code&gt;Docker&lt;/code&gt; &lt;code&gt;Go&lt;/code&gt; etc.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ğŸ’¬ Ask me about &lt;code&gt;K8s&lt;/code&gt; &lt;code&gt;Docker&lt;/code&gt; &lt;code&gt;Go&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ğŸ“« å›ç”µæˆ‘: &lt;a href=&#34;mailto:tangtione@qq.com&#34;&gt;tangtione@qq.com&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    </item>
    
    <item>
      <title>Hello World</title>
      <link>http://hindung.cn/posts/post/</link>
      <pubDate>Mon, 18 Jul 2022 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/post/</guid>
      <description>æ¬¢è¿æ¥åˆ°hindungçš„éƒ¨è½æ ¼ Copy from @ é©¬å…‹é£è±¡ @(ç¤ºä¾‹ç¬”è®°æœ¬)[é£é©°|äººç”Ÿ|Markdown]
é©¬å…‹é£è±¡æ˜¯ä¸€æ¬¾ä¸“ä¸ºå°è±¡ç¬”è®°ï¼ˆEvernoteï¼‰æ‰“é€ çš„Markdownç¼–è¾‘å™¨ï¼Œé€šè¿‡ç²¾å¿ƒçš„è®¾è®¡ä¸æŠ€æœ¯å®ç°ï¼Œé…åˆå°è±¡ç¬”è®°å¼ºå¤§çš„å­˜å‚¨å’ŒåŒæ­¥åŠŸèƒ½ï¼Œå¸¦æ¥å‰æ‰€æœªæœ‰çš„ä¹¦å†™ä½“éªŒã€‚ç‰¹ç‚¹æ¦‚è¿°ï¼š
 åŠŸèƒ½ä¸°å¯Œ ï¼šæ”¯æŒé«˜äº®ä»£ç å—ã€LaTeX å…¬å¼ã€æµç¨‹å›¾ï¼Œæœ¬åœ°å›¾ç‰‡ä»¥åŠé™„ä»¶ä¸Šä¼ ï¼Œç”šè‡³æˆªå›¾ç²˜è´´ï¼Œå·¥ä½œå­¦ä¹ å¥½å¸®æ‰‹ï¼› å¾—å¿ƒåº”æ‰‹ ï¼šç®€æ´é«˜æ•ˆçš„ç¼–è¾‘å™¨ï¼Œæä¾›æ¡Œé¢å®¢æˆ·ç«¯ä»¥åŠç¦»çº¿Chrome Appï¼Œæ”¯æŒç§»åŠ¨ç«¯ Webï¼› æ·±åº¦æ•´åˆ ï¼šæ”¯æŒé€‰æ‹©ç¬”è®°æœ¬å’Œæ·»åŠ æ ‡ç­¾ï¼Œæ”¯æŒä»å°è±¡ç¬”è®°è·³è½¬ç¼–è¾‘ï¼Œè½»æ¾ç®¡ç†ã€‚   [TOC]
Markdownç®€ä»‹  Markdown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒå…è®¸äººä»¬ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ï¼Œç„¶åè½¬æ¢æˆæ ¼å¼ä¸°å¯Œçš„HTMLé¡µé¢ã€‚ â€”â€” ç»´åŸºç™¾ç§‘
 æ­£å¦‚æ‚¨åœ¨é˜…è¯»çš„è¿™ä»½æ–‡æ¡£ï¼Œå®ƒä½¿ç”¨ç®€å•çš„ç¬¦å·æ ‡è¯†ä¸åŒçš„æ ‡é¢˜ï¼Œå°†æŸäº›æ–‡å­—æ ‡è®°ä¸ºç²—ä½“æˆ–è€…æ–œä½“ï¼Œåˆ›å»ºä¸€ä¸ªé“¾æ¥æˆ–ä¸€ä¸ªè„šæ³¨1ã€‚ä¸‹é¢åˆ—ä¸¾äº†å‡ ä¸ªé«˜çº§åŠŸèƒ½ï¼Œæ›´å¤šè¯­æ³•è¯·æŒ‰Ctrl + /æŸ¥çœ‹å¸®åŠ©ã€‚
ä»£ç å— @requires_authorization def somefunc(param1=&amp;#39;&amp;#39;, param2=0):  &amp;#39;&amp;#39;&amp;#39;A docstring&amp;#39;&amp;#39;&amp;#39;  if param1 &amp;gt; param2: # interesting  print &amp;#39;Greater&amp;#39;  return (param2 - param1 + 1) or None class SomeClass:  pass &amp;gt;&amp;gt;&amp;gt; message = &amp;#39;&amp;#39;&amp;#39;interpreter ... prompt&amp;#39;&amp;#39;&amp;#39; LaTeX å…¬å¼ å¯ä»¥åˆ›å»ºè¡Œå†…å…¬å¼ï¼Œä¾‹å¦‚ $\Gamma(n) = (n-1)!</description>
      <content>&lt;h1 id=&#34;æ¬¢è¿æ¥åˆ°hindungçš„éƒ¨è½æ ¼-copy-from--é©¬å…‹é£è±¡&#34;&gt;æ¬¢è¿æ¥åˆ°hindungçš„éƒ¨è½æ ¼ Copy from @ é©¬å…‹é£è±¡&lt;/h1&gt;
&lt;p&gt;@(ç¤ºä¾‹ç¬”è®°æœ¬)[é£é©°|äººç”Ÿ|Markdown]&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é©¬å…‹é£è±¡&lt;/strong&gt;æ˜¯ä¸€æ¬¾ä¸“ä¸ºå°è±¡ç¬”è®°ï¼ˆEvernoteï¼‰æ‰“é€ çš„Markdownç¼–è¾‘å™¨ï¼Œé€šè¿‡ç²¾å¿ƒçš„è®¾è®¡ä¸æŠ€æœ¯å®ç°ï¼Œé…åˆå°è±¡ç¬”è®°å¼ºå¤§çš„å­˜å‚¨å’ŒåŒæ­¥åŠŸèƒ½ï¼Œå¸¦æ¥å‰æ‰€æœªæœ‰çš„ä¹¦å†™ä½“éªŒã€‚ç‰¹ç‚¹æ¦‚è¿°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½ä¸°å¯Œ&lt;/strong&gt; ï¼šæ”¯æŒé«˜äº®ä»£ç å—ã€&lt;em&gt;LaTeX&lt;/em&gt; å…¬å¼ã€æµç¨‹å›¾ï¼Œæœ¬åœ°å›¾ç‰‡ä»¥åŠé™„ä»¶ä¸Šä¼ ï¼Œç”šè‡³æˆªå›¾ç²˜è´´ï¼Œå·¥ä½œå­¦ä¹ å¥½å¸®æ‰‹ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾—å¿ƒåº”æ‰‹&lt;/strong&gt; ï¼šç®€æ´é«˜æ•ˆçš„ç¼–è¾‘å™¨ï¼Œæä¾›&lt;a href=&#34;http://maxiang.info/client_zh&#34;&gt;æ¡Œé¢å®¢æˆ·ç«¯&lt;/a&gt;ä»¥åŠ&lt;a href=&#34;https://chrome.google.com/webstore/detail/kidnkfckhbdkfgbicccmdggmpgogehop&#34;&gt;ç¦»çº¿Chrome App&lt;/a&gt;ï¼Œæ”¯æŒç§»åŠ¨ç«¯ Webï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ·±åº¦æ•´åˆ&lt;/strong&gt; ï¼šæ”¯æŒé€‰æ‹©ç¬”è®°æœ¬å’Œæ·»åŠ æ ‡ç­¾ï¼Œæ”¯æŒä»å°è±¡ç¬”è®°è·³è½¬ç¼–è¾‘ï¼Œè½»æ¾ç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;[TOC]&lt;/p&gt;
&lt;h2 id=&#34;markdownç®€ä»‹&#34;&gt;Markdownç®€ä»‹&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Markdown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒå…è®¸äººä»¬ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ï¼Œç„¶åè½¬æ¢æˆæ ¼å¼ä¸°å¯Œçš„HTMLé¡µé¢ã€‚    â€”â€” &lt;a href=&#34;https://zh.wikipedia.org/wiki/Markdown&#34;&gt;ç»´åŸºç™¾ç§‘&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ­£å¦‚æ‚¨åœ¨é˜…è¯»çš„è¿™ä»½æ–‡æ¡£ï¼Œå®ƒä½¿ç”¨ç®€å•çš„ç¬¦å·æ ‡è¯†ä¸åŒçš„æ ‡é¢˜ï¼Œå°†æŸäº›æ–‡å­—æ ‡è®°ä¸º&lt;strong&gt;ç²—ä½“&lt;/strong&gt;æˆ–è€…&lt;em&gt;æ–œä½“&lt;/em&gt;ï¼Œåˆ›å»ºä¸€ä¸ª&lt;a href=&#34;http://www.example.com&#34;&gt;é“¾æ¥&lt;/a&gt;æˆ–ä¸€ä¸ªè„šæ³¨&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;ã€‚ä¸‹é¢åˆ—ä¸¾äº†å‡ ä¸ªé«˜çº§åŠŸèƒ½ï¼Œæ›´å¤šè¯­æ³•è¯·æŒ‰&lt;code&gt;Ctrl + /&lt;/code&gt;æŸ¥çœ‹å¸®åŠ©ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä»£ç å—&#34;&gt;ä»£ç å—&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;@requires_authorization&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;somefunc&lt;/span&gt;(param1&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;, param2&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&amp;#39;A docstring&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; param1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; param2: &lt;span style=&#34;color:#75715e&#34;&gt;# interesting&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        print &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Greater&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; (param2 &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; param1 &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SomeClass&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;pass&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; message &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&amp;#39;interpreter
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;... prompt&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;latex-å…¬å¼&#34;&gt;LaTeX å…¬å¼&lt;/h3&gt;
&lt;p&gt;å¯ä»¥åˆ›å»ºè¡Œå†…å…¬å¼ï¼Œä¾‹å¦‚ $\Gamma(n) = (n-1)!\quad\forall n\in\mathbb N$ã€‚æˆ–è€…å—çº§å…¬å¼ï¼š&lt;/p&gt;
&lt;p&gt;$$	x = \dfrac{-b \pm \sqrt{b^2 - 4ac}}{2a} $$&lt;/p&gt;
&lt;h3 id=&#34;è¡¨æ ¼&#34;&gt;è¡¨æ ¼&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;Item&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;Value&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Qty&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Computer&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;1600 USD&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Phone&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;12 USD&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Pipe&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;1 USD&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;234&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;æµç¨‹å›¾&#34;&gt;æµç¨‹å›¾&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-flow&#34; data-lang=&#34;flow&#34;&gt;st=&amp;gt;start: Start
e=&amp;gt;end
op=&amp;gt;operation: My Operation
cond=&amp;gt;condition: Yes or No?

st-&amp;gt;op-&amp;gt;cond
cond(yes)-&amp;gt;e
cond(no)-&amp;gt;op
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»¥åŠæ—¶åºå›¾:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-sequence&#34; data-lang=&#34;sequence&#34;&gt;Alice-&amp;gt;Bob: Hello Bob, how are you?
Note right of Bob: Bob thinks
Bob--&amp;gt;Alice: I am good thanks!
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æç¤ºï¼š&lt;strong&gt;æƒ³äº†è§£æ›´å¤šï¼Œè¯·æŸ¥çœ‹&lt;/strong&gt;æµç¨‹å›¾&lt;/strong&gt;&lt;a href=&#34;http://adrai.github.io/flowchart.js/&#34;&gt;è¯­æ³•&lt;/a&gt;ä»¥åŠ&lt;strong&gt;æ—¶åºå›¾&lt;/strong&gt;&lt;a href=&#34;http://bramp.github.io/js-sequence-diagrams/&#34;&gt;è¯­æ³•&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;å¤é€‰æ¡†&#34;&gt;å¤é€‰æ¡†&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;- [ ]&lt;/code&gt; å’Œ &lt;code&gt;- [x]&lt;/code&gt; è¯­æ³•å¯ä»¥åˆ›å»ºå¤é€‰æ¡†ï¼Œå®ç° todo-list ç­‰åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; å·²å®Œæˆäº‹é¡¹&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; å¾…åŠäº‹é¡¹1&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; å¾…åŠäº‹é¡¹2&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;strong&gt;ç›®å‰æ”¯æŒå°šä¸å®Œå…¨ï¼Œåœ¨å°è±¡ç¬”è®°ä¸­å‹¾é€‰å¤é€‰æ¡†æ˜¯æ— æ•ˆã€ä¸èƒ½åŒæ­¥çš„ï¼Œæ‰€ä»¥å¿…é¡»åœ¨&lt;/strong&gt;é©¬å…‹é£è±¡&lt;/strong&gt;ä¸­ä¿®æ”¹ Markdown åŸæ–‡æ‰å¯ç”Ÿæ•ˆã€‚ä¸‹ä¸ªç‰ˆæœ¬å°†ä¼šå…¨é¢æ”¯æŒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å°è±¡ç¬”è®°ç›¸å…³&#34;&gt;å°è±¡ç¬”è®°ç›¸å…³&lt;/h2&gt;
&lt;h3 id=&#34;ç¬”è®°æœ¬å’Œæ ‡ç­¾&#34;&gt;ç¬”è®°æœ¬å’Œæ ‡ç­¾&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;é©¬å…‹é£è±¡&lt;/strong&gt;å¢åŠ äº†&lt;code&gt;@(ç¬”è®°æœ¬)[æ ‡ç­¾A|æ ‡ç­¾B]&lt;/code&gt;è¯­æ³•, ä»¥é€‰æ‹©ç¬”è®°æœ¬å’Œæ·»åŠ æ ‡ç­¾ã€‚ &lt;strong&gt;ç»‘å®šè´¦å·å&lt;/strong&gt;ï¼Œ è¾“å…¥&lt;code&gt;(&lt;/code&gt;è‡ªåŠ¨ä¼šå‡ºç°ç¬”è®°æœ¬åˆ—è¡¨ï¼Œè¯·ä»ä¸­é€‰æ‹©ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç¬”è®°æ ‡é¢˜&#34;&gt;ç¬”è®°æ ‡é¢˜&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;é©¬å…‹é£è±¡&lt;/strong&gt;ä¼šè‡ªåŠ¨ä½¿ç”¨æ–‡æ¡£å†…å‡ºç°çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜ä½œä¸ºç¬”è®°æ ‡é¢˜ã€‚ä¾‹å¦‚æœ¬æ–‡ï¼Œå°±æ˜¯ç¬¬ä¸€è¡Œçš„ &lt;code&gt;æ¬¢è¿ä½¿ç”¨é©¬å…‹é£è±¡&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¿«æ·ç¼–è¾‘&#34;&gt;å¿«æ·ç¼–è¾‘&lt;/h3&gt;
&lt;p&gt;ä¿å­˜åœ¨å°è±¡ç¬”è®°ä¸­çš„ç¬”è®°ï¼Œå³ä¸Šè§’ä¼šæœ‰ä¸€ä¸ªçº¢è‰²çš„ç¼–è¾‘æŒ‰é’®ï¼Œç‚¹å‡»åä¼šå›åˆ°&lt;strong&gt;é©¬å…‹é£è±¡&lt;/strong&gt;ä¸­æ‰“å¼€å¹¶ç¼–è¾‘è¯¥ç¬”è®°ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;**æ³¨æ„ï¼š**ç›®å‰ç”¨æˆ·åœ¨å°è±¡ç¬”è®°ä¸­å•æ–¹é¢åšçš„ä»»ä½•ä¿®æ”¹ï¼Œé©¬å…‹é£è±¡æ˜¯æ— æ³•è‡ªåŠ¨æ„ŸçŸ¥å’Œæ›´æ–°çš„ã€‚æ‰€ä»¥è¯·åŠ¡å¿…å›åˆ°é©¬å…‹é£è±¡ç¼–è¾‘ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;æ•°æ®åŒæ­¥&#34;&gt;æ•°æ®åŒæ­¥&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;é©¬å…‹é£è±¡&lt;/strong&gt;é€šè¿‡&lt;strong&gt;å°†MarkdownåŸæ–‡ä»¥éšè—å†…å®¹ä¿å­˜åœ¨ç¬”è®°ä¸­&lt;/strong&gt;çš„ç²¾å¦™è®¾è®¡ï¼Œå®ç°äº†å¯¹Markdownçš„å­˜å‚¨å’Œå†æ¬¡ç¼–è¾‘ã€‚æ—¢è§£å†³äº†å…¶ä»–äº§å“åªæ˜¯å•å‘å¯¼å‡ºHTMLçš„å•è–„ï¼Œåˆè§„é¿äº†æœåŠ¡ç«¯å­˜å‚¨Markdownå¸¦æ¥çš„éšç§å®‰å…¨é—®é¢˜ã€‚è¿™æ ·ï¼ŒæœåŠ¡ç«¯ä»…ä½œä¸ºå¯¹å°è±¡ç¬”è®° APIè°ƒç”¨å’Œæ•°æ®è½¬æ¢ä¹‹ç”¨ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;éšç§å£°æ˜ï¼šç”¨æˆ·æ‰€æœ‰çš„ç¬”è®°æ•°æ®ï¼Œå‡ä¿å­˜åœ¨å°è±¡ç¬”è®°ä¸­ã€‚é©¬å…‹é£è±¡ä¸å­˜å‚¨ç”¨æˆ·çš„ä»»ä½•ç¬”è®°æ•°æ®ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;ç¦»çº¿å­˜å‚¨&#34;&gt;ç¦»çº¿å­˜å‚¨&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;é©¬å…‹é£è±¡&lt;/strong&gt;ä½¿ç”¨æµè§ˆå™¨ç¦»çº¿å­˜å‚¨å°†å†…å®¹å®æ—¶ä¿å­˜åœ¨æœ¬åœ°ï¼Œä¸å¿…æ‹…å¿ƒç½‘ç»œæ–­æ‰æˆ–æµè§ˆå™¨å´©æºƒã€‚ä¸ºäº†èŠ‚çœç©ºé—´å’Œé¿å…å†²çªï¼Œå·²åŒæ­¥è‡³å°è±¡ç¬”è®°å¹¶ä¸”ä¸å†ä¿®æ”¹çš„ç¬”è®°å°†åˆ é™¤éƒ¨åˆ†æœ¬åœ°ç¼“å­˜ï¼Œä¸è¿‡ä¾ç„¶å¯ä»¥éšæ—¶é€šè¿‡&lt;code&gt;æ–‡æ¡£ç®¡ç†&lt;/code&gt;æ‰“å¼€ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;**æ³¨æ„ï¼š**è™½ç„¶æµè§ˆå™¨å­˜å‚¨å¤§éƒ¨åˆ†æ—¶å€™éƒ½æ¯”è¾ƒå¯é ï¼Œä½†å°è±¡ç¬”è®°ä½œä¸ºä¸“ä¸šäº‘å­˜å‚¨ï¼Œæ›´å€¼å¾—ä¿¡èµ–ã€‚ä»¥é˜²ä¸‡ä¸€ï¼Œ&lt;strong&gt;è¯·åŠ¡å¿…ç»å¸¸åŠæ—¶åŒæ­¥åˆ°å°è±¡ç¬”è®°&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ç¼–è¾‘å™¨ç›¸å…³&#34;&gt;ç¼–è¾‘å™¨ç›¸å…³&lt;/h2&gt;
&lt;h3 id=&#34;è®¾ç½®&#34;&gt;è®¾ç½®&lt;/h3&gt;
&lt;p&gt;å³ä¾§ç³»ç»Ÿèœå•ï¼ˆå¿«æ·é”®&lt;code&gt;Ctrl + M&lt;/code&gt;ï¼‰çš„&lt;code&gt;è®¾ç½®&lt;/code&gt;ä¸­ï¼Œæä¾›äº†ç•Œé¢å­—ä½“ã€å­—å·ã€è‡ªå®šä¹‰CSSã€vim/emacs é”®ç›˜æ¨¡å¼ç­‰é«˜çº§é€‰é¡¹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¿«æ·é”®&#34;&gt;å¿«æ·é”®&lt;/h3&gt;
&lt;p&gt;å¸®åŠ©    &lt;code&gt;Ctrl + /&lt;/code&gt;
åŒæ­¥æ–‡æ¡£    &lt;code&gt;Ctrl + S&lt;/code&gt;
åˆ›å»ºæ–‡æ¡£    &lt;code&gt;Ctrl + Alt + N&lt;/code&gt;
æœ€å¤§åŒ–ç¼–è¾‘å™¨    &lt;code&gt;Ctrl + Enter&lt;/code&gt;
é¢„è§ˆæ–‡æ¡£ &lt;code&gt;Ctrl + Alt + Enter&lt;/code&gt;
æ–‡æ¡£ç®¡ç†    &lt;code&gt;Ctrl + O&lt;/code&gt;
ç³»ç»Ÿèœå•    &lt;code&gt;Ctrl + M&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åŠ ç²—    &lt;code&gt;Ctrl + B&lt;/code&gt;
æ’å…¥å›¾ç‰‡    &lt;code&gt;Ctrl + G&lt;/code&gt;
æ’å…¥é“¾æ¥    &lt;code&gt;Ctrl + L&lt;/code&gt;
æå‡æ ‡é¢˜    &lt;code&gt;Ctrl + H&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;å…³äºæ”¶è´¹&#34;&gt;å…³äºæ”¶è´¹&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;é©¬å…‹é£è±¡&lt;/strong&gt;ä¸ºæ–°ç”¨æˆ·æä¾› 10 å¤©çš„è¯•ç”¨æœŸï¼Œè¯•ç”¨æœŸè¿‡åéœ€è¦&lt;a href=&#34;maxiang.info/vip.html&#34;&gt;ç»­è´¹&lt;/a&gt;æ‰èƒ½ç»§ç»­ä½¿ç”¨ã€‚æœªè´­ä¹°æˆ–è€…æœªåŠæ—¶ç»­è´¹ï¼Œå°†ä¸èƒ½åŒæ­¥æ–°çš„ç¬”è®°ã€‚ä¹‹å‰ä¿å­˜è¿‡çš„ç¬”è®°ä¾ç„¶å¯ä»¥ç¼–è¾‘ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åé¦ˆä¸å»ºè®®&#34;&gt;åé¦ˆä¸å»ºè®®&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å¾®åšï¼š&lt;a href=&#34;http://weibo.com/u/2788354117&#34;&gt;@é©¬å…‹é£è±¡&lt;/a&gt;ï¼Œ&lt;a href=&#34;http://weibo.com/ggock&#34; title=&#34;å¼€å‘è€…ä¸ªäººè´¦å·&#34;&gt;@GGock&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;é‚®ç®±ï¼š&lt;a href=&#34;mailto:hustgock@gmail.com&#34;&gt;hustgock@gmail.com&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;æ„Ÿè°¢é˜…è¯»è¿™ä»½å¸®åŠ©æ–‡æ¡£ã€‚è¯·ç‚¹å‡»å³ä¸Šè§’ï¼Œç»‘å®šå°è±¡ç¬”è®°è´¦å·ï¼Œå¼€å¯å…¨æ–°çš„è®°å½•ä¸åˆ†äº«ä½“éªŒå§ã€‚&lt;/p&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹è„šæ³¨ã€‚è¯·æŸ¥é˜… &lt;a href=&#34;https://github.com/fletcher/MultiMarkdown/wiki/MultiMarkdown-Syntax-Guide#footnotes&#34;&gt;MultiMarkdown æ–‡æ¡£&lt;/a&gt; å…³äºè„šæ³¨çš„è¯´æ˜ã€‚ &lt;strong&gt;é™åˆ¶ï¼š&lt;/strong&gt; å°è±¡ç¬”è®°çš„ç¬”è®°å†…å®¹ä½¿ç”¨ &lt;a href=&#34;https://dev.yinxiang.com/doc/articles/enml.php&#34;&gt;ENML&lt;/a&gt; æ ¼å¼ï¼ŒåŸºäº HTMLï¼Œä½†æ˜¯ä¸æ”¯æŒæŸäº›æ ‡ç­¾å’Œå±æ€§ï¼Œä¾‹å¦‚idï¼Œè¿™å°±å¯¼è‡´&lt;code&gt;è„šæ³¨&lt;/code&gt;å’Œ&lt;code&gt;TOC&lt;/code&gt;æ— æ³•æ­£å¸¸ç‚¹å‡»ã€‚&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
    </item>
    
    <item>
      <title>å®¹å™¨æŠ€æœ¯ä¹‹æˆ‘è§</title>
      <link>http://hindung.cn/posts/20/</link>
      <pubDate>Fri, 23 Jul 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/20/</guid>
      <description>å®¹å™¨æŠ€æœ¯ ä»€ä¹ˆæ˜¯å®¹å™¨å‘¢ï¼Ÿ
å°è±¡ä¸­ç¬¬ä¸€æ¬¡æ¥è§¦â€œå®¹å™¨â€è¿™ä¸ªè¯ï¼Œæ˜¯åœ¨åŒ–å­¦è¯¾ä¸Šï¼Œä¸å°±æ˜¯ä¸€è£…ä¸œè¥¿çš„ç“¶å­å˜›æœ‰å•¥ç‰¹åˆ«çš„ã€‚
ä»”ç»†æƒ³æƒ³ï¼Œâ€œè£…â€ä¸œè¥¿å³åœ¨æŸç§ç¨‹åº¦ä¸Šä¸å…¶ä»–ç‰©ä½“éš”ç¦»å¼€æ¥äº†ã€‚æ‰€ä»¥ç§°è¿™ä¸ªã€Œè£…ä¸œè¥¿çš„ä¸œè¥¿ã€ä¸ºå®¹å™¨ã€‚
æ˜¯å§ï¼é‚£ç°åœ¨æ‰€è¯´çš„â€œå®¹å™¨â€åˆ°åº•æ˜¯å•¥æ¦‚å¿µï¼Œä»–èƒ½è£…ä»€ä¹ˆä¸œè¥¿ï¼ŒåˆæŠŠä»€ä¹ˆä¸œè¥¿åœ¨æŸç§ç¨‹åº¦ä¸Šéš”ç¦»å¼€ï¼Ÿ
æˆ‘çš„ç†è§£å°±æ˜¯ï¼šã€ŒæŠŠèµ„æºéš”ç¦»å¼€çš„ä¸œè¥¿ã€ã€‚
èµ„æºæ³›æŒ‡OSä¸Šçš„èµ„æºï¼Œå¦‚CPUã€å†…å­˜ã€è®¾å¤‡ã€æ–‡ä»¶ç³»ç»Ÿç­‰ç­‰ã€‚å¦‚ä½•è¿›è¡Œéš”ç¦»å‘¢ï¼ŸLinuxå†…æ ¸æä¾›äº†æŸç§æœºåˆ¶èƒ½è®©ä¸Šè¯‰æ‰€è¯´çš„â€œèµ„æºâ€éš”ç¦»å¼€æ¥ï¼Œå³Namespaceå’ŒCGroupsã€‚
å®¹å™¨æŠ€æœ¯å°±æ˜¯åŸºäºè¿™ä¸¤ä¸ªå†…æ ¸ç‰¹æ€§è¿›è¡Œè®¾è®¡å’Œå¼€å‘ã€‚
Namespace å‘½åç©ºé—´åœ¨ç»´åŸºç™¾ç§‘ä¸Šçš„å¹¿ä¹‰è§£é‡Šæ˜¯ï¼š
â€œåœ¨è®¡ç®—æœºä¸­ï¼Œå‘½åç©ºé—´æ˜¯ä¸€ç»„ç”¨äºæ ‡è¯†å’Œå¼•ç”¨å„ç§å¯¹è±¡çš„ç¬¦å·ï¼ˆåç§°ï¼‰ã€‚å‘½åç©ºé—´å¯ç¡®ä¿æ‰€æœ‰ç»™å®šçš„å¯¹è±¡é›†éƒ½å…·æœ‰å”¯ä¸€çš„åç§°ï¼Œä»¥ä¾¿å¯ä»¥è½»æ¾è¯†åˆ«å®ƒä»¬ã€‚â€
æ ¹æ®è¿™ä¸ªå®šä¹‰ï¼ŒLinuxå†…æ ¸æä¾›çš„å‘½åç©ºé—´å®šä¹‰ä¸ºï¼š
â€œå‘½åç©ºé—´æ˜¯Linuxå†…æ ¸çš„ä¸€é¡¹åŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½å¯¹å†…æ ¸èµ„æºè¿›è¡Œåˆ†åŒºï¼Œä»¥ä½¿ä¸€ç»„è¿›ç¨‹çœ‹åˆ°ä¸€ç»„èµ„æºï¼Œè€Œå¦ä¸€ç»„è¿›ç¨‹çœ‹åˆ°å¦ä¸€ç»„èµ„æºã€‚è¯¥åŠŸèƒ½é€šè¿‡ä¸ºä¸€ç»„èµ„æºå’Œè¿›ç¨‹å…·æœ‰ç›¸åŒçš„åç§°ç©ºé—´è€Œèµ·ä½œç”¨ï¼Œä½†æ˜¯è¿™äº›åç§°ç©ºé—´å¼•ç”¨äº†ä¸åŒçš„èµ„æºã€‚èµ„æºå¯èƒ½å­˜åœ¨äºå¤šä¸ªç©ºé—´ä¸­ã€‚è¿™æ ·çš„èµ„æºæœ‰è¿›ç¨‹IDã€ä¸»æœºåã€ç”¨æˆ·IDã€æ–‡ä»¶åä»¥åŠä¸€äº›ä¸ç½‘ç»œè®¿é—®å’Œè¿›ç¨‹é—´é€šä¿¡ç›¸å…³ã€‚â€
ä»å†…æ ¸ç‰ˆæœ¬5.6å¼€å§‹ï¼Œå­˜åœ¨8ç§åç§°ç©ºé—´ã€‚å‘½åç©ºé—´åŠŸèƒ½åœ¨æ‰€æœ‰ç±»å‹ä¸Šéƒ½æ˜¯ç›¸åŒçš„ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½ä¸ä¸€ä¸ªå‘½åç©ºé—´ç›¸å…³è”å¹¶ä¸”åªèƒ½æŸ¥çœ‹æˆ–ä½¿ç”¨ä¸è¯¥å‘½åç©ºé—´ä»¥åŠåä»£å‘½åç©ºé—´ç›¸å…³è”çš„èµ„æºã€‚ è¿™æ ·ï¼Œæ¯ä¸ªè¿›ç¨‹ï¼ˆæˆ–å…¶è¿›ç¨‹ç»„ï¼‰å¯ä»¥åœ¨èµ„æºä¸Šæ‹¥æœ‰å”¯ä¸€çš„è§†å›¾ã€‚éš”ç¦»å“ªä¸ªèµ„æºå–å†³äºå·²ä¸ºç»™å®šè¿›ç¨‹ç»„åˆ›å»ºçš„åç§°ç©ºé—´çš„ç±»å‹ã€‚
Mount (mnt) æŒ‚è½½å‘½åç©ºé—´æ§åˆ¶éš”ç¦»æŒ‚è½½ç‚¹ã€‚å³éš”ç¦»æ–‡ä»¶ç³»ç»Ÿç›®å½•ç»“æ„ã€‚
æ¯”å¦‚ä½ åœ¨æ¯ä¸ªå®¹å™¨é‡Œéƒ½æœ‰/usrç›®å½•ï¼Œä½ ä»¬éƒ½å¯ä»¥è®¿é—®è¿™ä¸ªç›®å½•ï¼Œä½†ä»–ä»¬æ˜¯ä¸ä¸€æ ·çš„ã€‚
Process ID (pid) PIDå‘½åç©ºé—´ä¸ºè¿›ç¨‹æä¾›äº†ä¸€å¥—ç‹¬ç«‹äºå…¶ä»–å‘½åç©ºé—´çš„è¿›ç¨‹IDï¼ˆPIDï¼‰ã€‚
PIDå‘½åç©ºé—´æ˜¯åµŒå¥—çš„ï¼Œè¿™æ„å‘³ç€å½“ä¸€ä¸ªæ–°çš„è¿›ç¨‹è¢«åˆ›å»ºæ—¶ï¼Œå®ƒå°†æœ‰ä¸€ä¸ªä»å…¶å½“å‰å‘½åç©ºé—´åˆ°åˆå§‹PIDå‘½åç©ºé—´çš„æ¯ä¸ªå‘½åç©ºé—´çš„PIDã€‚å› æ­¤ï¼Œåˆå§‹PIDå‘½åç©ºé—´èƒ½å¤Ÿçœ‹åˆ°æ‰€æœ‰è¿›ç¨‹ï¼Œå°½ç®¡å…¶PIDä¸å…¶ä»–å‘½åç©ºé—´çœ‹åˆ°çš„è¿›ç¨‹ä¸åŒã€‚
æ¯”å¦‚ç”¨äºåˆ›å»ºå®¹å™¨çš„Runc Daemonè¿›ç¨‹ã€‚
Network (net) ç½‘ç»œåç§°ç©ºé—´å¯è™šæ‹ŸåŒ–ç½‘ç»œå †æ ˆã€‚ç”±äºæ¯ä¸ªå®¹å™¨æœ‰ä¸åŒçš„ç½‘ç»œæ¥å£ï¼Œæ¯ä¸ªåœ°å€ä¿¡æ¯ï¼ŒåŒ…æ‹¬IPåœ°å€ï¼Œéƒ½å¯ä»¥åˆ†å¼€ã€‚
Interprocess Communication (ipc) IPCå‘½åç©ºé—´å°†è¿›ç¨‹ä¸SysVé£æ ¼çš„è¿›ç¨‹é—´é€šä¿¡éš”ç¦»ã€‚
UTS UTSï¼ˆUNIXæ—¶é—´å…±äº«ï¼‰å‘½åç©ºé—´å…è®¸ä¸€ä¸ªç³»ç»Ÿåœ¨ä¸åŒçš„è¿›ç¨‹ä¸­å‡ºç°ä¸åŒçš„ä¸»æœºåå’ŒåŸŸåã€‚
User ID (user) ç”¨æˆ·å‘½åç©ºé—´æ˜¯ä¸€ä¸ªæä¾›æƒé™éš”ç¦»å’Œç”¨æˆ·è¯†åˆ«éš”ç¦»çš„åŠŸèƒ½ï¼Œè·¨è¶Šå¤šç»„è¿›ç¨‹ï¼Œä»å†…æ ¸3.8å¼€å§‹å¯ç”¨ã€‚
åœ¨ç®¡ç†å‘˜çš„ååŠ©ä¸‹ï¼Œæœ‰å¯èƒ½å»ºç«‹ä¸€ä¸ªçœ‹èµ·æ¥æœ‰ç®¡ç†æƒé™çš„å®¹å™¨ï¼Œè€Œå®é™…ä¸Šæ²¡æœ‰ç»™ç”¨æˆ·è¿›ç¨‹æå‡æƒé™ã€‚åƒPIDå‘½åç©ºé—´ä¸€æ ·ï¼Œç”¨æˆ·å‘½åç©ºé—´æ˜¯åµŒå¥—çš„ï¼Œæ¯ä¸ªæ–°çš„ç”¨æˆ·å‘½åç©ºé—´éƒ½è¢«è®¤ä¸ºæ˜¯åˆ›å»ºå®ƒçš„ç”¨æˆ·å‘½åç©ºé—´çš„å­ç©ºé—´ã€‚
Control group (cgroup) Namespace æ§åˆ¶ç»„å‘½åç©ºé—´ï¼Œéšè—äº†è¿›ç¨‹ä½œä¸ºæˆå‘˜çš„æ§åˆ¶ç»„çš„èº«ä»½ã€‚
åœ¨è¿™æ ·çš„å‘½åç©ºé—´ä¸­çš„è¿›ç¨‹ï¼Œåœ¨æ£€æŸ¥ä»»ä½•è¿›ç¨‹å±äºå“ªä¸ªæ§åˆ¶ç»„æ—¶ï¼Œä¼šçœ‹åˆ°ä¸€ä¸ªå®é™…ä¸Šæ˜¯ç›¸å¯¹äºåˆ›å»ºæ—¶è®¾ç½®çš„æ§åˆ¶ç»„çš„è·¯å¾„ï¼Œéšè—å…¶çœŸå®çš„æ§åˆ¶ç»„ä½ç½®å’Œèº«ä»½ã€‚
Time Namespace æ—¶é—´å‘½åç©ºé—´å…è®¸è¿›ç¨‹ä»¥ç±»ä¼¼äºUTSå‘½åç©ºé—´çš„æ–¹å¼çœ‹åˆ°ä¸åŒçš„ç³»ç»Ÿæ—¶é—´ã€‚ å®ƒåœ¨2018å¹´è¢«æå‡ºï¼Œå¹¶åœ¨2020å¹´3æœˆå‘å¸ƒçš„Linux 5.6ä¸Šç™»é™†ã€‚
è§„åˆ’ä¸­çš„å‘½åç©ºé—´ syslog namespaceã€Syscallsã€Destructionï¼Œå…·ä½“ä¿¡æ¯è¯·å‚é˜…ç»´åŸºç™¾ç§‘
CGroup æ§åˆ¶ç»„cgroupsæ˜¯Linuxå†…æ ¸æä¾›çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç”¨äºä»ç¡¬ä»¶å’Œç›¸å…³æ–¹é¢é™åˆ¶ä¸€ç»„ç‰¹å®šçš„åˆ†ç»„è¿›ç¨‹ã€‚
å¦‚éš”ç¦»CPUã€å†…å­˜ã€è®¾å¤‡ã€ç£ç›˜ioã€ç½‘ç»œioç­‰ã€‚
æœ‰ä¸¤ä¸ªç‰ˆæœ¬çš„cgroupã€‚Cgroupsæœ€åˆç”±Paul Menageå’ŒRohit Sethç¼–å†™ï¼Œå¹¶äº2007å¹´è¿›å…¥Linuxå†…æ ¸ä¸»çº¿ã€‚æ­¤åç§°ä¸ºcgroupsç‰ˆæœ¬1ã€‚
ç„¶åç”±Tejun Heoæ¥ç®¡äº†cgroupçš„å¼€å‘å’Œç»´æŠ¤ã€‚Tejun Heoé‡æ–°è®¾è®¡å¹¶é‡å†™äº†cgroupã€‚è¿™ç§é‡å†™ç°åœ¨ç§°ä¸ºç‰ˆæœ¬2ï¼Œcgroups-v2çš„æ–‡æ¡£é¦–æ¬¡å‡ºç°åœ¨2016å¹´3æœˆ14æ—¥å‘å¸ƒçš„Linuxå†…æ ¸4.5ä¸­ã€‚
ä¸v1ä¸åŒï¼Œcgroup v2ä»…å…·æœ‰å•ä¸ªè¿›ç¨‹å±‚æ¬¡ç»“æ„ï¼Œå¹¶ä¸”åœ¨è¿›ç¨‹ä¹‹é—´è¿›è¡ŒåŒºåˆ†ï¼Œè€Œä¸å¯¹çº¿ç¨‹è¿›è¡ŒåŒºåˆ†ã€‚
æ§åˆ¶ç»„çš„æ ¸å¿ƒåŠŸèƒ½ï¼š
 èµ„æºé™åˆ¶ï¼šå¯ä»¥å°†ç»„è®¾ç½®ä¸ºä¸è¶…è¿‡é…ç½®çš„å†…å­˜é™åˆ¶ï¼Œè¯¥é™åˆ¶è¿˜åŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ ä¼˜å…ˆçº§ï¼šä¸€äº›ç»„å¯èƒ½ä¼šåœ¨CPUåˆ©ç”¨ç‡æˆ–ç£ç›˜I / Oååé‡ä¸­è·å¾—æ›´å¤§ä»½é¢ å¯ç»Ÿè®¡ï¼šè¡¡é‡ç»„çš„èµ„æºä½¿ç”¨æƒ…å†µ å¯æ§åˆ¶ï¼šå†»ç»“/å¤æ´»è¿›ç¨‹ç»„  æ§åˆ¶ç»„å…·æœ‰åˆ†å±‚æ¦‚å¿µï¼Œè¿™æ„å‘³ç€æ¯ä¸ªç»„éƒ½ä»å…¶çˆ¶ç»„ç»§æ‰¿é™åˆ¶ã€‚å†…æ ¸é€šè¿‡cgroupæ¥å£æä¾›å¯¹å¤šä¸ªæ§åˆ¶å™¨ï¼ˆä¹Ÿç§°ä¸ºå­ç³»ç»Ÿï¼‰çš„è®¿é—®ã€‚ä¾‹å¦‚ï¼Œâ€œå†…å­˜â€æ§åˆ¶å™¨é™åˆ¶å†…å­˜ä½¿ç”¨ï¼Œâ€œ cpuacctâ€è´¦æˆ·CPUä½¿ç”¨ç‡ç­‰ã€‚</description>
      <content>&lt;h2 id=&#34;å®¹å™¨æŠ€æœ¯&#34;&gt;å®¹å™¨æŠ€æœ¯&lt;/h2&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯å®¹å™¨å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å°è±¡ä¸­ç¬¬ä¸€æ¬¡æ¥è§¦â€œå®¹å™¨â€è¿™ä¸ªè¯ï¼Œæ˜¯åœ¨åŒ–å­¦è¯¾ä¸Šï¼Œä¸å°±æ˜¯ä¸€è£…ä¸œè¥¿çš„ç“¶å­å˜›æœ‰å•¥ç‰¹åˆ«çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä»”ç»†æƒ³æƒ³ï¼Œâ€œè£…â€ä¸œè¥¿å³åœ¨æŸç§ç¨‹åº¦ä¸Šä¸å…¶ä»–ç‰©ä½“éš”ç¦»å¼€æ¥äº†ã€‚æ‰€ä»¥ç§°è¿™ä¸ªã€Œè£…ä¸œè¥¿çš„ä¸œè¥¿ã€ä¸ºå®¹å™¨ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¯å§ï¼é‚£ç°åœ¨æ‰€è¯´çš„â€œå®¹å™¨â€åˆ°åº•æ˜¯å•¥æ¦‚å¿µï¼Œä»–èƒ½è£…ä»€ä¹ˆä¸œè¥¿ï¼ŒåˆæŠŠä»€ä¹ˆä¸œè¥¿åœ¨æŸç§ç¨‹åº¦ä¸Šéš”ç¦»å¼€ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘çš„ç†è§£å°±æ˜¯ï¼šã€ŒæŠŠèµ„æºéš”ç¦»å¼€çš„ä¸œè¥¿ã€ã€‚&lt;/p&gt;
&lt;p&gt;èµ„æºæ³›æŒ‡OSä¸Šçš„èµ„æºï¼Œå¦‚CPUã€å†…å­˜ã€è®¾å¤‡ã€æ–‡ä»¶ç³»ç»Ÿç­‰ç­‰ã€‚å¦‚ä½•è¿›è¡Œéš”ç¦»å‘¢ï¼ŸLinuxå†…æ ¸æä¾›äº†æŸç§æœºåˆ¶èƒ½è®©ä¸Šè¯‰æ‰€è¯´çš„â€œèµ„æºâ€éš”ç¦»å¼€æ¥ï¼Œå³Namespaceå’ŒCGroupsã€‚&lt;/p&gt;
&lt;p&gt;å®¹å™¨æŠ€æœ¯å°±æ˜¯åŸºäºè¿™ä¸¤ä¸ªå†…æ ¸ç‰¹æ€§è¿›è¡Œè®¾è®¡å’Œå¼€å‘ã€‚&lt;/p&gt;
&lt;h3 id=&#34;namespace&#34;&gt;Namespace&lt;/h3&gt;
&lt;p&gt;å‘½åç©ºé—´åœ¨&lt;a href=&#34;https://en.wikipedia.org/wiki/Namespace&#34;&gt;ç»´åŸºç™¾ç§‘&lt;/a&gt;ä¸Šçš„å¹¿ä¹‰è§£é‡Šæ˜¯ï¼š&lt;/p&gt;
&lt;p&gt;â€œåœ¨è®¡ç®—æœºä¸­ï¼Œå‘½åç©ºé—´æ˜¯ä¸€ç»„ç”¨äºæ ‡è¯†å’Œå¼•ç”¨å„ç§å¯¹è±¡çš„ç¬¦å·ï¼ˆåç§°ï¼‰ã€‚å‘½åç©ºé—´å¯ç¡®ä¿æ‰€æœ‰ç»™å®šçš„å¯¹è±¡é›†éƒ½å…·æœ‰å”¯ä¸€çš„åç§°ï¼Œä»¥ä¾¿å¯ä»¥è½»æ¾è¯†åˆ«å®ƒä»¬ã€‚â€&lt;/p&gt;
&lt;p&gt;æ ¹æ®è¿™ä¸ªå®šä¹‰ï¼ŒLinuxå†…æ ¸æä¾›çš„å‘½åç©ºé—´å®šä¹‰ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;â€œå‘½åç©ºé—´æ˜¯Linuxå†…æ ¸çš„ä¸€é¡¹åŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½å¯¹å†…æ ¸èµ„æºè¿›è¡Œåˆ†åŒºï¼Œä»¥ä½¿ä¸€ç»„è¿›ç¨‹çœ‹åˆ°ä¸€ç»„èµ„æºï¼Œè€Œå¦ä¸€ç»„è¿›ç¨‹çœ‹åˆ°å¦ä¸€ç»„èµ„æºã€‚è¯¥åŠŸèƒ½é€šè¿‡ä¸ºä¸€ç»„èµ„æºå’Œè¿›ç¨‹å…·æœ‰ç›¸åŒçš„åç§°ç©ºé—´è€Œèµ·ä½œç”¨ï¼Œä½†æ˜¯è¿™äº›åç§°ç©ºé—´å¼•ç”¨äº†ä¸åŒçš„èµ„æºã€‚èµ„æºå¯èƒ½å­˜åœ¨äºå¤šä¸ªç©ºé—´ä¸­ã€‚è¿™æ ·çš„èµ„æºæœ‰è¿›ç¨‹IDã€ä¸»æœºåã€ç”¨æˆ·IDã€æ–‡ä»¶åä»¥åŠä¸€äº›ä¸ç½‘ç»œè®¿é—®å’Œè¿›ç¨‹é—´é€šä¿¡ç›¸å…³ã€‚â€&lt;/p&gt;
&lt;p&gt;ä»å†…æ ¸ç‰ˆæœ¬5.6å¼€å§‹ï¼Œå­˜åœ¨8ç§åç§°ç©ºé—´ã€‚å‘½åç©ºé—´åŠŸèƒ½åœ¨æ‰€æœ‰ç±»å‹ä¸Šéƒ½æ˜¯ç›¸åŒçš„ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½ä¸ä¸€ä¸ªå‘½åç©ºé—´ç›¸å…³è”å¹¶ä¸”åªèƒ½æŸ¥çœ‹æˆ–ä½¿ç”¨ä¸è¯¥å‘½åç©ºé—´ä»¥åŠåä»£å‘½åç©ºé—´ç›¸å…³è”çš„èµ„æºã€‚
è¿™æ ·ï¼Œæ¯ä¸ªè¿›ç¨‹ï¼ˆæˆ–å…¶è¿›ç¨‹ç»„ï¼‰å¯ä»¥åœ¨èµ„æºä¸Šæ‹¥æœ‰å”¯ä¸€çš„è§†å›¾ã€‚éš”ç¦»å“ªä¸ªèµ„æºå–å†³äºå·²ä¸ºç»™å®šè¿›ç¨‹ç»„åˆ›å»ºçš„åç§°ç©ºé—´çš„ç±»å‹ã€‚&lt;/p&gt;
&lt;h4 id=&#34;mount-mnt&#34;&gt;Mount (mnt)&lt;/h4&gt;
&lt;p&gt;æŒ‚è½½å‘½åç©ºé—´æ§åˆ¶éš”ç¦»æŒ‚è½½ç‚¹ã€‚å³éš”ç¦»æ–‡ä»¶ç³»ç»Ÿç›®å½•ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ä½ åœ¨æ¯ä¸ªå®¹å™¨é‡Œéƒ½æœ‰/usrç›®å½•ï¼Œä½ ä»¬éƒ½å¯ä»¥è®¿é—®è¿™ä¸ªç›®å½•ï¼Œä½†ä»–ä»¬æ˜¯ä¸ä¸€æ ·çš„ã€‚&lt;/p&gt;
&lt;h4 id=&#34;process-id-pid&#34;&gt;Process ID (pid)&lt;/h4&gt;
&lt;p&gt;PIDå‘½åç©ºé—´ä¸ºè¿›ç¨‹æä¾›äº†ä¸€å¥—ç‹¬ç«‹äºå…¶ä»–å‘½åç©ºé—´çš„è¿›ç¨‹IDï¼ˆPIDï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;PIDå‘½åç©ºé—´æ˜¯åµŒå¥—çš„ï¼Œè¿™æ„å‘³ç€å½“ä¸€ä¸ªæ–°çš„è¿›ç¨‹è¢«åˆ›å»ºæ—¶ï¼Œå®ƒå°†æœ‰ä¸€ä¸ªä»å…¶å½“å‰å‘½åç©ºé—´åˆ°åˆå§‹PIDå‘½åç©ºé—´çš„æ¯ä¸ªå‘½åç©ºé—´çš„PIDã€‚å› æ­¤ï¼Œåˆå§‹PIDå‘½åç©ºé—´èƒ½å¤Ÿçœ‹åˆ°æ‰€æœ‰è¿›ç¨‹ï¼Œå°½ç®¡å…¶PIDä¸å…¶ä»–å‘½åç©ºé—´çœ‹åˆ°çš„è¿›ç¨‹ä¸åŒã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ç”¨äºåˆ›å»ºå®¹å™¨çš„Runc Daemonè¿›ç¨‹ã€‚&lt;/p&gt;
&lt;h4 id=&#34;network-net&#34;&gt;Network (net)&lt;/h4&gt;
&lt;p&gt;ç½‘ç»œåç§°ç©ºé—´å¯è™šæ‹ŸåŒ–ç½‘ç»œå †æ ˆã€‚ç”±äºæ¯ä¸ªå®¹å™¨æœ‰ä¸åŒçš„ç½‘ç»œæ¥å£ï¼Œæ¯ä¸ªåœ°å€ä¿¡æ¯ï¼ŒåŒ…æ‹¬IPåœ°å€ï¼Œéƒ½å¯ä»¥åˆ†å¼€ã€‚&lt;/p&gt;
&lt;h4 id=&#34;interprocess-communication-ipc&#34;&gt;Interprocess Communication (ipc)&lt;/h4&gt;
&lt;p&gt;IPCå‘½åç©ºé—´å°†è¿›ç¨‹ä¸SysVé£æ ¼çš„è¿›ç¨‹é—´é€šä¿¡éš”ç¦»ã€‚&lt;/p&gt;
&lt;h4 id=&#34;uts&#34;&gt;UTS&lt;/h4&gt;
&lt;p&gt;UTSï¼ˆUNIXæ—¶é—´å…±äº«ï¼‰å‘½åç©ºé—´å…è®¸ä¸€ä¸ªç³»ç»Ÿåœ¨ä¸åŒçš„è¿›ç¨‹ä¸­å‡ºç°ä¸åŒçš„ä¸»æœºåå’ŒåŸŸåã€‚&lt;/p&gt;
&lt;h4 id=&#34;user-id-user&#34;&gt;User ID (user)&lt;/h4&gt;
&lt;p&gt;ç”¨æˆ·å‘½åç©ºé—´æ˜¯ä¸€ä¸ªæä¾›æƒé™éš”ç¦»å’Œç”¨æˆ·è¯†åˆ«éš”ç¦»çš„åŠŸèƒ½ï¼Œè·¨è¶Šå¤šç»„è¿›ç¨‹ï¼Œä»å†…æ ¸3.8å¼€å§‹å¯ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç®¡ç†å‘˜çš„ååŠ©ä¸‹ï¼Œæœ‰å¯èƒ½å»ºç«‹ä¸€ä¸ªçœ‹èµ·æ¥æœ‰ç®¡ç†æƒé™çš„å®¹å™¨ï¼Œè€Œå®é™…ä¸Šæ²¡æœ‰ç»™ç”¨æˆ·è¿›ç¨‹æå‡æƒé™ã€‚åƒPIDå‘½åç©ºé—´ä¸€æ ·ï¼Œç”¨æˆ·å‘½åç©ºé—´æ˜¯åµŒå¥—çš„ï¼Œæ¯ä¸ªæ–°çš„ç”¨æˆ·å‘½åç©ºé—´éƒ½è¢«è®¤ä¸ºæ˜¯åˆ›å»ºå®ƒçš„ç”¨æˆ·å‘½åç©ºé—´çš„å­ç©ºé—´ã€‚&lt;/p&gt;
&lt;h4 id=&#34;control-group-cgroup-namespace&#34;&gt;Control group (cgroup) Namespace&lt;/h4&gt;
&lt;p&gt;æ§åˆ¶ç»„å‘½åç©ºé—´ï¼Œéšè—äº†è¿›ç¨‹ä½œä¸ºæˆå‘˜çš„æ§åˆ¶ç»„çš„èº«ä»½ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™æ ·çš„å‘½åç©ºé—´ä¸­çš„è¿›ç¨‹ï¼Œåœ¨æ£€æŸ¥ä»»ä½•è¿›ç¨‹å±äºå“ªä¸ªæ§åˆ¶ç»„æ—¶ï¼Œä¼šçœ‹åˆ°ä¸€ä¸ªå®é™…ä¸Šæ˜¯ç›¸å¯¹äºåˆ›å»ºæ—¶è®¾ç½®çš„æ§åˆ¶ç»„çš„è·¯å¾„ï¼Œéšè—å…¶çœŸå®çš„æ§åˆ¶ç»„ä½ç½®å’Œèº«ä»½ã€‚&lt;/p&gt;
&lt;h4 id=&#34;time-namespace&#34;&gt;Time Namespace&lt;/h4&gt;
&lt;p&gt;æ—¶é—´å‘½åç©ºé—´å…è®¸è¿›ç¨‹ä»¥ç±»ä¼¼äºUTSå‘½åç©ºé—´çš„æ–¹å¼çœ‹åˆ°ä¸åŒçš„ç³»ç»Ÿæ—¶é—´ã€‚
å®ƒåœ¨2018å¹´è¢«æå‡ºï¼Œå¹¶åœ¨2020å¹´3æœˆå‘å¸ƒçš„Linux 5.6ä¸Šç™»é™†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è§„åˆ’ä¸­çš„å‘½åç©ºé—´&#34;&gt;è§„åˆ’ä¸­çš„å‘½åç©ºé—´&lt;/h3&gt;
&lt;p&gt;syslog namespaceã€Syscallsã€Destructionï¼Œå…·ä½“ä¿¡æ¯è¯·å‚é˜…&lt;a href=&#34;https://en.wikipedia.org/wiki/Linux_namespaces&#34;&gt;ç»´åŸºç™¾ç§‘&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;cgroup&#34;&gt;CGroup&lt;/h3&gt;
&lt;p&gt;æ§åˆ¶ç»„cgroupsæ˜¯Linuxå†…æ ¸æä¾›çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç”¨äºä»ç¡¬ä»¶å’Œç›¸å…³æ–¹é¢é™åˆ¶ä¸€ç»„ç‰¹å®šçš„åˆ†ç»„è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚éš”ç¦»CPUã€å†…å­˜ã€è®¾å¤‡ã€ç£ç›˜ioã€ç½‘ç»œioç­‰ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰ä¸¤ä¸ªç‰ˆæœ¬çš„cgroupã€‚Cgroupsæœ€åˆç”±Paul Menageå’ŒRohit Sethç¼–å†™ï¼Œå¹¶äº2007å¹´è¿›å…¥Linuxå†…æ ¸ä¸»çº¿ã€‚æ­¤åç§°ä¸ºcgroupsç‰ˆæœ¬1ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åç”±Tejun Heoæ¥ç®¡äº†cgroupçš„å¼€å‘å’Œç»´æŠ¤ã€‚Tejun Heoé‡æ–°è®¾è®¡å¹¶é‡å†™äº†cgroupã€‚è¿™ç§é‡å†™ç°åœ¨ç§°ä¸ºç‰ˆæœ¬2ï¼Œcgroups-v2çš„æ–‡æ¡£é¦–æ¬¡å‡ºç°åœ¨2016å¹´3æœˆ14æ—¥å‘å¸ƒçš„Linuxå†…æ ¸4.5ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ä¸v1ä¸åŒï¼Œcgroup v2ä»…å…·æœ‰å•ä¸ªè¿›ç¨‹å±‚æ¬¡ç»“æ„ï¼Œå¹¶ä¸”åœ¨è¿›ç¨‹ä¹‹é—´è¿›è¡ŒåŒºåˆ†ï¼Œè€Œä¸å¯¹çº¿ç¨‹è¿›è¡ŒåŒºåˆ†ã€‚&lt;/p&gt;
&lt;p&gt;æ§åˆ¶ç»„çš„æ ¸å¿ƒåŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;èµ„æºé™åˆ¶ï¼šå¯ä»¥å°†ç»„è®¾ç½®ä¸ºä¸è¶…è¿‡é…ç½®çš„å†…å­˜é™åˆ¶ï¼Œè¯¥é™åˆ¶è¿˜åŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿç¼“å­˜&lt;/li&gt;
&lt;li&gt;ä¼˜å…ˆçº§ï¼šä¸€äº›ç»„å¯èƒ½ä¼šåœ¨CPUåˆ©ç”¨ç‡æˆ–ç£ç›˜I / Oååé‡ä¸­è·å¾—æ›´å¤§ä»½é¢&lt;/li&gt;
&lt;li&gt;å¯ç»Ÿè®¡ï¼šè¡¡é‡ç»„çš„èµ„æºä½¿ç”¨æƒ…å†µ&lt;/li&gt;
&lt;li&gt;å¯æ§åˆ¶ï¼šå†»ç»“/å¤æ´»è¿›ç¨‹ç»„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ§åˆ¶ç»„å…·æœ‰åˆ†å±‚æ¦‚å¿µï¼Œè¿™æ„å‘³ç€æ¯ä¸ªç»„éƒ½ä»å…¶çˆ¶ç»„ç»§æ‰¿é™åˆ¶ã€‚å†…æ ¸é€šè¿‡cgroupæ¥å£æä¾›å¯¹å¤šä¸ªæ§åˆ¶å™¨ï¼ˆä¹Ÿç§°ä¸ºå­ç³»ç»Ÿï¼‰çš„è®¿é—®ã€‚ä¾‹å¦‚ï¼Œâ€œå†…å­˜â€æ§åˆ¶å™¨é™åˆ¶å†…å­˜ä½¿ç”¨ï¼Œâ€œ cpuacctâ€è´¦æˆ·CPUä½¿ç”¨ç‡ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨æ§åˆ¶ç»„çš„æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡æ‰‹åŠ¨è®¿é—®cgroupè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡ä½¿ç”¨cgcreateï¼Œcgexecå’Œcgclassifyï¼ˆæ¥è‡ªlibcgroupï¼‰ä¹‹ç±»çš„å·¥å…·åŠ¨æ€åˆ›å»ºå’Œç®¡ç†ç»„ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡â€œå¼•æ“å®ˆæŠ¤ç¨‹åºè§„åˆ™â€ï¼Œå¯ä»¥æŒ‰ç…§é…ç½®ä¸­çš„æŒ‡å®šè‡ªåŠ¨å°†æŸäº›ç”¨æˆ·ï¼Œç»„æˆ–å‘½ä»¤çš„è¿›ç¨‹ç§»è‡³cgroupã€‚&lt;/li&gt;
&lt;li&gt;é—´æ¥é€šè¿‡å…¶å®ƒè½¯ä»¶ä½¿ç”¨çš„cgroupï¼Œå¦‚docker&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;systemd-cgtopå‘½ä»¤å¯ç”¨äºæŒ‰èµ„æºä½¿ç”¨æƒ…å†µæ˜¾ç¤ºé¡¶çº§æ§åˆ¶ç»„ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡å‘½ä»¤ &lt;code&gt;$ ll /sys/fs/cgroup/&lt;/code&gt; æŸ¥çœ‹æ§åˆ¶ç»„ä¸­æœ‰å“ªäº›èµ„æºè¢«æ§åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;Linux Kernel 4.19ï¼ˆ2018å¹´10æœˆï¼‰å¼•å…¥äº†cgroupå¯¹OOMKillerå®ç°çš„è®¤è¯†ï¼Œè¯¥åŠŸèƒ½å¢åŠ äº†å°†cgroupä½œä¸ºå•ä¸ªå•å…ƒæ€æ­»çš„èƒ½åŠ›ï¼Œä»è€Œä¿è¯äº†å·¥ä½œè´Ÿè½½çš„å®Œæ•´æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®¹å™¨é•œåƒ&#34;&gt;å®¹å™¨é•œåƒ&lt;/h2&gt;
&lt;p&gt;å®¹å™¨é•œåƒæ˜¯å°±æ˜¯å®¹å™¨çš„å¿«ç…§ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºdocker é•œåƒæ¥è¯´ï¼Œä»–å¯ä»¥é€šè¿‡Dockerfileæ„å»ºã€‚&lt;/p&gt;
&lt;p&gt;é•œåƒçš„å®ç°åŸç†æ˜¯UnionFsï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;â€œUnionæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFsï¼‰æ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œä»–æ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹ï¼ˆ unite several directories into a single virtual filesystemâ€&lt;/p&gt;
&lt;p&gt;UnionFSé‡‡ç”¨å†™æ—¶å¤åˆ¶ï¼ˆCOWï¼‰çš„æ–¹æ³•ï¼Œå±‚å±‚å åŠ åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†æ˜¯è”åˆåŠ è½½ä¼šæŠŠä»–ä»¬æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œåˆå¹¶å¤åˆ¶è¢«å®šå‘åˆ°ä¸€ä¸ªç‰¹å®šçš„å®é™…æ–‡ä»¶ç³»ç»Ÿã€‚è¿™æ ·å¯ä»¥ä½¿æ–‡ä»¶ç³»ç»Ÿçœ‹èµ·æ¥å¯å†™ï¼Œä½†å®é™…ä¸Šä¸å…è®¸å†™æ“ä½œæ›´æ”¹æ–‡ä»¶ç³»ç»Ÿï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•ã€‚&lt;/p&gt;
&lt;p&gt;Dockeråœ¨é•œåƒå±‚å ä¸Šä¹Ÿé‡‡ç”¨äº†COWæŠ€æœ¯ã€‚å®¹å™¨ä¸é•œåƒçš„åŒºåˆ«å°±æ˜¯ï¼šå®¹å™¨=é•œåƒ+å¯å†™å±‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯docker&#34;&gt;ä»€ä¹ˆæ˜¯Docker&lt;/h2&gt;
&lt;p&gt;Dockeræ˜¯å®¹å™¨æŠ€æœ¯çš„ä¸€ç§å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;Dockeråˆ†ä¸ºå®¢æˆ·ç«¯å’ŒDaemonè¿›ç¨‹ï¼ŒDockerå®¢æˆ·ç«¯æ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºè·ŸDaemonç¨‹åºæ²Ÿé€šå¹¶å‘é€æŒ‡ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;Docker Daemonè¿›ç¨‹ä¼šä¸Containerdè¿›ç¨‹é€šè®¯å¹¶åˆ›å»ºå®¹å™¨ã€‚&lt;/p&gt;
&lt;p&gt;è€ŒContainerdæ ¸å¿ƒæ˜¯é€šè¿‡runcè¿›è¡Œåˆ›å»ºå®¹å™¨ã€‚è¯¥éƒ¨åˆ†å±äºå®¹å™¨è¿è¡Œæ—¶æ¥å£çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸è™šæ‹Ÿæœºçš„åŒºåˆ«&#34;&gt;ä¸è™šæ‹Ÿæœºçš„åŒºåˆ«&lt;/h3&gt;
&lt;p&gt;ä¼ ç»Ÿè™šæ‹Ÿæœºå®ç°è™šæ‹ŸåŒ–çš„æ–¹æ³•æ˜¯ï¼Œåœ¨è£¸é‡‘å±ä¸Šå®‰è£…è™šæ‹Ÿæœºç®¡ç†ç¨‹åºï¼Œå¹¶ä¸”åœ¨å„ä¸ªè™šæ‹Ÿæœºä¸Šéœ€è¦å®‰è£…æ“ä½œç³»ç»Ÿï¼Œå› æ­¤åœ¨è™šæ‹Ÿä¸Šå­˜åœ¨å¤§é‡èµ„æºå¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;è€Œå®¹å™¨åˆ™åƒæ˜¯æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªä¸ªè¿›ç¨‹ï¼Œä»–ä»¬é€šè¿‡å®¹å™¨è¿›è¡Œéš”ç¦»ã€‚&lt;/p&gt;
&lt;p&gt;å®¹å™¨æŠ€æœ¯å°±åƒæ˜¯ä¸€ä¸ªã€Œå¯¹åœ¨Linuxä¸Šè¿è¡Œçš„ç›¸å…³è¿›ç¨‹è¿›è¡Œåˆ†ç»„ï¼Œè®©æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨ç‹¬ç«‹çš„ç”¨æˆ·ç©ºé—´ä¸­è¿è¡Œã€çš„æŠ€æœ¯ã€‚&lt;/p&gt;
&lt;p&gt;åŸåˆ™ä¸Šï¼Œä»å®‰å…¨æ€§çš„è§’åº¦æ¥çœ‹ï¼Œå®¹å™¨æ–¹æ³•å¯¹æ‰§è¡Œç¯å¢ƒçš„æ§åˆ¶æ¯”è™šæ‹ŸæœåŠ¡å™¨æ›´å®¹æ˜“å—åˆ°æ”»å‡»ã€‚&lt;/p&gt;
&lt;p&gt;é™¤éæ“ä½œç³»ç»Ÿæˆ–è™šæ‹Ÿæœºç›‘æ§ç¨‹åºä¸­å­˜åœ¨æŸäº›æ¼æ´ï¼Œå¦åˆ™è™šæ‹ŸæœåŠ¡å™¨ä¸å¤ªå¯èƒ½å½±å“å…¶ä»–è™šæ‹Ÿç¯å¢ƒï¼Œä½†æ˜¯ç”±äºå®¹å™¨ä¹‹é—´çš„å…³ç³»åªæ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå› æ­¤å®ƒå°†å½±å“å…¶ä»–å®¹å™¨ï¼ˆè¿›ç¨‹ï¼‰ã€‚ç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒæ–‡ç« ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://qiita.com/tajima_taso/items/28938415846dcc2e83ff&#34;&gt;åŸç†åŸå‰‡ã§ç†è§£ã™ã‚‹Docker&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.infoq.com/articles/build-a-container-golang/&#34;&gt;Build Your Own Container Using Less than 100 Lines of Go&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Cgroups&#34;&gt;cgroups&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Linux_namespaces&#34;&gt;Linux_namespaces&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/UnionFS&#34;&gt;UnionFS&lt;/a&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>Iptableè§„åˆ™åˆæ¢</title>
      <link>http://hindung.cn/posts/22/</link>
      <pubDate>Tue, 01 Jun 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/22/</guid>
      <description>iptableæ˜¯å•¥ å‚è€ƒç»´åŸºç™¾ç§‘ï¼šiptablesæ˜¯è¿è¡Œåœ¨ç”¨æˆ·ç©ºé—´çš„åº”ç”¨è½¯ä»¶ï¼Œé€šè¿‡æ§åˆ¶Linuxå†…æ ¸netfilteræ¨¡å—ï¼Œæ¥ç®¡ç†ç½‘ç»œæ•°æ®åŒ…çš„å¤„ç†å’Œè½¬å‘ã€‚
iptablesè§„åˆ™ iptablesä¸»è¦æœ‰rawã€mangleã€filterã€natè¿™å‡ ä¸ªè¡¨ï¼Œå¯¹åº”å‡ ä¸ªè§„åˆ™ï¼šPREROUTING ã€INPUT ã€FORWARD ã€OUTPUTã€POSTROUTING ã€‚
NAT åŒ…æ‹¬ SNAT ï¼ˆæºåœ°å€è½¬æ¢ï¼‰å’Œ DNAT ï¼ˆç›®çš„åœ°å€è½¬æ¢ï¼‰ã€‚ä¸¤è€…çš„åŒºåˆ«åœ¨äºåšåœ°å€è½¬æ¢æ˜¯åœ¨è·¯ç”±å‰è¿˜æ˜¯è·¯ç”±åï¼ŒSNATå’ŒDNATæ€»æ˜¯æˆå¯¹å‡ºç°çš„ã€‚
å¯¹åº”çš„å«ä¹‰å¯ä»¥ç®€å•ç†è§£ä¸ºï¼š
   è¡¨å ç”¨é€” åŒ…å«çš„è§„åˆ™     è¡¨å ç”¨é€” åŒ…å«çš„è§„åˆ™   raw å…³é—­natè¡¨ä¸Šå¯ç”¨çš„è¿æ¥è¿½è¸ªæœºåˆ¶ PREROUTINGï¼ŒOUTPUT   mangle æ‹†è§£æŠ¥æ–‡ï¼Œåšå‡ºä¿®æ”¹ï¼Œå¹¶é‡æ–°å°è£…çš„åŠŸèƒ½ PREROUTINGï¼ŒINPUTï¼ŒFORWARDï¼ŒOUTPUTï¼ŒPOSTROUTING   nat ç½‘ç»œåœ°å€è½¬æ¢åŠŸèƒ½ PREROUTINGï¼ŒOUTPUTï¼ŒPOSTROUTINGï¼ˆcentos7ä¸­è¿˜æœ‰INPUTï¼Œcentos6ä¸­æ²¡æœ‰ï¼‰   filter è´Ÿè´£è¿‡æ»¤åŠŸèƒ½ï¼Œé˜²ç«å¢™ INPUTï¼ŒFORWARDï¼ŒOUTPUT    è§„åˆ™çš„æ„ä¹‰ï¼š
   è§„åˆ™ æ„ä¹‰     PREROUTING æŠ¥æ–‡åˆšåˆšåˆ°è¾¾ä¸»æœºï¼Œè¿˜æ²¡ç»è¿‡è·¯ç”±   INPUT æŠ¥æ–‡å·²ç»ç»è¿‡è·¯ç”±ï¼Œåˆ¤æ–­æ˜¯å‘é€ç»™æœ¬æœºçš„æŠ¥æ–‡   FORWARD æŠ¥æ–‡å·²ç»ç»è¿‡è·¯ç”±ï¼Œåˆ¤æ–­ä¸æ˜¯æœ¬æœºçš„æŠ¥æ–‡ï¼Œå¦‚æœå†…æ ¸å¼€å¯è½¬å‘åŠŸèƒ½åˆ™è½¬å‘å‡ºå»ï¼Œå¦åˆ™ä¸¢å¼ƒ   OUTPUT æŠ¥æ–‡ä»åº”ç”¨å‘å‡ºæŠ¥æ–‡å·²ç»ç»è¿‡è·¯ç”±   POSTROUTING æŠ¥æ–‡ä»åº”ç”¨å‘å‡ºå·²ç»ç»è¿‡è·¯ç”±ï¼Œå‡†å¤‡ä»ç½‘å¡å‘å‡º    æ•°æ®ä»ç½‘ç»œåˆ°è¾¾ä¸»æœºï¼Œå†ä»ä¸»æœºåˆ°è¾¾åº”ç”¨çš„è¿‡ç¨‹ï¼Œä»¥é›†ç¾¤ä¸­traefikéƒ¨ç½²çš„Ingressä¸ºä¾‹ï¼Œå¯ä»¥ç†è§£ä¸ºï¼š iptableç›¸å…³å‘½ä»¤ æŸ¥çœ‹iptablesè§„åˆ™ï¼š</description>
      <content>&lt;h2 id=&#34;iptableæ˜¯å•¥&#34;&gt;iptableæ˜¯å•¥&lt;/h2&gt;
&lt;p&gt;å‚è€ƒ&lt;a href=&#34;https://zh.wikipedia.org/wiki/Iptables&#34;&gt;ç»´åŸºç™¾ç§‘&lt;/a&gt;ï¼šiptablesæ˜¯è¿è¡Œåœ¨ç”¨æˆ·ç©ºé—´çš„åº”ç”¨è½¯ä»¶ï¼Œé€šè¿‡æ§åˆ¶Linuxå†…æ ¸netfilteræ¨¡å—ï¼Œæ¥ç®¡ç†ç½‘ç»œæ•°æ®åŒ…çš„å¤„ç†å’Œè½¬å‘ã€‚&lt;/p&gt;
&lt;h2 id=&#34;iptablesè§„åˆ™&#34;&gt;iptablesè§„åˆ™&lt;/h2&gt;
&lt;p&gt;iptablesä¸»è¦æœ‰rawã€mangleã€filterã€natè¿™å‡ ä¸ªè¡¨ï¼Œå¯¹åº”å‡ ä¸ªè§„åˆ™ï¼šPREROUTING ã€INPUT ã€FORWARD ã€OUTPUTã€POSTROUTING ã€‚&lt;/p&gt;
&lt;p&gt;NAT åŒ…æ‹¬ SNAT ï¼ˆæºåœ°å€è½¬æ¢ï¼‰å’Œ DNAT ï¼ˆç›®çš„åœ°å€è½¬æ¢ï¼‰ã€‚ä¸¤è€…çš„åŒºåˆ«åœ¨äºåšåœ°å€è½¬æ¢æ˜¯åœ¨è·¯ç”±å‰è¿˜æ˜¯è·¯ç”±åï¼ŒSNATå’ŒDNATæ€»æ˜¯æˆå¯¹å‡ºç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹åº”çš„å«ä¹‰å¯ä»¥ç®€å•ç†è§£ä¸ºï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¡¨å&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;ç”¨é€”&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;åŒ…å«çš„è§„åˆ™&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è¡¨å&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;ç”¨é€”&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;åŒ…å«çš„è§„åˆ™&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;raw&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å…³é—­natè¡¨ä¸Šå¯ç”¨çš„è¿æ¥è¿½è¸ªæœºåˆ¶&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;PREROUTINGï¼ŒOUTPUT&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;mangle&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ‹†è§£æŠ¥æ–‡ï¼Œåšå‡ºä¿®æ”¹ï¼Œå¹¶é‡æ–°å°è£…çš„åŠŸèƒ½&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;PREROUTINGï¼ŒINPUTï¼ŒFORWARDï¼ŒOUTPUTï¼ŒPOSTROUTING&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;nat&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;ç½‘ç»œåœ°å€è½¬æ¢åŠŸèƒ½&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;PREROUTINGï¼ŒOUTPUTï¼ŒPOSTROUTINGï¼ˆcentos7ä¸­è¿˜æœ‰INPUTï¼Œcentos6ä¸­æ²¡æœ‰ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;filter&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è´Ÿè´£è¿‡æ»¤åŠŸèƒ½ï¼Œé˜²ç«å¢™&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;INPUTï¼ŒFORWARDï¼ŒOUTPUT&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;è§„åˆ™çš„æ„ä¹‰ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è§„åˆ™&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;æ„ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;PREROUTING&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æŠ¥æ–‡åˆšåˆšåˆ°è¾¾ä¸»æœºï¼Œè¿˜æ²¡ç»è¿‡è·¯ç”±&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;INPUT&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æŠ¥æ–‡å·²ç»ç»è¿‡è·¯ç”±ï¼Œåˆ¤æ–­æ˜¯å‘é€ç»™æœ¬æœºçš„æŠ¥æ–‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;FORWARD&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æŠ¥æ–‡å·²ç»ç»è¿‡è·¯ç”±ï¼Œåˆ¤æ–­ä¸æ˜¯æœ¬æœºçš„æŠ¥æ–‡ï¼Œå¦‚æœå†…æ ¸å¼€å¯è½¬å‘åŠŸèƒ½åˆ™è½¬å‘å‡ºå»ï¼Œå¦åˆ™ä¸¢å¼ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;OUTPUT&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æŠ¥æ–‡ä»åº”ç”¨å‘å‡ºæŠ¥æ–‡å·²ç»ç»è¿‡è·¯ç”±&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;POSTROUTING&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æŠ¥æ–‡ä»åº”ç”¨å‘å‡ºå·²ç»ç»è¿‡è·¯ç”±ï¼Œå‡†å¤‡ä»ç½‘å¡å‘å‡º&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ•°æ®ä»ç½‘ç»œåˆ°è¾¾ä¸»æœºï¼Œå†ä»ä¸»æœºåˆ°è¾¾åº”ç”¨çš„è¿‡ç¨‹ï¼Œä»¥é›†ç¾¤ä¸­traefikéƒ¨ç½²çš„Ingressä¸ºä¾‹ï¼Œå¯ä»¥ç†è§£ä¸ºï¼š
&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/002T8chSgy1gr2r3bnr1bj60dd0b5my602.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;iptableç›¸å…³å‘½ä»¤&#34;&gt;iptableç›¸å…³å‘½ä»¤&lt;/h2&gt;
&lt;p&gt;æŸ¥çœ‹iptablesè§„åˆ™ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;iptables -L, --list &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;chain&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; åˆ—å‡ºé“¾ chain ä¸Šé¢çš„æ‰€æœ‰è§„åˆ™ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šé“¾ï¼Œåˆ—å‡ºè¡¨ä¸Šæ‰€æœ‰é“¾çš„æ‰€æœ‰è§„åˆ™
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‚è€ƒ&lt;a href=&#34;https://wangchujiang.com/linux-command/c/iptables.html&#34;&gt;https://wangchujiang.com/linux-command/c/iptables.html&lt;/a&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>K8sä¹‹calicoç½‘ç»œæ’ä»¶ä¸œè¥¿å—åŒ—æµé‡</title>
      <link>http://hindung.cn/posts/25/</link>
      <pubDate>Tue, 01 Jun 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/25/</guid>
      <description>å‰è¨€ ç¯å¢ƒé‡‡ç”¨äº†calicoï¼‹ebgp/ibgpï¼‹äº¤æ¢æœºç»„æˆäº†ä¸€ä¸ªæ‰å¹³åŒ–ç½‘ç»œï¼Œä½¿ç”¨calicoå®£å‘ŠPOD IPï¼Œåšåˆ°äº†PODä¸å…¶ä»–è™šæ‹Ÿæœºå’Œå¼€å‘ç½‘è½å¤„åœ¨åŒä¸€ä¸ªå¹³é¢çš„æ•ˆæœã€‚
å…·ä½“ç»„ç½‘ä¿¡æ¯å¯ä»¥å‚è€ƒcalicoç½‘ç«™ã€‚
ä¸œè¥¿æµé‡ Podåˆ°Serviceæµé‡ ä¸€èˆ¬çš„åº”ç”¨å¤§å¤šæ•°æ˜¯ä»¥Podåˆ°Serviceçš„å½¢å¼å»è¯·æ±‚æœåŠ¡ï¼Œä»è€Œå‡ºç°ä¸œè¥¿æ–¹å‘çš„æµé‡ï¼Œç›®å‰é›†ç¾¤çš„ç½‘ç»œé‡‡ç”¨Calicoä½œä¸ºç½‘ç»œæ’ä»¶ï¼ŒPODçš„IPç”±Calicoè¿›è¡Œç»Ÿä¸€åˆ†é…ï¼ŒService IPç”±é›†ç¾¤K8såˆ†é…ï¼Œå¹¶ä¸”é…åˆKube-proxyæ“ä½œIptableåˆ›å»ºå¯¹åº”çš„è§„åˆ™ã€‚
é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªPODæ—¶ï¼Œcalicoä¼šåŒæ—¶åœ¨PODå¯¹åº”çš„ä¸»æœºç”Ÿæˆå¯¹åº”çš„calicoç½‘æ¡¥calixxxï¼Œå¹¶ä¸”åˆ†é…IPï¼Œå¹¶ä¸”é€šè¿‡calicoç»„ä»¶è·¯ç”±å®£å‘Šå‡ºå»ï¼š
å‘é€åˆ°calixxxçš„æµé‡ä¼šè½¬å‘è‡³PODçš„eth0ç½‘å¡ï¼Œè€Œä»PODå‘å‡ºæ¥çš„æŠ¥æ–‡åˆ™æ˜¯é€šè¿‡ARP ä»£ç†çš„æ–¹å¼è½¬å‘è‡³calixxxç½‘æ¡¥ã€‚
è€Œå½“ä¸€ä¸ªServiceåˆ›å»ºä¹‹åï¼Œä¼šæ ¹æ®é€‰æ‹©å™¨ä¸PODæ ‡ç­¾é…å¯¹ï¼Œå¯¹åº”ä¸ŠPOD IPå¹¶ä¸”è¢«Kube-Proxyç›‘æ§åˆ°ï¼ŒK8sä¼šéšå³ç”Ÿæˆå¯¹åº”çš„DNSè®°å½•service.namespace.local.cluster:serviceclusterIPï¼Œç„¶ååœ¨Iptablesæ·»åŠ ç›¸åº”çš„è§„åˆ™è®°å½•ï¼Œå¦‚(10.88.145.173ä¸ºServiceIPï¼Œ10.90.1.127ä¸ºPOD IP)ï¼š
ä¸€èˆ¬çš„ï¼Œåœ¨é›†ç¾¤ä¸­ä»PODè®¿é—®Serviceï¼Œå†ä»Serviceåˆ°è¾¾å¯¹åº”çš„PODæµç¨‹ä¸ºï¼ˆæ­£å‘è¯·æ±‚ç”¨â‘ è¡¨ç¤ºï¼Œå›å¤æŠ¥æ–‡ç”¨(1)è¡¨ç¤ºï¼‰ï¼š
ä¸‹é¢æ¢³ç†ä¸€ä¸‹è¯·æ±‚çš„ä¸»è¦è¿‡ç¨‹ï¼š
 â‘ PODå‘domianå‘é€è¯·æ±‚ â‘¡ç”±äºæ²¡æœ‰IPï¼ŒPODå…ˆå‘CoreDNSæŸ¥è¯¢åŸŸåå¯¹åº”çš„IPåœ°å€ â‘¢CoreDNSè¿”å›å¯¹åº”çš„Service IP â‘£PODæ‹¿åˆ°IPä¹‹åï¼Œå‘è¯¥IPå‘é€æ•°æ®ï¼Œå¯¹åº”çš„æŠ¥æ–‡ä»calixxxç½‘æ¡¥å‡ºæ¥ â‘¤ä»calixxxç½‘æ¡¥å‡ºæ¥åï¼Œè¿›å…¥Host Iptablesé“¾ï¼Œè¿›å…¥IP tablesä¹‹åï¼Œè¿›å…¥å¯¹åº”çš„é“¾è·¯å¦‚ä¸Šå›¾è§„åˆ™ï¼Œæœ€åå¾—åˆ°Serviceå¯¹åº”çš„POD IPï¼Œå¹¶è½¬å‘åˆ°æ­¤IPï¼Œæ­¤æ—¶ä¼šç»è¿‡è·¯ç”±ï¼Œåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œç›®æ ‡IPåœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼ˆè·¯ç”±è¡¨æœ‰è®°å½•ï¼‰æˆ–è€…ä¸åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼ˆè·¯ç”±è¡¨æ— è®°å½•ï¼‰ â‘¥å¦‚æœåœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼Œæ ¹æ®è·¯ç”±è¡¨åˆ™ä¼šè·¯ç”±åˆ°ç›®æ ‡IPå¯¹åº”çš„calixxxç½‘æ¡¥ â‘¦å¦‚æœä¸åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼Œåˆ™æ ¹æ®è·¯ç”±è¡¨è§„åˆ™ï¼Œä¼šä»bond1å£å‡ºå» â‘§åˆ°è¾¾äº¤æ¢æœºï¼Œäº¤æ¢æœºæœ‰å¯¹åº”çš„è·¯ç”±æ¡ç›®ï¼Œåˆ™ä¼šèµ°åˆ°ï¼ˆ3ï¼‰å’Œï¼ˆ4ï¼‰è¿‡ç¨‹è¿›å…¥Hostï¼Œå¹¶ä¸”èµ°åˆ°Iptablesï¼Œé€šè¿‡è·¯ç”±ï¼Œè½¬åˆ°â‘¥è¿‡ç¨‹ â‘¨åˆ°è¾¾calixxxç½‘æ¡¥ä¹‹åä¼šè½¬å‘è‡³POD eth0ç½‘å¡ï¼Œåˆ°è¾¾POD  åº”ç­”è¿‡ç¨‹ï¼š
 (1)PODä»¥ä¼ è¿‡æ¥çš„æºPOD IPä½œä¸ºç›®çš„IPä»eth0å‘å‡ºï¼Œé€šè¿‡ARPä»£ç†è½¬å‘åˆ°calixxxç½‘æ¡¥ (2)è¾¾åˆ°calixxxç½‘æ¡¥ä¹‹åä¼šç»è¿‡PODæ‰€åœ¨çš„èŠ‚ç‚¹çš„Hostè·¯ç”±è¡¨ï¼ŒåŒæ ·åˆ†ä¸ºä¸¤ç§æƒ…å†µ (3)å¦‚æœä¸åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼Œåˆ™ä¼šèµ°bond1åˆ°äº¤æ¢æœº (4)å†ä»äº¤æ¢æœºåˆ°è¾¾å¯¹åº”çš„èŠ‚ç‚¹ï¼Œä¹‹åä¾¿åˆ°è¾¾è¿‡ç¨‹ï¼ˆ5ï¼‰ (5)ç»è¿‡è·¯ç”±è¡¨ï¼Œåˆ°è¾¾ç›®çš„IP å¯¹åº”calixxxç½‘æ¡¥ (6)å†ä»ç½‘æ¡¥åˆ°è¾¾POD eth0  Podåˆ°Podæµé‡ ç”±äºç½‘ç»œå¹³é¢åŒ–ï¼ŒPOD IPå¯ä»¥ç›´é€šï¼Œæ‰€ä»¥ä¼šå­˜åœ¨PODç›¸äº’è®¿é—®çš„åœºæ™¯ï¼Œå¦‚éšç§å·åº”ç”¨ç­‰ï¼š
ä¸»è¦è¿‡ç¨‹ï¼š
 â‘ PODä»¥ç›®æ ‡PODçš„IPä½œä¸ºç›®çš„IPï¼Œä»eth0å‘å‡ºï¼Œåˆ°è¾¾calixxx â‘¡åˆ°è¾¾calixxxç½‘æ¡¥ä¹‹åä¼šè¿›å…¥Hostå†…æ ¸Iptablesé“¾åˆ°è¾¾PREROUTINGï¼ˆè·¯ç”±å‰ï¼‰ â‘¢ä¹‹åè¿›å…¥è·¯ç”±æ¨¡å—è¿›è¡Œè·¯ç”±ï¼Œè·¯ç”±åˆ¤æ–­è¯¥æŠ¥æ–‡æ˜¯å¦æ˜¯å‘ç»™æœ¬æœºçš„ï¼Œå¦‚æœæ˜¯åˆ™å¾€ä¸Šæ”¶å°†è¿›å…¥INPUTé“¾ï¼Œæ­¤è¿‡ç¨‹ä¸åœ¨è®¨è®ºèŒƒå›´ï¼Œç”±äºæŠ¥æ–‡ç›®çš„åœ°å€æ˜¯POD IPï¼Œæ‰€ä»¥ä¼šè½¬å‘å‡ºå» â‘£åˆ°è¾¾FORWARDé“¾åè¿›å…¥POSTROUTINGï¼ˆè·¯ç”±åï¼‰ â‘¤è¿›å…¥POSTROUTINGä¼šè¿›è¡Œä¸€äº›åœ°å€è½¬æ¢ç­‰æ“ä½œåå‘å¾€å¯¹åº”ç½‘å¡æˆ–è€…ç½‘æ¡¥ï¼Œå¦‚æœè·¯ç”±ç»“æœè¡¨æ˜è¯¥æŠ¥æ–‡è¦é€šè¿‡ç½‘å¡Bond1å‡ºå»åˆ™ä¼šèµ°åˆ°â‘§è¿‡ç¨‹ï¼Œå¦åˆ™ä¼šèµ°åˆ°â‘¥ â‘¥è¡¨æ˜ç›®çš„IPåœ¨æœ¬æœºç½‘æ¡¥ä¸Šï¼ˆå³PODåœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼‰ï¼Œåˆ™è¿›å…¥ç›®çš„åœ°å€å¯¹åº”çš„calixxxç½‘æ¡¥ â‘¦å†è½¬å‘è‡³POD eth0ç½‘å¡åˆ°è¾¾ç›®çš„åœ° â‘§æŠ¥æ–‡ä»å†…æ ¸å‡ºæ¥è¿›å…¥ç½‘å¡ï¼Œå‡†å¤‡å‘å¤–å‘å‡º â‘¨åˆ°è¾¾äº¤æ¢æœºï¼Œç”±äºäº¤æ¢æœºæœ‰æ‰€æœ‰PODçš„è·¯ç”±ä¿¡æ¯ï¼Œæ‰€ä»¥ä»–èƒ½æ­£ç¡®å¤„ç†ç»è¿‡çš„æŠ¥æ–‡ â‘©ç»è¿‡è·¯ç”±ååˆ°è¾¾PODæ‰€åœ¨èŠ‚ç‚¹çš„å…¥å£ç½‘å¡Bond1 11.åˆ°è¾¾ç½‘å¡ä¹‹åä¼šè¿›å…¥å†…æ ¸Linuxåè®®æ ˆè¿›è¡ŒIptablesè§„åˆ™é“¾åŒ¹é…ï¼ˆå¯èƒ½çš„è·¯å¾„ä¸ºåˆ°â‘¢-&amp;gt;â‘£-&amp;gt;â‘¤-&amp;gt;â‘¥-&amp;gt;â‘¦åˆ°è¾¾å¯¹åº”çš„PODï¼‰  å›å¤è¿‡ç¨‹ï¼š
 (1)åˆ°è¾¾ç›®çš„PODä¹‹åï¼Œåº”ç”¨æ ¹æ®æºIPè¿›è¡Œå›åº”ï¼Œè½¬å‘è‡³calixxxç½‘æ¡¥ (2)åˆ°è¾¾ç½‘æ¡¥ä¹‹åè¿›å…¥Linuxåè®®æ ˆï¼Œå…¶è¿‡ç¨‹ä¼šä»â‘¢-&amp;gt;â‘£-&amp;gt;â‘¤-&amp;gt;ï¼ˆ3ï¼‰åˆ°è¾¾æºPOD (3)åˆ°è¾¾æºPODå¯¹åº”çš„ç½‘æ¡¥ (4)ä»ç½‘æ¡¥è½¬å‘è‡³POD eth0ç½‘å¡ï¼Œæ­¤æ—¶ä¼šç»è¿‡Linuxåè®®æ ˆï¼Œæœ€ç»ˆæŠ¥æ–‡ä»å†…æ ¸åˆ°ç”¨æˆ·ç©ºé—´é€åˆ°åº”ç”¨ã€‚  å—åŒ—æµé‡ å¤–éƒ¨æµé‡ä»Ingress(è¶Šè¿‡service)åˆ°Pod clientå®¢æˆ·ç«¯è¯·æ±‚PODåº”ç”¨ï¼Œé¦–å…ˆè¦åˆ›å»ºå¯¹åº”çš„Serviceï¼Œå¹¶ä¸”åˆ›å»ºIngressè·¯ç”±ã€‚é›†ç¾¤ä¸­é‡‡ç”¨Traefikä½œä¸ºIngres Controllerï¼Œä»¥DeamonSetçš„æ–¹å¼éƒ¨ç½²ï¼Œå¹¶ä¸”å¼€å¯hostNetworkæ¨¡å¼ï¼Œä¸ä¸»æœºå…¬ç”¨ç½‘ç»œåè®®æ ˆã€‚å¹¶ä¸”æ¥ç®¡æ‰€æœ‰åˆ°è¾¾ä¸»æœºçš„80ç«¯å£ã€8080ç«¯å£çš„æŠ¥æ–‡ã€‚Traefikçš„åŸç†ä¸»è¦æ˜¯é€šè¿‡ç›‘æ§APIserveræ¥ç›‘æ§Serviceã€PODçš„å˜åŒ–ï¼Œå¹¶ç»´æŠ¤è·¯ç”±ï¼Œè€Œä¸”æ¥ç®¡80ç«¯å£çš„æµé‡ï¼Œè½¬å‘åˆ°å¯¹åº”è·¯ç”±çš„POD IPä¸Šã€‚</description>
      <content>&lt;h1 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h1&gt;
&lt;p&gt;ç¯å¢ƒé‡‡ç”¨äº†calicoï¼‹ebgp/ibgpï¼‹äº¤æ¢æœºç»„æˆäº†ä¸€ä¸ªæ‰å¹³åŒ–ç½‘ç»œï¼Œä½¿ç”¨calicoå®£å‘ŠPOD IPï¼Œåšåˆ°äº†PODä¸å…¶ä»–è™šæ‹Ÿæœºå’Œå¼€å‘ç½‘è½å¤„åœ¨åŒä¸€ä¸ªå¹³é¢çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“ç»„ç½‘ä¿¡æ¯å¯ä»¥å‚è€ƒcalicoç½‘ç«™ã€‚&lt;/p&gt;
&lt;h1 id=&#34;ä¸œè¥¿æµé‡&#34;&gt;ä¸œè¥¿æµé‡&lt;/h1&gt;
&lt;h2 id=&#34;podåˆ°serviceæµé‡&#34;&gt;Podåˆ°Serviceæµé‡&lt;/h2&gt;
&lt;p&gt;ä¸€èˆ¬çš„åº”ç”¨å¤§å¤šæ•°æ˜¯ä»¥Podåˆ°Serviceçš„å½¢å¼å»è¯·æ±‚æœåŠ¡ï¼Œä»è€Œå‡ºç°ä¸œè¥¿æ–¹å‘çš„æµé‡ï¼Œç›®å‰é›†ç¾¤çš„ç½‘ç»œé‡‡ç”¨Calicoä½œä¸ºç½‘ç»œæ’ä»¶ï¼ŒPODçš„IPç”±Calicoè¿›è¡Œç»Ÿä¸€åˆ†é…ï¼ŒService IPç”±é›†ç¾¤K8såˆ†é…ï¼Œå¹¶ä¸”é…åˆKube-proxyæ“ä½œIptableåˆ›å»ºå¯¹åº”çš„è§„åˆ™ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªPODæ—¶ï¼Œcalicoä¼šåŒæ—¶åœ¨PODå¯¹åº”çš„ä¸»æœºç”Ÿæˆå¯¹åº”çš„calicoç½‘æ¡¥calixxxï¼Œå¹¶ä¸”åˆ†é…IPï¼Œå¹¶ä¸”é€šè¿‡calicoç»„ä»¶è·¯ç”±å®£å‘Šå‡ºå»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/image2020-6-3_19-46-50.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/image2020-6-3_19-46-5.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å‘é€åˆ°calixxxçš„æµé‡ä¼šè½¬å‘è‡³PODçš„eth0ç½‘å¡ï¼Œè€Œä»PODå‘å‡ºæ¥çš„æŠ¥æ–‡åˆ™æ˜¯é€šè¿‡ARP ä»£ç†çš„æ–¹å¼è½¬å‘è‡³calixxxç½‘æ¡¥ã€‚&lt;/p&gt;
&lt;p&gt;è€Œå½“ä¸€ä¸ªServiceåˆ›å»ºä¹‹åï¼Œä¼šæ ¹æ®é€‰æ‹©å™¨ä¸PODæ ‡ç­¾é…å¯¹ï¼Œå¯¹åº”ä¸ŠPOD IPå¹¶ä¸”è¢«Kube-Proxyç›‘æ§åˆ°ï¼ŒK8sä¼šéšå³ç”Ÿæˆå¯¹åº”çš„DNSè®°å½•service.namespace.local.cluster:serviceclusterIPï¼Œç„¶ååœ¨Iptablesæ·»åŠ ç›¸åº”çš„è§„åˆ™è®°å½•ï¼Œå¦‚(10.88.145.173ä¸ºServiceIPï¼Œ10.90.1.127ä¸ºPOD IP)ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/image2020-6-3_19-55-42.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬çš„ï¼Œåœ¨é›†ç¾¤ä¸­ä»PODè®¿é—®Serviceï¼Œå†ä»Serviceåˆ°è¾¾å¯¹åº”çš„PODæµç¨‹ä¸ºï¼ˆæ­£å‘è¯·æ±‚ç”¨â‘ è¡¨ç¤ºï¼Œå›å¤æŠ¥æ–‡ç”¨(1)è¡¨ç¤ºï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/%E4%B8%9C%E8%A5%BF-%E5%8D%97%E5%8C%97%E6%B5%81%E9%87%8F-%E7%AC%AC%203%20%E9%A1%B5.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ¢³ç†ä¸€ä¸‹è¯·æ±‚çš„ä¸»è¦è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;â‘ PODå‘domianå‘é€è¯·æ±‚&lt;/li&gt;
&lt;li&gt;â‘¡ç”±äºæ²¡æœ‰IPï¼ŒPODå…ˆå‘CoreDNSæŸ¥è¯¢åŸŸåå¯¹åº”çš„IPåœ°å€&lt;/li&gt;
&lt;li&gt;â‘¢CoreDNSè¿”å›å¯¹åº”çš„Service IP&lt;/li&gt;
&lt;li&gt;â‘£PODæ‹¿åˆ°IPä¹‹åï¼Œå‘è¯¥IPå‘é€æ•°æ®ï¼Œå¯¹åº”çš„æŠ¥æ–‡ä»calixxxç½‘æ¡¥å‡ºæ¥&lt;/li&gt;
&lt;li&gt;â‘¤ä»calixxxç½‘æ¡¥å‡ºæ¥åï¼Œè¿›å…¥Host Iptablesé“¾ï¼Œè¿›å…¥IP tablesä¹‹åï¼Œè¿›å…¥å¯¹åº”çš„é“¾è·¯å¦‚ä¸Šå›¾è§„åˆ™ï¼Œæœ€åå¾—åˆ°Serviceå¯¹åº”çš„POD IPï¼Œå¹¶è½¬å‘åˆ°æ­¤IPï¼Œæ­¤æ—¶ä¼šç»è¿‡è·¯ç”±ï¼Œåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œç›®æ ‡IPåœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼ˆè·¯ç”±è¡¨æœ‰è®°å½•ï¼‰æˆ–è€…ä¸åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼ˆè·¯ç”±è¡¨æ— è®°å½•ï¼‰&lt;/li&gt;
&lt;li&gt;â‘¥å¦‚æœåœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼Œæ ¹æ®è·¯ç”±è¡¨åˆ™ä¼šè·¯ç”±åˆ°ç›®æ ‡IPå¯¹åº”çš„calixxxç½‘æ¡¥&lt;/li&gt;
&lt;li&gt;â‘¦å¦‚æœä¸åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼Œåˆ™æ ¹æ®è·¯ç”±è¡¨è§„åˆ™ï¼Œä¼šä»bond1å£å‡ºå»&lt;/li&gt;
&lt;li&gt;â‘§åˆ°è¾¾äº¤æ¢æœºï¼Œäº¤æ¢æœºæœ‰å¯¹åº”çš„è·¯ç”±æ¡ç›®ï¼Œåˆ™ä¼šèµ°åˆ°ï¼ˆ3ï¼‰å’Œï¼ˆ4ï¼‰è¿‡ç¨‹è¿›å…¥Hostï¼Œå¹¶ä¸”èµ°åˆ°Iptablesï¼Œé€šè¿‡è·¯ç”±ï¼Œè½¬åˆ°â‘¥è¿‡ç¨‹&lt;/li&gt;
&lt;li&gt;â‘¨åˆ°è¾¾calixxxç½‘æ¡¥ä¹‹åä¼šè½¬å‘è‡³POD eth0ç½‘å¡ï¼Œåˆ°è¾¾POD&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åº”ç­”è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(1)PODä»¥ä¼ è¿‡æ¥çš„æºPOD IPä½œä¸ºç›®çš„IPä»eth0å‘å‡ºï¼Œé€šè¿‡ARPä»£ç†è½¬å‘åˆ°calixxxç½‘æ¡¥&lt;/li&gt;
&lt;li&gt;(2)è¾¾åˆ°calixxxç½‘æ¡¥ä¹‹åä¼šç»è¿‡PODæ‰€åœ¨çš„èŠ‚ç‚¹çš„Hostè·¯ç”±è¡¨ï¼ŒåŒæ ·åˆ†ä¸ºä¸¤ç§æƒ…å†µ&lt;/li&gt;
&lt;li&gt;(3)å¦‚æœä¸åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼Œåˆ™ä¼šèµ°bond1åˆ°äº¤æ¢æœº&lt;/li&gt;
&lt;li&gt;(4)å†ä»äº¤æ¢æœºåˆ°è¾¾å¯¹åº”çš„èŠ‚ç‚¹ï¼Œä¹‹åä¾¿åˆ°è¾¾è¿‡ç¨‹ï¼ˆ5ï¼‰&lt;/li&gt;
&lt;li&gt;(5)ç»è¿‡è·¯ç”±è¡¨ï¼Œåˆ°è¾¾ç›®çš„IP å¯¹åº”calixxxç½‘æ¡¥&lt;/li&gt;
&lt;li&gt;(6)å†ä»ç½‘æ¡¥åˆ°è¾¾POD eth0&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;podåˆ°podæµé‡&#34;&gt;Podåˆ°Podæµé‡&lt;/h2&gt;
&lt;p&gt;ç”±äºç½‘ç»œå¹³é¢åŒ–ï¼ŒPOD IPå¯ä»¥ç›´é€šï¼Œæ‰€ä»¥ä¼šå­˜åœ¨PODç›¸äº’è®¿é—®çš„åœºæ™¯ï¼Œå¦‚éšç§å·åº”ç”¨ç­‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/%E4%B8%9C%E8%A5%BF-%E5%8D%97%E5%8C%97%E6%B5%81%E9%87%8F-%E7%AC%AC%206%20%E9%A1%B5.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä¸»è¦è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;â‘ PODä»¥ç›®æ ‡PODçš„IPä½œä¸ºç›®çš„IPï¼Œä»eth0å‘å‡ºï¼Œåˆ°è¾¾calixxx&lt;/li&gt;
&lt;li&gt;â‘¡åˆ°è¾¾calixxxç½‘æ¡¥ä¹‹åä¼šè¿›å…¥Hostå†…æ ¸Iptablesé“¾åˆ°è¾¾PREROUTINGï¼ˆè·¯ç”±å‰ï¼‰&lt;/li&gt;
&lt;li&gt;â‘¢ä¹‹åè¿›å…¥è·¯ç”±æ¨¡å—è¿›è¡Œè·¯ç”±ï¼Œè·¯ç”±åˆ¤æ–­è¯¥æŠ¥æ–‡æ˜¯å¦æ˜¯å‘ç»™æœ¬æœºçš„ï¼Œå¦‚æœæ˜¯åˆ™å¾€ä¸Šæ”¶å°†è¿›å…¥INPUTé“¾ï¼Œæ­¤è¿‡ç¨‹ä¸åœ¨è®¨è®ºèŒƒå›´ï¼Œç”±äºæŠ¥æ–‡ç›®çš„åœ°å€æ˜¯POD IPï¼Œæ‰€ä»¥ä¼šè½¬å‘å‡ºå»&lt;/li&gt;
&lt;li&gt;â‘£åˆ°è¾¾FORWARDé“¾åè¿›å…¥POSTROUTINGï¼ˆè·¯ç”±åï¼‰&lt;/li&gt;
&lt;li&gt;â‘¤è¿›å…¥POSTROUTINGä¼šè¿›è¡Œä¸€äº›åœ°å€è½¬æ¢ç­‰æ“ä½œåå‘å¾€å¯¹åº”ç½‘å¡æˆ–è€…ç½‘æ¡¥ï¼Œå¦‚æœè·¯ç”±ç»“æœè¡¨æ˜è¯¥æŠ¥æ–‡è¦é€šè¿‡ç½‘å¡Bond1å‡ºå»åˆ™ä¼šèµ°åˆ°â‘§è¿‡ç¨‹ï¼Œå¦åˆ™ä¼šèµ°åˆ°â‘¥&lt;/li&gt;
&lt;li&gt;â‘¥è¡¨æ˜ç›®çš„IPåœ¨æœ¬æœºç½‘æ¡¥ä¸Šï¼ˆå³PODåœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼‰ï¼Œåˆ™è¿›å…¥ç›®çš„åœ°å€å¯¹åº”çš„calixxxç½‘æ¡¥&lt;/li&gt;
&lt;li&gt;â‘¦å†è½¬å‘è‡³POD eth0ç½‘å¡åˆ°è¾¾ç›®çš„åœ°&lt;/li&gt;
&lt;li&gt;â‘§æŠ¥æ–‡ä»å†…æ ¸å‡ºæ¥è¿›å…¥ç½‘å¡ï¼Œå‡†å¤‡å‘å¤–å‘å‡º&lt;/li&gt;
&lt;li&gt;â‘¨åˆ°è¾¾äº¤æ¢æœºï¼Œç”±äºäº¤æ¢æœºæœ‰æ‰€æœ‰PODçš„è·¯ç”±ä¿¡æ¯ï¼Œæ‰€ä»¥ä»–èƒ½æ­£ç¡®å¤„ç†ç»è¿‡çš„æŠ¥æ–‡&lt;/li&gt;
&lt;li&gt;â‘©ç»è¿‡è·¯ç”±ååˆ°è¾¾PODæ‰€åœ¨èŠ‚ç‚¹çš„å…¥å£ç½‘å¡Bond1&lt;/li&gt;
&lt;li&gt;11.åˆ°è¾¾ç½‘å¡ä¹‹åä¼šè¿›å…¥å†…æ ¸Linuxåè®®æ ˆè¿›è¡ŒIptablesè§„åˆ™é“¾åŒ¹é…ï¼ˆå¯èƒ½çš„è·¯å¾„ä¸ºåˆ°â‘¢-&amp;gt;â‘£-&amp;gt;â‘¤-&amp;gt;â‘¥-&amp;gt;â‘¦åˆ°è¾¾å¯¹åº”çš„PODï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å›å¤è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(1)åˆ°è¾¾ç›®çš„PODä¹‹åï¼Œåº”ç”¨æ ¹æ®æºIPè¿›è¡Œå›åº”ï¼Œè½¬å‘è‡³calixxxç½‘æ¡¥&lt;/li&gt;
&lt;li&gt;(2)åˆ°è¾¾ç½‘æ¡¥ä¹‹åè¿›å…¥Linuxåè®®æ ˆï¼Œå…¶è¿‡ç¨‹ä¼šä»â‘¢-&amp;gt;â‘£-&amp;gt;â‘¤-&amp;gt;ï¼ˆ3ï¼‰åˆ°è¾¾æºPOD&lt;/li&gt;
&lt;li&gt;(3)åˆ°è¾¾æºPODå¯¹åº”çš„ç½‘æ¡¥&lt;/li&gt;
&lt;li&gt;(4)ä»ç½‘æ¡¥è½¬å‘è‡³POD eth0ç½‘å¡ï¼Œæ­¤æ—¶ä¼šç»è¿‡Linuxåè®®æ ˆï¼Œæœ€ç»ˆæŠ¥æ–‡ä»å†…æ ¸åˆ°ç”¨æˆ·ç©ºé—´é€åˆ°åº”ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;å—åŒ—æµé‡&#34;&gt;å—åŒ—æµé‡&lt;/h1&gt;
&lt;h2 id=&#34;å¤–éƒ¨æµé‡ä»ingressè¶Šè¿‡serviceåˆ°pod&#34;&gt;å¤–éƒ¨æµé‡ä»Ingress(è¶Šè¿‡service)åˆ°Pod&lt;/h2&gt;
&lt;p&gt;clientå®¢æˆ·ç«¯è¯·æ±‚PODåº”ç”¨ï¼Œé¦–å…ˆè¦åˆ›å»ºå¯¹åº”çš„Serviceï¼Œå¹¶ä¸”åˆ›å»ºIngressè·¯ç”±ã€‚é›†ç¾¤ä¸­é‡‡ç”¨Traefikä½œä¸ºIngres Controllerï¼Œä»¥DeamonSetçš„æ–¹å¼éƒ¨ç½²ï¼Œå¹¶ä¸”å¼€å¯hostNetworkæ¨¡å¼ï¼Œä¸ä¸»æœºå…¬ç”¨ç½‘ç»œåè®®æ ˆã€‚å¹¶ä¸”æ¥ç®¡æ‰€æœ‰åˆ°è¾¾ä¸»æœºçš„80ç«¯å£ã€8080ç«¯å£çš„æŠ¥æ–‡ã€‚Traefikçš„åŸç†ä¸»è¦æ˜¯é€šè¿‡ç›‘æ§APIserveræ¥ç›‘æ§Serviceã€PODçš„å˜åŒ–ï¼Œå¹¶ç»´æŠ¤è·¯ç”±ï¼Œè€Œä¸”æ¥ç®¡80ç«¯å£çš„æµé‡ï¼Œè½¬å‘åˆ°å¯¹åº”è·¯ç”±çš„POD IPä¸Šã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“è¿‡ç¨‹ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/%E4%B8%9C%E8%A5%BF-%E5%8D%97%E5%8C%97%E6%B5%81%E9%87%8F-%E7%AC%AC%204%20%E9%A1%B5%20.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ç®€å•è§£é‡Šä¸€ä¸‹è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;â‘ ï¼ˆå®¢æˆ·ç«¯é¦–å…ˆå‘DNSæœåŠ¡å™¨è·å–åŸŸåå¯¹åº”çš„IPï¼‰å‘ç›®æ ‡IPå‘é€è¯·æ±‚ï¼Œåˆ°è¾¾äº¤æ¢æœº&lt;/li&gt;
&lt;li&gt;â‘¡ç»è¿‡è·¯ç”±ä¹‹åå®šå‘åˆ°ç›®æ ‡IPæ‰€åœ¨çš„ä¸»æœºï¼Œç”±äºè®¾ç½®äº†HA-proxyï¼Œè¯·æ±‚ä¼šå…ˆåˆ°VIPå¯¹åº”çš„ç½‘å¡bond1:1&lt;/li&gt;
&lt;li&gt;â‘¢ä»å¤–è”å£è¿›æ¥ä¹‹åè¿›å…¥å†…æ ¸ç¨‹åºå¤„ç†&lt;/li&gt;
&lt;li&gt;â‘£åˆ°è¾¾è·¯ç”±æ¨¡å—ï¼Œåˆ¤æ–­æŠ¥æ–‡æ˜¯å‘é€ç»™æœ¬æœºçš„ï¼Œåˆ™å¾€ä¸Šæ”¶&lt;/li&gt;
&lt;li&gt;â‘¤åˆ°è¾¾INPUTé“¾ï¼Œä¹‹åä¼šæ ¹æ®ç«¯å£å·ï¼Œå‘è‡³å¯¹åº”çš„åº”ç”¨ç¨‹åºï¼Œç”±äºæ˜¯HA-proxyæä¾›çš„ä»£ç†ï¼Œä»è€Œè¿›å…¥HAç¨‹åºï¼Œç¨‹åºä»£ç†åˆ°Hots3 IPä¸Šï¼Œæ‰€ä»¥ä»POSTROUTINGå‡ºæ¥ä¹‹åä¼šåˆ°è¾¾(15)è¿‡ç¨‹ï¼Œåœ¨åˆ°è¾¾â‘¤ï¼Œå¾€ä¸Šåˆ°è¾¾Traefikç¨‹åº&lt;/li&gt;
&lt;li&gt;â‘¥Traefikæ¥ç®¡80ç«¯å£çš„æµé‡ï¼Œè¿›è¡Œè·¯ç”±åŒ¹é…ä¹‹åï¼ˆæ‹¿åˆ°è¯·æ±‚å¯¹åº”çš„POD IPï¼‰ï¼Œä»£ç†è‡³POD IP&lt;/li&gt;
&lt;li&gt;â‘¦è¿›å…¥è·¯ç”±&lt;/li&gt;
&lt;li&gt;â‘§è¿›å…¥OUTPUTé“¾&lt;/li&gt;
&lt;li&gt;â‘¨è¿›å…¥POSTROUTINGï¼Œé€šè¿‡è·¯ç”±ä¹‹åï¼Œå¦‚æœç›®çš„IPåœ°å€ä½äºåŒä¸€èŠ‚ç‚¹ï¼Œåˆ™ä¼šè·¯ç”±åˆ°calixxxç½‘æ¡¥ï¼Œå¦åˆ™ä¼šèµ°åˆ°(12)è¿‡ç¨‹ï¼Œåˆ°è¾¾äº¤æ¢æœºè·¯ç”±ä¹‹åè¾¾åˆ°å¯¹åº”ä¸»æœºä¸Š(12-&amp;gt;13-&amp;gt;14-&amp;gt;15-&amp;gt;â‘£-&amp;gt;FORWARD-&amp;gt;â‘¨-&amp;gt;â‘©)&lt;/li&gt;
&lt;li&gt;â‘©åˆ°è¾¾calixxxç½‘æ¡¥ï¼Œç„¶ååˆ°è¾¾POD eth0ç½‘å¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å›å¤è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(1)åˆ°è¾¾calixxxç½‘æ¡¥&lt;/li&gt;
&lt;li&gt;(2)è¿›å…¥ä¸»æœºç½‘ç»œæ ˆï¼Œè¿”å›Traefikä»£ç†ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/image2020-6-5_12-31-50.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä¹‹åä»Traefikå³ä¸»æœºç½‘ç»œæ ˆå‡ºæ¥åˆ°è¾¾å¤–è”å£&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(3)ä»å¤–è”å£å‡ºæ¥ï¼ˆSNATï¼‰ï¼Œåˆ°è¾¾äº¤æ¢æœº&lt;/li&gt;
&lt;li&gt;(4)åˆ°è¾¾å®¢æˆ·ç«¯ï¼ˆDNATï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¤–éƒ¨æµé‡ç›´æ¥åˆ°pod&#34;&gt;å¤–éƒ¨æµé‡ç›´æ¥åˆ°Pod&lt;/h2&gt;
&lt;p&gt;ç”±äºPOD IPç›´æ¥é€šè¿‡calico BGPè·¯ç”±å®£å‘Šå‡ºå»ï¼Œå› æ­¤PODç½‘æ®µä¸è™šæœºã€æœ¬åœ°ç”µè„‘å¤„åœ¨åŒä¸€å¹³é¢ï¼Œè¯·æ±‚POD IPä¸è¯·æ±‚è™šæ‹Ÿæœºæƒ…å†µä¸€è‡´ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/%E4%B8%9C%E8%A5%BF-%E5%8D%97%E5%8C%97%E6%B5%81%E9%87%8F-%E7%AC%AC%205%20%E9%A1%B5.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å…·ä½“æµç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;â‘ å®¢æˆ·ç«¯è¯·æ±‚åˆ°è¾¾äº¤æ¢æœº&lt;/li&gt;
&lt;li&gt;â‘¡äº¤æ¢æœºè·¯ç”±åˆ°ç›®çš„åœ°å€å¯¹åº”çš„ä¸»æœºä¸Š&lt;/li&gt;
&lt;li&gt;â‘¢è¿›å…¥ä¸»æœºç½‘ç»œæ ˆè¿›è¡Œè·¯ç”±ï¼ˆç®€ç”»ï¼‰&lt;/li&gt;
&lt;li&gt;â‘£å¯èƒ½ä¼šç»è¿‡æ­¤è¿‡ç¨‹ï¼ˆå°±æ˜¯ç›®æ ‡PODä¸åœ¨è¯¥èŠ‚ç‚¹ä¸Šï¼‰&lt;/li&gt;
&lt;li&gt;â‘¤é‡æ–°åˆ°è¾¾äº¤æ¢æœº&lt;/li&gt;
&lt;li&gt;â‘¥å†æ¬¡è·¯ç”±åˆ°è¾¾ç›®æ ‡èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;â‘¦è¿›å…¥ä¸»æœºç½‘ç»œæ ˆ&lt;/li&gt;
&lt;li&gt;â‘§è·¯ç”±åˆ°calixxxç½‘æ¡¥&lt;/li&gt;
&lt;li&gt;â‘¨åˆ°è¾¾POD eth0ç½‘å¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å›å¤è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(1)å‘é€è‡³calixxxç½‘æ¡¥&lt;/li&gt;
&lt;li&gt;(2)è¿›å…¥åˆ°ä¸»æœºç½‘ç»œæ ˆï¼Œè¿›è¡Œè·¯ç”±&lt;/li&gt;
&lt;li&gt;(3)å‘é€è‡³å¤–è”å£bond1&lt;/li&gt;
&lt;li&gt;(4)åˆ°è¾¾äº¤æ¢æœºï¼Œè·¯ç”±&lt;/li&gt;
&lt;li&gt;(5)åˆ°è¾¾å®¢æˆ·ç«¯ï¼ˆå¯èƒ½ä¼šç»è¿‡NATï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¤–éƒ¨æµé‡ç›´æ¥è®¿é—®serviceipç‰¹æ€§&#34;&gt;å¤–éƒ¨æµé‡ç›´æ¥è®¿é—®ServiceIPï¼ˆç‰¹æ€§ï¼‰&lt;/h2&gt;
&lt;p&gt;å°†Service IPé€šè¿‡calico BGPåè®®è·¯ç”±å®£å‘Šå‡ºå»ï¼Œä»è€Œå®ç°äº†Service IPå¯ä»¥ç›´é€šçš„åœºæ™¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/%E4%B8%9C%E8%A5%BF-%E5%8D%97%E5%8C%97%E6%B5%81%E9%87%8F-%E7%AC%AC%207%20%E9%A1%B5.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å…·ä½“æµç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;â‘ è¢«è·¯ç”±å®£å‘Šçš„ServiceIPä¼šå‡ºç°åœ¨äº¤æ¢æœºè·¯ç”±è¡¨æ¡ç›®ä¸Šï¼Œè¯·æ±‚åˆ°è¾¾äº¤æ¢æœº&lt;/li&gt;
&lt;li&gt;â‘¡äº¤æ¢æœºè¿›è¡Œè·¯ç”±ï¼Œåˆ°è¾¾ç›®çš„IPæ‰€åœ¨çš„å¯¹åº”èŠ‚ç‚¹ï¼ˆè¿›ç¾¤å†…ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ï¼‰&lt;/li&gt;
&lt;li&gt;â‘¢ä»ç½‘å¡æ¥æ”¶æŠ¥æ–‡ï¼Œç»è¿‡ç½‘ç»œæ ˆè·¯ç”±åˆ°è¾¾calixxxç½‘æ¡¥ï¼ˆä¸è®¿é—®serviceè¿‡ç¨‹ä¸€è‡³ï¼‰&lt;/li&gt;
&lt;li&gt;â‘£è¿›å…¥calixxxç½‘æ¡¥&lt;/li&gt;
&lt;li&gt;â‘¤è¿›å…¥eth0&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å›å¤è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(1)ä»åº”ç”¨å‘å‡ºåˆ°è¾¾calixxx&lt;/li&gt;
&lt;li&gt;(2)åˆ°è¾¾ä¸»æœºç½‘ç»œæ ˆ&lt;/li&gt;
&lt;li&gt;(3)åˆ°è¾¾å¤–è”å£ç½‘å¡&lt;/li&gt;
&lt;li&gt;(4)åˆ°è¾¾äº¤æ¢æœº&lt;/li&gt;
&lt;li&gt;(5)åˆ°è¾¾å®¢æˆ·ç«¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h1&gt;
&lt;p&gt;é›†ç¾¤ç›®å‰é‡‡ç”¨Iptableséƒ¨ç½²æ–¹å¼ï¼Œä¾èµ–Iptablesè§„åˆ™ã€‚å¦‚æœé›†ç¾¤Serviceè¿‡å¤šä¼šå¯¼è‡´ç»å¸¸å¯¹Iptablesé¢‘ç¹æ“ä½œï¼Œå¹¶ä¸”å¦‚æœè¡¨å˜å¾—å¾ˆå¤§ï¼Œæ›´æ–°è¡¨å°±ä¼šå˜å¾—å›°éš¾ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤Iptablesè¿™å—å°†æ¥å¯èƒ½ä¼šé‡åˆ°ç“¶é¢ˆã€‚&lt;/p&gt;
&lt;p&gt;calicoç½‘æ¡¥ä¸å®¹å™¨ç½‘æ¡¥è¿™æ®µæ˜ å°„çš„å…·ä½“å®ç°æ˜¯æ€æ ·ï¼ŒåŒ…æ‹¬æ€§èƒ½å¦‚ä½•ç­‰è¿˜æ²¡æœ‰æ·±å…¥äº†è§£ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.projectcalico.org/reference/architecture/design/l2-interconnect-fabric&#34;&gt;l2-interconnect-fabric&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://qiankunli.github.io/2018/02/04/calico.html&#34;&gt;calicoå­¦ä¹ &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.lijiaocn.com/%E9%A1%B9%E7%9B%AE/2017/04/11/calico-usage.html#calico&#34;&gt;Calicoç½‘ç»œçš„åŸç†ã€ç»„ç½‘æ–¹å¼ä¸ä½¿ç”¨&lt;/a&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>Kubectlå‘½ä»¤è¡Œ</title>
      <link>http://hindung.cn/posts/24/</link>
      <pubDate>Tue, 01 Jun 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/24/</guid>
      <description>æ³¨ï¼šåŸºäºKubenetes ç‰ˆæœ¬ï¼šServer v1.17.2ã€Client v1.17.9
kubectlå‘½ä»¤è¡Œå…¨æ™¯å›¾ kubectlğŸ”—
æœ‰è¶£çš„kubectlå‘½ä»¤ è·å–æ­£åœ¨Runningçš„Pod kubectl get pods -A --field-selector=status.phase==Running NAMESPACE NAME READY STATUS RESTARTS AGE kelu cka2-75dbf7c54-gm4r4 1/1 Running 0 23h kube-system calico-kube-controllers-ccf66db4-cpvqp 1/1 Running 0 3d20h kube-system calico-node-8d4th 1/1 Running 0 3d2h kube-system calico-node-szmzb 1/1 Running 0 3d20h æŸ¥çœ‹èŠ‚ç‚¹å†…å­˜å®¹é‡ kubectl get no -o json | jq -r &amp;#39;.items | sort_by(.status.capacity.memory)[]|[.metadata.name,.status.capacity.memory]| @tsv&amp;#39; rq-bjptest01 3848040Ki rqinterntest2 7986060Ki æŸ¥çœ‹å„ä¸ªèŠ‚ç‚¹ä¸Šçš„Podæ•°é‡ kubectl get po -o json --all-namespaces | jq &amp;#39;.items | group_by(.</description>
      <content>&lt;p&gt;&lt;em&gt;æ³¨ï¼šåŸºäºKubenetes ç‰ˆæœ¬ï¼šServer v1.17.2ã€Client v1.17.9&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&#34;kubectlå‘½ä»¤è¡Œå…¨æ™¯å›¾&#34;&gt;kubectlå‘½ä»¤è¡Œå…¨æ™¯å›¾&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/kubectl.png&#34;&gt;kubectlğŸ”—&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;æœ‰è¶£çš„kubectlå‘½ä»¤&#34;&gt;æœ‰è¶£çš„kubectlå‘½ä»¤&lt;/h2&gt;
&lt;h3 id=&#34;è·å–æ­£åœ¨runningçš„pod&#34;&gt;è·å–æ­£åœ¨Runningçš„Pod&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl get pods -A --field-selector&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;status.phase&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;Running
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;NAMESPACE     NAME                                     READY   STATUS    RESTARTS   AGE
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kelu          cka2-75dbf7c54-gm4r4                     1/1     Running   &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;          23h
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kube-system   calico-kube-controllers-ccf66db4-cpvqp   1/1     Running   &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;          3d20h
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kube-system   calico-node-8d4th                        1/1     Running   &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;          3d2h
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kube-system   calico-node-szmzb                        1/1     Running   &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;          3d20h
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æŸ¥çœ‹èŠ‚ç‚¹å†…å­˜å®¹é‡&#34;&gt;æŸ¥çœ‹èŠ‚ç‚¹å†…å­˜å®¹é‡&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl get no -o json |    jq -r &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;.items | sort_by(.status.capacity.memory)[]|[.metadata.name,.status.capacity.memory]| @tsv&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rq-bjptest01    3848040Ki
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rqinterntest2   7986060Ki
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æŸ¥çœ‹å„ä¸ªèŠ‚ç‚¹ä¸Šçš„podæ•°é‡&#34;&gt;æŸ¥çœ‹å„ä¸ªèŠ‚ç‚¹ä¸Šçš„Podæ•°é‡&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl get po -o json --all-namespaces |  jq &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;.items | group_by(.spec.nodeName) | map({&amp;#34;nodeName&amp;#34;: .[0].spec.nodeName, &amp;#34;count&amp;#34;: length}) | sort_by(.count)&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nodeName&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;rq-bjptest01&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;count&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nodeName&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;rqinterntest2&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;count&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl get pods --all-namespaces -o json | jq &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;.items[] | .spec.nodeName&amp;#39;&lt;/span&gt; -r | sort | uniq -c
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;17&lt;/span&gt; rqkubedev03
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;30&lt;/span&gt; rqkubedev04
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;23&lt;/span&gt; rqkubedev05
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æŸ¥çœ‹podä»¥åŠé•œåƒ&#34;&gt;æŸ¥çœ‹PODä»¥åŠé•œåƒ&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl get pods -o custom-columns&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;NAME:metadata.name,IMAGES:spec.containers[*].image&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;NAME                              IMAGES
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;details-v1-5974b67c8-gqz94        docker.io/istio/examples-bookinfo-details-v1:1.16.2,docker.io/istio/proxyv2:1.7.2
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;gitea-5bb577b964-w64gg            harbor.caih.local/gitea/gitea:1.10.1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;productpage-v1-64794f5db4-hw2fl   docker.io/istio/examples-bookinfo-productpage-v1:1.16.2,docker.io/istio/proxyv2:1.7.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æŸ¥çœ‹å„ä¸ªèŠ‚ç‚¹ä¸Šçš„pod&#34;&gt;æŸ¥çœ‹å„ä¸ªèŠ‚ç‚¹ä¸Šçš„POD&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl get pods --all-namespaces -o json | jq &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;.items | map({podName: .metadata.name, nodeName: .spec.nodeName}) | group_by(.nodeName) | map({nodeName: .[0].nodeName, pods: map(.podName)})&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nodeName&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;rqkubedev03&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pods&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;123-84654b5d8f-sm2dt&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;reviews-v2-6cb6ccd848-ndsqq&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fleet-agent-6cc4bd5c67-b877w&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jaeger-es-index-cleaner-1602806100-5ngzz&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jaeger-es-index-cleaner-1602806100-b47gk&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jaeger-es-index-cleaner-1602806100-kkx2z&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jaeger-es-index-cleaner-1602806100-rg6z8&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jaeger-es-index-cleaner-1602806100-s47n4&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æŸ¥çœ‹podå ç”¨çš„å†…å­˜å’Œcpuå¹¶æŒ‰å†…å­˜æˆ–è€…cpuæ’åº&#34;&gt;æŸ¥çœ‹Podå ç”¨çš„å†…å­˜å’ŒCPUå¹¶æŒ‰å†…å­˜æˆ–è€…CPUæ’åº&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å†…å­˜&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl top pods -A | sort --reverse --key &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt; --numeric
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;caihcloud              jenkinsm-6fc5d7fc46-2tl6q                            29m          1995Mi
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;istio-system           prometheus-788c945c9c-mdrjf                          97m          1424Mi
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kube-system            kube-apiserver-rqkubedev04                           149m         957Mi
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kube-system            kube-apiserver-rqkubedev03                           69m          476Mi
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;caihcloud              jenkinsslaveswarm-6c6f5d8d9b-8ns5w                   2m           464Mi
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# CPU&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl top pods -A | sort --reverse --key &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; --numeric
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kube-system            kube-apiserver-rqkubedev04                           150m         964Mi
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;istio-system           prometheus-788c945c9c-mdrjf                          89m          1426Mi
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kube-system            kube-apiserver-rqkubedev03                           42m          532Mi
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kube-system            calico-node-6n65m                                    42m          46Mi
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kube-system            calico-node-fg6tk                                    34m          49Mi
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è·å–é‡å¯æ¬¡æ•°é™åºæ’åºçš„pod&#34;&gt;è·å–é‡å¯æ¬¡æ•°é™åºæ’åºçš„Pod&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl get pods -A --sort-by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;.status.containerStatuses&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;0&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;.restartCount | tac
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kube-system            kube-scheduler-rqkubedev03                           0/1     CrashLoopBackOff   &lt;span style=&#34;color:#ae81ff&#34;&gt;593&lt;/span&gt;        2d2h
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;traefik-v2             traefik-gfnw5                                        1/1     Running            &lt;span style=&#34;color:#ae81ff&#34;&gt;27&lt;/span&gt;         23d
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kube-system            kube-controller-manager-rqkubedev03                  1/1     Running            &lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;         23d
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kube-system            kube-controller-manager-rqkubedev04                  1/1     Running            &lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;         23d
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kube-system            kube-apiserver-rqkubedev03                           1/1     Running            &lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;         23d
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;NAMESPACE              NAME                                                 READY   STATUS             RESTARTS   AGE
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è·å¾—æ‰€æœ‰podçš„requestå’Œlimits&#34;&gt;è·å¾—æ‰€æœ‰PODçš„requestå’Œlimits&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl get pods -A  -o custom-columns&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;NAME:metadata.name,MEM_REQUEST:spec.containers[*].resources.requests.memory,MEM_LIMIT:spec.containers[*].resources.limits.memory,CPU_REQUEST:spec.containers[*].resources.requests.cpu,CPU_LIMIT:spec.containers[*].resources.limits.cpu&amp;#39;&lt;/span&gt;       
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;NAME                                                 MEM_REQUEST   MEM_LIMIT     CPU_REQUEST   CPU_LIMIT
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;123-84654b5d8f-sm2dt                                 &amp;lt;none&amp;gt;        &amp;lt;none&amp;gt;        &amp;lt;none&amp;gt;        &amp;lt;none&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;backend-c56f64647-grql6                              10Mi          1Gi           10m           &amp;lt;none&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;caihcloud-67ffdf9fc9-wzmts                           10Mi          1Gi           10m           &amp;lt;none&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;caihcloud-ui-9fbb954dc-trtn7                         10Mi          1Gi           10m           &amp;lt;none&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;caihcloudm-caihcloudm-api-5cfffcc96-mz6pt            10Mi          1Gi           10m           200m
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;caihcloudm-caihcloudm-api-5cfffcc96-xdwsb            10Mi          1Gi           10m           200m
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è·å–èŠ‚ç‚¹çš„ip&#34;&gt;è·å–èŠ‚ç‚¹çš„IP&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl get nodes -o jsonpath&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;{range .items[*]}{.metadata.name} {.status.addresses[?(@.type==&amp;#34;InternalIP&amp;#34;)].address}{&amp;#34;\n&amp;#34;}{end}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rqkubedev03 10.19.0.57
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rqkubedev04 10.19.0.58
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rqkubedev05 10.19.0.59
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è·å–serviceçš„nodeportä¿¡æ¯&#34;&gt;è·å–Serviceçš„Nodeportä¿¡æ¯&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl get -A svc -o json | jq -r &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;.items[] | [.metadata.name,([.spec.ports[].nodePort | tostring ] | join(&amp;#34;|&amp;#34;))]| @tsv&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;backend 23168|&lt;span style=&#34;color:#ae81ff&#34;&gt;20675&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;caihcloud       &lt;span style=&#34;color:#ae81ff&#34;&gt;37386&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;caihcloud-ui    &lt;span style=&#34;color:#ae81ff&#34;&gt;26105&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;caihcloudm-caihcloudm-api       &lt;span style=&#34;color:#ae81ff&#34;&gt;36236&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;caihcloudm-caihcloudm-prerender &lt;span style=&#34;color:#ae81ff&#34;&gt;31964&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è·å–podç½‘æ®µ&#34;&gt;è·å–PODç½‘æ®µ&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl get nodes -o jsonpath&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;{.items[*].spec.podCIDR}&amp;#39;&lt;/span&gt; | tr &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\n&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;10.193.0.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;10.193.1.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;10.193.2.0/24
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è¾“å‡ºä¸€ä¸ªpodä¸­æ‰€æœ‰çš„å®¹å™¨çš„æ—¥å¿—&#34;&gt;è¾“å‡ºä¸€ä¸ªPODä¸­æ‰€æœ‰çš„å®¹å™¨çš„æ—¥å¿—&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl logs caihcloudm-caihcloudm-api-5cfffcc96-mz6pt -n caihcloud â€”all-containers
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æŒ‰æ ‡ç­¾è¾“å‡ºpodçš„æ—¥å¿—&#34;&gt;æŒ‰æ ‡ç­¾è¾“å‡ºPODçš„æ—¥å¿—&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl -n caihcloud logs -f -l app&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;caihcloudm-caihcloudm-api
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è·å–å‰ä¸€ä¸ªå®¹å™¨çš„æ—¥å¿—å®¹å™¨å¼‚å¸¸æŒ‚æ‰çš„åœºæ™¯&#34;&gt;è·å–å‰ä¸€ä¸ªå®¹å™¨çš„æ—¥å¿—ï¼ˆå®¹å™¨å¼‚å¸¸æŒ‚æ‰çš„åœºæ™¯ï¼‰&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;kubectl logs caihcloud-67ffdf9fc9-wzmts -n caihcloud --previous
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content>
    </item>
    
    <item>
      <title>Kubernetesç»„ä»¶</title>
      <link>http://hindung.cn/posts/21/</link>
      <pubDate>Tue, 01 Jun 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/21/</guid>
      <description>æ€»ä½“æ¶æ„ Kubernetesç³»ç»Ÿé‡‡ç”¨C/Sæ¶æ„ï¼Œåˆ†ä¸ºMasterå’ŒNodeä¸¤ä¸ªéƒ¨åˆ†ï¼ŒMasterä½œä¸ºServerç«¯ï¼ŒNodeä½œä¸ºClientç«¯ã€‚
å¤šMasterçš„æ–¹å¼å¯ä»¥å®ç°é›†ç¾¤çš„é«˜å¯ç”¨ã€‚
Masterä¹Ÿå«åšä¸»æ§èŠ‚ç‚¹ï¼Œå®ƒä¸»è¦è´Ÿè´£ï¼š
 ç®¡ç†æ‰€æœ‰çš„èŠ‚ç‚¹ è°ƒåº¦POD æ§åˆ¶é›†ç¾¤è¿è¡Œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰çŠ¶æ€ åŒ…å«äº†ä»¥ä¸‹å‡ ä¸ªç»„ä»¶ï¼š API-Serverï¼šé›†ç¾¤çš„HTTP RESTæ¥å£ï¼Œç»Ÿä¸€å…¥å£ Controller-Managerï¼šæ‰€æœ‰èµ„æºçš„è‡ªåŠ¨åŒ–æ§åˆ¶ä¸­å¿ƒ Schedulerï¼šPODè°ƒåº¦  Nodeä¹Ÿå«åšå·¥ä½œèŠ‚ç‚¹ï¼Œä¸»è¦è´Ÿè´£ï¼š
 ç®¡ç†æ‰€æœ‰å®¹å™¨ ç›‘æ§ã€ä¸ŠæŠ¥æ‰€æœ‰PODçš„è¿è¡ŒçŠ¶æ€ åŒ…å«äº†ä»¥ä¸‹å‡ ä¸ªç»„ä»¶ï¼š Kubeletï¼šç®¡ç†èŠ‚ç‚¹ä¸Šå®¹å™¨çš„ç”Ÿå‘½ï¼Œä¸MasterèŠ‚ç‚¹é€šä¿¡ Kube-Proxyï¼šæœåŠ¡é€šä¿¡ã€è´Ÿè½½å‡è¡¡ CRIå®¹å™¨è¿è¡Œæ—¶ï¼šæ¥æ”¶kubeletçš„å®¹å™¨ç›¸å…³çš„æŒ‡ä»¤å¹¶æ‰§è¡Œ  MasterèŠ‚ç‚¹ä¹Ÿæ‹¥æœ‰Nodeç›¸å…³çš„ç»„ä»¶ï¼Œå³è¯¥Masterä¹Ÿå¯ä»¥ä½œä¸ºå·¥ä½œèŠ‚ç‚¹è¿›è¡Œè®¡ç®—ã€‚
é™¤æ­¤ä¹‹å¤–ï¼Œk8så†…éƒ¨çš„å­˜å‚¨é‡‡ç”¨ETCDä½œä¸ºå”¯ä¸€å­˜å‚¨ï¼Œä¸€èˆ¬é‡‡ç”¨é›†ç¾¤é«˜å¯ç”¨çš„æ–¹å¼éƒ¨ç½²ã€‚
Etcdé›†ç¾¤æ˜¯åˆ†å¸ƒå¼K/Vå­˜å‚¨é›†ç¾¤ï¼Œæä¾›äº†å¯é çš„å¼ºä¸€è‡´æ€§æœåŠ¡å‘ç°ã€‚Etcdé›†ç¾¤å­˜å‚¨Kubernetesç³»ç»Ÿçš„é›†ç¾¤çŠ¶æ€å’Œå…ƒæ•°æ®ï¼Œå…¶ä¸­åŒ…æ‹¬æ‰€æœ‰Kubernetesèµ„æºå¯¹è±¡ä¿¡æ¯ã€èµ„æºå¯¹è±¡çŠ¶æ€ã€é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯ç­‰ã€‚Kuberneteså°†æ‰€æœ‰æ•°æ®å­˜å‚¨è‡³Etcdé›†ç¾¤å‰ç¼€ä¸º/registryçš„ç›®å½•ä¸‹ã€‚
å„ä¸ªç»„ä»¶çš„åŠŸèƒ½ åœ¨k8sé›†ç¾¤ä¸­ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ç»„ä»¶ï¼š
kubectl kubectlæ˜¯K8så®˜æ–¹æä¾›çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒä¸»è¦ä¸API-Serveräº¤äº’ï¼Œé€šä¿¡åè®®é‡‡ç”¨HTTP/Jsonã€‚
client-go é™¤äº†æœ‰å‘½ä»¤è¡Œå·¥å…·å¯¹K8sè¿›è¡Œç®¡ç†ä¹‹å¤–ï¼Œè¿˜æä¾›äº†ç¼–ç¨‹æ–¹å¼ã€‚client-goç”¨golangè¿›è¡Œå¼€å‘ï¼Œå®ƒæœ€åˆæ˜¯K8sçš„éƒ¨åˆ†ä»£ç ï¼Œç°åœ¨æŠ½æˆäº†ç‹¬ç«‹çš„ä»“åº“ã€‚
K8sä»»ä½•ç»„ä»¶ä¸API-Serveré€šä¿¡éƒ½æ˜¯åŸºäºclient-goã€‚
API-Server è´Ÿè´£å°†K8s â€œèµ„æºç»„/èµ„æºç‰ˆæœ¬/èµ„æºâ€ ä»¥RESTfulå½¢å¼å¯¹å¤–æä¾›æœåŠ¡ã€‚API-Serveræ˜¯é›†ç¾¤ä¸­å”¯ä¸€ä¸ETCDäº¤äº’çš„ç»„ä»¶ã€‚å¹¶ä¸”å®ç°äº†é›†ç¾¤çš„å®‰å…¨è®¿é—®æœºåˆ¶ä»¥åŠè®¤è¯ã€æˆæƒã€å‡†å…¥æ§åˆ¶ç­‰ã€‚
Controller-Manager ç®¡ç†æ§åˆ¶å™¨è´Ÿè´£ç®¡ç†ã€ç»´æŠ¤é›†ç¾¤å†…çš„çŠ¶æ€ï¼Œå¦‚ç»´æŠ¤PODçš„å‰¯æœ¬ä¸ªæ•°ä¸ºæœŸæœ›çš„çŠ¶æ€å€¼ç­‰ã€‚
åŒ…å«äº†å¤šä¸ªæ§åˆ¶å™¨ï¼š
 DeploymentControllersæ§åˆ¶å™¨ StatefulSetæ§åˆ¶å™¨ Namespaceæ§åˆ¶å™¨ PersistentVolumeæ§åˆ¶å™¨ ç­‰ç­‰ æ¯ä¸ªæ§åˆ¶å™¨é€šè¿‡kube-apiserverç»„ä»¶æä¾›çš„æ¥å£å®æ—¶ç›‘æ§æ•´ä¸ªé›†ç¾¤æ¯ä¸ªèµ„æºå¯¹è±¡çš„å½“å‰çŠ¶æ€ï¼Œå½“å› å‘ç”Ÿå„ç§æ•…éšœè€Œå¯¼è‡´ç³»ç»ŸçŠ¶æ€å‡ºç°å˜åŒ–æ—¶ï¼Œä¼šå°è¯•å°†ç³»ç»ŸçŠ¶æ€ä¿®å¤åˆ°â€œæœŸæœ›çŠ¶æ€â€ã€‚  Scheduler è´Ÿè´£è°ƒåº¦PODåœ¨æŸä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œã€‚Kubeletä¸ŠæŠ¥èŠ‚ç‚¹ä¿¡æ¯ï¼ŒScheduleré€šè¿‡ç›‘æ§è¿™äº›ä¿¡æ¯ï¼Œå½“æœ‰æ–°çš„PODéœ€è¦è°ƒåº¦æ—¶ï¼Œä¼šæ ¹æ®è¿™äº›èŠ‚ç‚¹ä¿¡æ¯è¿›è¡Œè°ƒåº¦ç®—æ³•è®¡ç®—æœ€æœ‰èŠ‚ç‚¹ã€‚
è°ƒåº¦ç®—æ³•åˆ†ä¸ºä¸¤ç§ï¼Œåˆ†åˆ«ä¸ºé¢„é€‰è°ƒåº¦ç®—æ³•å’Œä¼˜é€‰è°ƒåº¦ç®—æ³•ã€‚é™¤è°ƒåº¦ç­–ç•¥å¤–ï¼ŒKubernetesè¿˜æ”¯æŒä¼˜å…ˆçº§è°ƒåº¦ã€æŠ¢å æœºåˆ¶åŠäº²å’Œæ€§è°ƒåº¦ç­‰åŠŸèƒ½ã€‚
kube-schedulerç»„ä»¶æ”¯æŒé«˜å¯ç”¨æ€§ï¼ˆå³å¤šå®ä¾‹åŒæ—¶è¿è¡Œï¼‰ï¼Œå³åŸºäºEtcdé›†ç¾¤ä¸Šçš„åˆ†å¸ƒå¼é”å®ç°é¢†å¯¼è€…é€‰ä¸¾æœºåˆ¶ï¼Œå¤šå®ä¾‹åŒæ—¶è¿è¡Œï¼Œé€šè¿‡kube-apiserveræä¾›çš„èµ„æºé”è¿›è¡Œé€‰ä¸¾ç«äº‰ã€‚æŠ¢å…ˆè·å–é”çš„å®ä¾‹è¢«ç§°ä¸ºLeaderèŠ‚ç‚¹ï¼ˆå³é¢†å¯¼è€…èŠ‚ç‚¹ï¼‰ï¼Œå¹¶è¿è¡Œkube-schedulerç»„ä»¶çš„ä¸»é€»è¾‘ï¼›è€Œæœªè·å–é”çš„å®ä¾‹è¢«ç§°ä¸ºCandidateèŠ‚ç‚¹ï¼ˆå³å€™é€‰èŠ‚ç‚¹ï¼‰ï¼Œè¿è¡Œæ—¶å¤„äºé˜»å¡çŠ¶æ€ã€‚åœ¨LeaderèŠ‚ç‚¹å› æŸäº›åŸå› é€€å‡ºåï¼ŒCandidateèŠ‚ç‚¹åˆ™é€šè¿‡é¢†å¯¼è€…é€‰ä¸¾æœºåˆ¶å‚ä¸ç«é€‰ï¼Œæˆä¸ºLeaderèŠ‚ç‚¹åæ¥æ›¿kube-schedulerçš„å·¥ä½œã€‚
Kubelet kubeletç»„ä»¶ç”¨æ¥æ¥æ”¶ã€å¤„ç†ã€ä¸ŠæŠ¥kube-apiserverç»„ä»¶ä¸‹å‘çš„ä»»åŠ¡ã€‚kubeletè¿›ç¨‹å¯åŠ¨æ—¶ä¼šå‘kube-apiserveræ³¨å†ŒèŠ‚ç‚¹è‡ªèº«ä¿¡æ¯ã€‚å®ƒä¸»è¦è´Ÿè´£æ‰€åœ¨èŠ‚ç‚¹ï¼ˆNodeï¼‰ä¸Šçš„Podèµ„æºå¯¹è±¡çš„ç®¡ç†ï¼Œä¾‹å¦‚Podèµ„æºå¯¹è±¡çš„åˆ›å»ºã€ä¿®æ”¹ã€ç›‘æ§ã€åˆ é™¤ã€é©±é€åŠPodç”Ÿå‘½å‘¨æœŸç®¡ç†ç­‰ã€‚
kubeletç»„ä»¶å®ç°äº†3ç§å¼€æ”¾æ¥å£ï¼š
  Container Runtime Interfaceï¼šç®€ç§°CRIï¼ˆå®¹å™¨è¿è¡Œæ—¶æ¥å£ï¼‰ï¼Œæä¾›å®¹å™¨è¿è¡Œæ—¶é€šç”¨æ’ä»¶æ¥å£æœåŠ¡ã€‚CRIå®šä¹‰äº†å®¹å™¨å’Œé•œåƒæœåŠ¡çš„æ¥å£ã€‚CRIå°†kubeletç»„ä»¶ä¸å®¹å™¨è¿è¡Œæ—¶è¿›è¡Œè§£è€¦ï¼Œå°†åŸæ¥å®Œå…¨é¢å‘Podçº§åˆ«çš„å†…éƒ¨æ¥å£æ‹†åˆ†æˆé¢å‘Sandboxå’ŒContainerçš„gRPCæ¥å£ï¼Œå¹¶å°†é•œåƒç®¡ç†å’Œå®¹å™¨ç®¡ç†åˆ†ç¦»ç»™ä¸åŒçš„æœåŠ¡ã€‚
  Container Network Interfaceï¼šç®€ç§°CNIï¼ˆå®¹å™¨ç½‘ç»œæ¥å£ï¼‰ï¼Œæä¾›ç½‘ç»œé€šç”¨æ’ä»¶æ¥å£æœåŠ¡ã€‚CNIå®šä¹‰äº†Kubernetesç½‘ç»œæ’ä»¶çš„åŸºç¡€ï¼Œå®¹å™¨åˆ›å»ºæ—¶é€šè¿‡CNIæ’ä»¶é…ç½®ç½‘ç»œã€‚
  Container Storage Interfaceï¼šç®€ç§°CSIï¼ˆå®¹å™¨å­˜å‚¨æ¥å£ï¼‰ï¼Œæä¾›å­˜å‚¨é€šç”¨æ’ä»¶æ¥å£æœåŠ¡ã€‚CSIå®šä¹‰äº†å®¹å™¨å­˜å‚¨å·æ ‡å‡†è§„èŒƒï¼Œå®¹å™¨åˆ›å»ºæ—¶é€šè¿‡CSIæ’ä»¶é…ç½®å­˜å‚¨å·ã€‚</description>
      <content>&lt;h1 id=&#34;æ€»ä½“æ¶æ„&#34;&gt;æ€»ä½“æ¶æ„&lt;/h1&gt;
&lt;p&gt;Kubernetesç³»ç»Ÿé‡‡ç”¨C/Sæ¶æ„ï¼Œåˆ†ä¸ºMasterå’ŒNodeä¸¤ä¸ªéƒ¨åˆ†ï¼ŒMasterä½œä¸ºServerç«¯ï¼ŒNodeä½œä¸ºClientç«¯ã€‚&lt;/p&gt;
&lt;p&gt;å¤šMasterçš„æ–¹å¼å¯ä»¥å®ç°é›†ç¾¤çš„é«˜å¯ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;Masterä¹Ÿå«åšä¸»æ§èŠ‚ç‚¹ï¼Œå®ƒä¸»è¦è´Ÿè´£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç®¡ç†æ‰€æœ‰çš„èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;è°ƒåº¦POD&lt;/li&gt;
&lt;li&gt;æ§åˆ¶é›†ç¾¤è¿è¡Œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰çŠ¶æ€
åŒ…å«äº†ä»¥ä¸‹å‡ ä¸ªç»„ä»¶ï¼š&lt;/li&gt;
&lt;li&gt;API-Serverï¼šé›†ç¾¤çš„HTTP RESTæ¥å£ï¼Œç»Ÿä¸€å…¥å£&lt;/li&gt;
&lt;li&gt;Controller-Managerï¼šæ‰€æœ‰èµ„æºçš„è‡ªåŠ¨åŒ–æ§åˆ¶ä¸­å¿ƒ&lt;/li&gt;
&lt;li&gt;Schedulerï¼šPODè°ƒåº¦&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nodeä¹Ÿå«åšå·¥ä½œèŠ‚ç‚¹ï¼Œä¸»è¦è´Ÿè´£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç®¡ç†æ‰€æœ‰å®¹å™¨&lt;/li&gt;
&lt;li&gt;ç›‘æ§ã€ä¸ŠæŠ¥æ‰€æœ‰PODçš„è¿è¡ŒçŠ¶æ€
åŒ…å«äº†ä»¥ä¸‹å‡ ä¸ªç»„ä»¶ï¼š&lt;/li&gt;
&lt;li&gt;Kubeletï¼šç®¡ç†èŠ‚ç‚¹ä¸Šå®¹å™¨çš„ç”Ÿå‘½ï¼Œä¸MasterèŠ‚ç‚¹é€šä¿¡&lt;/li&gt;
&lt;li&gt;Kube-Proxyï¼šæœåŠ¡é€šä¿¡ã€è´Ÿè½½å‡è¡¡&lt;/li&gt;
&lt;li&gt;CRIå®¹å™¨è¿è¡Œæ—¶ï¼šæ¥æ”¶kubeletçš„å®¹å™¨ç›¸å…³çš„æŒ‡ä»¤å¹¶æ‰§è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;MasterèŠ‚ç‚¹ä¹Ÿæ‹¥æœ‰Nodeç›¸å…³çš„ç»„ä»¶ï¼Œå³è¯¥Masterä¹Ÿå¯ä»¥ä½œä¸ºå·¥ä½œèŠ‚ç‚¹è¿›è¡Œè®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œk8så†…éƒ¨çš„å­˜å‚¨é‡‡ç”¨ETCDä½œä¸ºå”¯ä¸€å­˜å‚¨ï¼Œä¸€èˆ¬é‡‡ç”¨é›†ç¾¤é«˜å¯ç”¨çš„æ–¹å¼éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;p&gt;Etcdé›†ç¾¤æ˜¯åˆ†å¸ƒå¼K/Vå­˜å‚¨é›†ç¾¤ï¼Œæä¾›äº†å¯é çš„å¼ºä¸€è‡´æ€§æœåŠ¡å‘ç°ã€‚Etcdé›†ç¾¤å­˜å‚¨Kubernetesç³»ç»Ÿçš„é›†ç¾¤çŠ¶æ€å’Œå…ƒæ•°æ®ï¼Œå…¶ä¸­åŒ…æ‹¬æ‰€æœ‰Kubernetesèµ„æºå¯¹è±¡ä¿¡æ¯ã€èµ„æºå¯¹è±¡çŠ¶æ€ã€é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯ç­‰ã€‚Kuberneteså°†æ‰€æœ‰æ•°æ®å­˜å‚¨è‡³Etcdé›†ç¾¤å‰ç¼€ä¸º/registryçš„ç›®å½•ä¸‹ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å„ä¸ªç»„ä»¶çš„åŠŸèƒ½&#34;&gt;å„ä¸ªç»„ä»¶çš„åŠŸèƒ½&lt;/h1&gt;
&lt;p&gt;åœ¨k8sé›†ç¾¤ä¸­ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ç»„ä»¶ï¼š&lt;/p&gt;
&lt;h2 id=&#34;kubectl&#34;&gt;kubectl&lt;/h2&gt;
&lt;p&gt;kubectlæ˜¯K8så®˜æ–¹æä¾›çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒä¸»è¦ä¸API-Serveräº¤äº’ï¼Œé€šä¿¡åè®®é‡‡ç”¨HTTP/Jsonã€‚&lt;/p&gt;
&lt;h2 id=&#34;client-go&#34;&gt;client-go&lt;/h2&gt;
&lt;p&gt;é™¤äº†æœ‰å‘½ä»¤è¡Œå·¥å…·å¯¹K8sè¿›è¡Œç®¡ç†ä¹‹å¤–ï¼Œè¿˜æä¾›äº†ç¼–ç¨‹æ–¹å¼ã€‚client-goç”¨golangè¿›è¡Œå¼€å‘ï¼Œå®ƒæœ€åˆæ˜¯K8sçš„éƒ¨åˆ†ä»£ç ï¼Œç°åœ¨æŠ½æˆäº†ç‹¬ç«‹çš„ä»“åº“ã€‚&lt;/p&gt;
&lt;p&gt;K8sä»»ä½•ç»„ä»¶ä¸API-Serveré€šä¿¡éƒ½æ˜¯åŸºäºclient-goã€‚&lt;/p&gt;
&lt;h2 id=&#34;api-server&#34;&gt;API-Server&lt;/h2&gt;
&lt;p&gt;è´Ÿè´£å°†K8s â€œèµ„æºç»„/èµ„æºç‰ˆæœ¬/èµ„æºâ€ ä»¥RESTfulå½¢å¼å¯¹å¤–æä¾›æœåŠ¡ã€‚API-Serveræ˜¯é›†ç¾¤ä¸­å”¯ä¸€ä¸ETCDäº¤äº’çš„ç»„ä»¶ã€‚å¹¶ä¸”å®ç°äº†é›†ç¾¤çš„å®‰å…¨è®¿é—®æœºåˆ¶ä»¥åŠè®¤è¯ã€æˆæƒã€å‡†å…¥æ§åˆ¶ç­‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;controller-manager&#34;&gt;Controller-Manager&lt;/h2&gt;
&lt;p&gt;ç®¡ç†æ§åˆ¶å™¨è´Ÿè´£ç®¡ç†ã€ç»´æŠ¤é›†ç¾¤å†…çš„çŠ¶æ€ï¼Œå¦‚ç»´æŠ¤PODçš„å‰¯æœ¬ä¸ªæ•°ä¸ºæœŸæœ›çš„çŠ¶æ€å€¼ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;åŒ…å«äº†å¤šä¸ªæ§åˆ¶å™¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DeploymentControllersæ§åˆ¶å™¨&lt;/li&gt;
&lt;li&gt;StatefulSetæ§åˆ¶å™¨&lt;/li&gt;
&lt;li&gt;Namespaceæ§åˆ¶å™¨&lt;/li&gt;
&lt;li&gt;PersistentVolumeæ§åˆ¶å™¨&lt;/li&gt;
&lt;li&gt;ç­‰ç­‰
æ¯ä¸ªæ§åˆ¶å™¨é€šè¿‡kube-apiserverç»„ä»¶æä¾›çš„æ¥å£å®æ—¶ç›‘æ§æ•´ä¸ªé›†ç¾¤æ¯ä¸ªèµ„æºå¯¹è±¡çš„å½“å‰çŠ¶æ€ï¼Œå½“å› å‘ç”Ÿå„ç§æ•…éšœè€Œå¯¼è‡´ç³»ç»ŸçŠ¶æ€å‡ºç°å˜åŒ–æ—¶ï¼Œä¼šå°è¯•å°†ç³»ç»ŸçŠ¶æ€ä¿®å¤åˆ°â€œæœŸæœ›çŠ¶æ€â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;scheduler&#34;&gt;Scheduler&lt;/h2&gt;
&lt;p&gt;è´Ÿè´£è°ƒåº¦PODåœ¨æŸä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œã€‚Kubeletä¸ŠæŠ¥èŠ‚ç‚¹ä¿¡æ¯ï¼ŒScheduleré€šè¿‡ç›‘æ§è¿™äº›ä¿¡æ¯ï¼Œå½“æœ‰æ–°çš„PODéœ€è¦è°ƒåº¦æ—¶ï¼Œä¼šæ ¹æ®è¿™äº›èŠ‚ç‚¹ä¿¡æ¯è¿›è¡Œè°ƒåº¦ç®—æ³•è®¡ç®—æœ€æœ‰èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;è°ƒåº¦ç®—æ³•åˆ†ä¸ºä¸¤ç§ï¼Œåˆ†åˆ«ä¸ºé¢„é€‰è°ƒåº¦ç®—æ³•å’Œä¼˜é€‰è°ƒåº¦ç®—æ³•ã€‚é™¤è°ƒåº¦ç­–ç•¥å¤–ï¼ŒKubernetesè¿˜æ”¯æŒä¼˜å…ˆçº§è°ƒåº¦ã€æŠ¢å æœºåˆ¶åŠäº²å’Œæ€§è°ƒåº¦ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;kube-schedulerç»„ä»¶æ”¯æŒé«˜å¯ç”¨æ€§ï¼ˆå³å¤šå®ä¾‹åŒæ—¶è¿è¡Œï¼‰ï¼Œå³åŸºäºEtcdé›†ç¾¤ä¸Šçš„åˆ†å¸ƒå¼é”å®ç°é¢†å¯¼è€…é€‰ä¸¾æœºåˆ¶ï¼Œå¤šå®ä¾‹åŒæ—¶è¿è¡Œï¼Œé€šè¿‡kube-apiserveræä¾›çš„èµ„æºé”è¿›è¡Œé€‰ä¸¾ç«äº‰ã€‚æŠ¢å…ˆè·å–é”çš„å®ä¾‹è¢«ç§°ä¸ºLeaderèŠ‚ç‚¹ï¼ˆå³é¢†å¯¼è€…èŠ‚ç‚¹ï¼‰ï¼Œå¹¶è¿è¡Œkube-schedulerç»„ä»¶çš„ä¸»é€»è¾‘ï¼›è€Œæœªè·å–é”çš„å®ä¾‹è¢«ç§°ä¸ºCandidateèŠ‚ç‚¹ï¼ˆå³å€™é€‰èŠ‚ç‚¹ï¼‰ï¼Œè¿è¡Œæ—¶å¤„äºé˜»å¡çŠ¶æ€ã€‚åœ¨LeaderèŠ‚ç‚¹å› æŸäº›åŸå› é€€å‡ºåï¼ŒCandidateèŠ‚ç‚¹åˆ™é€šè¿‡é¢†å¯¼è€…é€‰ä¸¾æœºåˆ¶å‚ä¸ç«é€‰ï¼Œæˆä¸ºLeaderèŠ‚ç‚¹åæ¥æ›¿kube-schedulerçš„å·¥ä½œã€‚&lt;/p&gt;
&lt;h2 id=&#34;kubelet&#34;&gt;Kubelet&lt;/h2&gt;
&lt;p&gt;kubeletç»„ä»¶ç”¨æ¥æ¥æ”¶ã€å¤„ç†ã€ä¸ŠæŠ¥kube-apiserverç»„ä»¶ä¸‹å‘çš„ä»»åŠ¡ã€‚kubeletè¿›ç¨‹å¯åŠ¨æ—¶ä¼šå‘kube-apiserveræ³¨å†ŒèŠ‚ç‚¹è‡ªèº«ä¿¡æ¯ã€‚å®ƒä¸»è¦è´Ÿè´£æ‰€åœ¨èŠ‚ç‚¹ï¼ˆNodeï¼‰ä¸Šçš„Podèµ„æºå¯¹è±¡çš„ç®¡ç†ï¼Œä¾‹å¦‚Podèµ„æºå¯¹è±¡çš„åˆ›å»ºã€ä¿®æ”¹ã€ç›‘æ§ã€åˆ é™¤ã€é©±é€åŠPodç”Ÿå‘½å‘¨æœŸç®¡ç†ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;kubeletç»„ä»¶å®ç°äº†3ç§å¼€æ”¾æ¥å£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Container Runtime Interfaceï¼šç®€ç§°CRIï¼ˆå®¹å™¨è¿è¡Œæ—¶æ¥å£ï¼‰ï¼Œæä¾›å®¹å™¨è¿è¡Œæ—¶é€šç”¨æ’ä»¶æ¥å£æœåŠ¡ã€‚CRIå®šä¹‰äº†å®¹å™¨å’Œé•œåƒæœåŠ¡çš„æ¥å£ã€‚CRIå°†kubeletç»„ä»¶ä¸å®¹å™¨è¿è¡Œæ—¶è¿›è¡Œè§£è€¦ï¼Œå°†åŸæ¥å®Œå…¨é¢å‘Podçº§åˆ«çš„å†…éƒ¨æ¥å£æ‹†åˆ†æˆé¢å‘Sandboxå’ŒContainerçš„gRPCæ¥å£ï¼Œå¹¶å°†é•œåƒç®¡ç†å’Œå®¹å™¨ç®¡ç†åˆ†ç¦»ç»™ä¸åŒçš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Container Network Interfaceï¼šç®€ç§°CNIï¼ˆå®¹å™¨ç½‘ç»œæ¥å£ï¼‰ï¼Œæä¾›ç½‘ç»œé€šç”¨æ’ä»¶æ¥å£æœåŠ¡ã€‚CNIå®šä¹‰äº†Kubernetesç½‘ç»œæ’ä»¶çš„åŸºç¡€ï¼Œå®¹å™¨åˆ›å»ºæ—¶é€šè¿‡CNIæ’ä»¶é…ç½®ç½‘ç»œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Container Storage Interfaceï¼šç®€ç§°CSIï¼ˆå®¹å™¨å­˜å‚¨æ¥å£ï¼‰ï¼Œæä¾›å­˜å‚¨é€šç”¨æ’ä»¶æ¥å£æœåŠ¡ã€‚CSIå®šä¹‰äº†å®¹å™¨å­˜å‚¨å·æ ‡å‡†è§„èŒƒï¼Œå®¹å™¨åˆ›å»ºæ—¶é€šè¿‡CSIæ’ä»¶é…ç½®å­˜å‚¨å·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;kube-proxy&#34;&gt;Kube-Proxy&lt;/h2&gt;
&lt;p&gt;kube-proxyç»„ä»¶ï¼Œä½œä¸ºèŠ‚ç‚¹ä¸Šçš„ç½‘ç»œä»£ç†ï¼Œè¿è¡Œåœ¨æ¯ä¸ªKubernetesèŠ‚ç‚¹ä¸Šã€‚å®ƒç›‘æ§kube-apiserverçš„æœåŠ¡å’Œç«¯ç‚¹èµ„æºå˜åŒ–ï¼Œå¹¶é€šè¿‡iptables/ipvsç­‰é…ç½®è´Ÿè½½å‡è¡¡å™¨ï¼Œä¸ºä¸€ç»„Podæä¾›ç»Ÿä¸€çš„TCP/UDPæµé‡è½¬å‘å’Œè´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;Kube-Proxyæœ‰å‡ ä¸ªå·¥ä½œæ¨¡å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;userspace&lt;/li&gt;
&lt;li&gt;iptables æ¨¡å¼&lt;/li&gt;
&lt;li&gt;ipvs æ¨¡å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…·ä½“å¯ä»¥å‚è€ƒï¼š&lt;a href=&#34;https://kubernetes.io/zh/docs/concepts/services-networking/service/&#34;&gt;services-networking&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;criå®¹å™¨è¿è¡Œæ—¶ç»„ä»¶&#34;&gt;CRIå®¹å™¨è¿è¡Œæ—¶ç»„ä»¶&lt;/h2&gt;
&lt;p&gt;CRI åœ¨ Kubernetes 1.5 ä¸­å¼•å…¥ï¼Œå……å½“kubeletå’Œå®¹å™¨è¿è¡Œæ—¶ä¹‹é—´çš„æ¡¥æ¢ã€‚&lt;/p&gt;
&lt;p&gt;å³kubeletéœ€è¦è·ŸContaner Runtimeäº¤äº’å»ç®¡ç†å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸã€‚&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>å®¹å™¨è¿è¡Œæ—¶</title>
      <link>http://hindung.cn/posts/23/</link>
      <pubDate>Tue, 01 Jun 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/23/</guid>
      <description>OCI &amp;amp;&amp;amp; CRI ä½¿ç”¨å®¹å™¨ç»å¸¸ä¼šå¬åˆ°å®¹å™¨è¿è¡Œæ—¶çš„æ¦‚å¿µã€OCIä»¥åŠCRIç­‰ï¼Œè¿™äº›æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»å‘¢ï¼Ÿ
 CRï¼Œå³Container Runtimeï¼Œå®¹å™¨è¿è¡Œæ—¶ CRIï¼Œå³Container Runtime Interfaceï¼Œå®¹å™¨è¿è¡Œæ—¶æ¥å£ï¼Œå®ç°è¯¥ç³»åˆ—æ¥å£ä»¥å®ç°å®¹å™¨åŠŸèƒ½ OCIï¼Œå³Open Container Initiativeï¼šå¼€å£å®¹å™¨å€¡è®®ï¼Œæ˜¯å»ºç«‹å›´ç»•å®¹å™¨æ ¼å¼å’Œè¿è¡Œæ—¶çš„å¼€æ”¾å¼è¡Œä¸šæ ‡å‡†çš„æ˜ç¡®ç›®çš„çš„å¼€æ”¾å¼çš„æ²»ç†ç»“æ„ã€‚  OCI ç›®å‰åŒ…å«ä¸¤ä¸ªè§„èŒƒï¼šè¿è¡Œæ—¶è§„èŒƒï¼ˆruntime-specï¼‰å’Œé•œåƒè§„èŒƒï¼ˆimage-specï¼‰ã€‚è¿è¡Œæ—¶è§„èŒƒæ¦‚è¿°äº†å¦‚ä½•è¿è¡Œåœ¨ç£ç›˜ä¸Šè§£å‹ç¼©çš„â€œæ–‡ä»¶ç³»ç»ŸåŒ…â€ã€‚
ç°åœ¨æ¸…æ¥šäº†ï¼ŒOCIå®šä¹‰äº†ä¸€ç§è§„èŒƒï¼Œå³æ€ä¹ˆåšå¦‚ä½•åšã€‚è€ŒCRæ˜¯è¿™ä¸ªè§„èŒƒçš„å®è·µå¹¶å®šä¹‰äº†ä¸€ç³»åˆ—æ¥å£CRIï¼Œåªè¦å®ç°äº†è¯¥æ¥å£å°±èƒ½ä½¿ç”¨è¿™ä¸ªCRã€‚
æ¯”å¦‚CRæœ‰å¾ˆå¤šç§ï¼Œå¦‚runcã€lxcç­‰ï¼Œä½†ä»–ä»¬éƒ½æä¾›äº†ç»Ÿä¸€çš„CRIï¼Œå…¶ä»–å®ç°äº†è¿™ä¸ªCRIçš„ç»„ä»¶å¦‚kubeletåœ¨runcå’Œlxcé—´åˆ‡æ¢æ˜¯æ— æ„Ÿçš„ã€‚
ä½çº§ï¼ˆlow-levelï¼‰å®¹å™¨è¿è¡Œæ—¶ æˆ‘ç†è§£çš„low-levelæ˜¯ä¸€ç³»åˆ—æ“ä½œå®¹å™¨çš„è¡Œä¸ºåœ¨å¾ˆåº•å±‚ï¼Œæ¯”å¦‚é€šè¿‡Linuxå†…æ ¸æ¥å£åˆ›å»ºå„ä¸ªNamespaceä»¥åŠç”ŸæˆCgroupç­‰æ“ä½œã€‚æŠŠè¿™äº›è¡Œä¸ºæ‰“åŒ…å°±æ˜¯ä¸€ä¸ªä½çº§çš„è¿è¡Œæ—¶çš„å†…å®¹ã€‚æˆ–è€…è¯´ä½çº§å®¹å™¨è¿è¡Œæ—¶å¹²äº†å•¥ã€‚
é«˜çº§ï¼ˆhigh-levelï¼‰å®¹å™¨è¿è¡Œæ—¶ é«˜çº§å®¹å™¨è¿è¡Œæ—¶åˆå¹²äº†å•¥äº‹æƒ…å‘¢ï¼Ÿé•œåƒç®¡ç†ã€é•œåƒä¼ è¾“ã€é•œåƒè§£å‹ç¼©ç­‰æŠ€æœ¯éƒ½å¯ä»¥å½’ä¸ºé«˜çº§çš„å®¹å™¨è¿è¡Œæ—¶ã€‚
æ¯”å¦‚dockeræä¾›çš„é•œåƒæ„å»ºã€æ‹‰å–ç­‰ã€‚dockerå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ å±‚ï¼š
+----------+ | | | docker | | | +-----+----+  | socket/API  | +-----v----+ | | | dockerd | | | +-----+----+  | socket/API  | +-----v----+ | | |contanerd | | | +-----+----+  |  | OCI +-----v----+ | | | runc | +----------+ K8s ä¸ CRI k8s 1.</description>
      <content>&lt;h2 id=&#34;oci--cri&#34;&gt;OCI &amp;amp;&amp;amp; CRI&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨å®¹å™¨ç»å¸¸ä¼šå¬åˆ°å®¹å™¨è¿è¡Œæ—¶çš„æ¦‚å¿µã€OCIä»¥åŠCRIç­‰ï¼Œè¿™äº›æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CRï¼Œå³Container Runtimeï¼Œå®¹å™¨è¿è¡Œæ—¶&lt;/li&gt;
&lt;li&gt;CRIï¼Œå³Container Runtime Interfaceï¼Œå®¹å™¨è¿è¡Œæ—¶æ¥å£ï¼Œå®ç°è¯¥ç³»åˆ—æ¥å£ä»¥å®ç°å®¹å™¨åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;OCIï¼Œå³Open Container Initiativeï¼šå¼€å£å®¹å™¨å€¡è®®ï¼Œæ˜¯å»ºç«‹å›´ç»•å®¹å™¨æ ¼å¼å’Œè¿è¡Œæ—¶çš„å¼€æ”¾å¼è¡Œä¸šæ ‡å‡†çš„æ˜ç¡®ç›®çš„çš„å¼€æ”¾å¼çš„æ²»ç†ç»“æ„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;OCI ç›®å‰åŒ…å«ä¸¤ä¸ªè§„èŒƒï¼šè¿è¡Œæ—¶è§„èŒƒï¼ˆruntime-specï¼‰å’Œé•œåƒè§„èŒƒï¼ˆimage-specï¼‰ã€‚è¿è¡Œæ—¶è§„èŒƒæ¦‚è¿°äº†å¦‚ä½•è¿è¡Œåœ¨ç£ç›˜ä¸Šè§£å‹ç¼©çš„â€œæ–‡ä»¶ç³»ç»ŸåŒ…â€ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æ¸…æ¥šäº†ï¼ŒOCIå®šä¹‰äº†ä¸€ç§è§„èŒƒï¼Œå³æ€ä¹ˆåšå¦‚ä½•åšã€‚è€ŒCRæ˜¯è¿™ä¸ªè§„èŒƒçš„å®è·µå¹¶å®šä¹‰äº†ä¸€ç³»åˆ—æ¥å£CRIï¼Œåªè¦å®ç°äº†è¯¥æ¥å£å°±èƒ½ä½¿ç”¨è¿™ä¸ªCRã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚CRæœ‰å¾ˆå¤šç§ï¼Œå¦‚runcã€lxcç­‰ï¼Œä½†ä»–ä»¬éƒ½æä¾›äº†ç»Ÿä¸€çš„CRIï¼Œå…¶ä»–å®ç°äº†è¿™ä¸ªCRIçš„ç»„ä»¶å¦‚kubeletåœ¨runcå’Œlxcé—´åˆ‡æ¢æ˜¯æ— æ„Ÿçš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½çº§low-levelå®¹å™¨è¿è¡Œæ—¶&#34;&gt;ä½çº§ï¼ˆlow-levelï¼‰å®¹å™¨è¿è¡Œæ—¶&lt;/h2&gt;
&lt;p&gt;æˆ‘ç†è§£çš„low-levelæ˜¯ä¸€ç³»åˆ—æ“ä½œå®¹å™¨çš„è¡Œä¸ºåœ¨å¾ˆåº•å±‚ï¼Œæ¯”å¦‚é€šè¿‡Linuxå†…æ ¸æ¥å£åˆ›å»ºå„ä¸ªNamespaceä»¥åŠç”ŸæˆCgroupç­‰æ“ä½œã€‚æŠŠè¿™äº›è¡Œä¸ºæ‰“åŒ…å°±æ˜¯ä¸€ä¸ªä½çº§çš„è¿è¡Œæ—¶çš„å†…å®¹ã€‚æˆ–è€…è¯´ä½çº§å®¹å™¨è¿è¡Œæ—¶å¹²äº†å•¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é«˜çº§high-levelå®¹å™¨è¿è¡Œæ—¶&#34;&gt;é«˜çº§ï¼ˆhigh-levelï¼‰å®¹å™¨è¿è¡Œæ—¶&lt;/h2&gt;
&lt;p&gt;é«˜çº§å®¹å™¨è¿è¡Œæ—¶åˆå¹²äº†å•¥äº‹æƒ…å‘¢ï¼Ÿé•œåƒç®¡ç†ã€é•œåƒä¼ è¾“ã€é•œåƒè§£å‹ç¼©ç­‰æŠ€æœ¯éƒ½å¯ä»¥å½’ä¸ºé«˜çº§çš„å®¹å™¨è¿è¡Œæ—¶ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚dockeræä¾›çš„é•œåƒæ„å»ºã€æ‹‰å–ç­‰ã€‚dockerå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ å±‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+----------+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;|          |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;|  docker  |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;|          |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+-----+----+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      | socket/API
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+-----v----+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;|          |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;|  dockerd |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;|          |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+-----+----+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      |  socket/API
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+-----v----+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;|          |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;|contanerd |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;|          |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+-----+----+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      | OCI
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+-----v----+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;|          |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;|  runc    |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+----------+
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;k8s-ä¸-cri&#34;&gt;K8s ä¸ CRI&lt;/h2&gt;
&lt;p&gt;k8s 1.5 ä¸­è‡ªå·±å®ç°äº† docker CRI shimï¼Œé€šè¿‡è¿™ä¸ªç»„ä»¶ä¸dockeräº¤äº’ã€‚ç®¡ç†å®¹å™¨çš„è¿‡ç¨‹è¿˜æ˜¯é€šè¿‡dockeré‚£å¥—ï¼Œåœ¨containerd 1.1ç‰ˆæœ¬ä¸­containerdç›´æ¥å®ç°äº†CRIï¼Œkubeletå¯ä»¥ç›´æ¥é€šè¿‡è¿™ä¸ªCRIå®ç°ä¸containerdçš„äº¤äº’ï¼Œä»è€Œç»•è¿‡äº†dockerã€‚&lt;/p&gt;
&lt;p&gt;CRI å®šä¹‰äº†å‡ ç§è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ (RPC) å’Œæ¶ˆæ¯ç±»å‹ã€‚RPC ç”¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‹‰å–é•œåƒ ImageService.PullImage&lt;/li&gt;
&lt;li&gt;åˆ›å»ºpod RuntimeService.RunPodSandbox&lt;/li&gt;
&lt;li&gt;åˆ›å»ºå®¹å™¨RuntimeService.CreateContainer&lt;/li&gt;
&lt;li&gt;å¯åŠ¨å®¹å™¨RuntimeService.StartContainer&lt;/li&gt;
&lt;li&gt;åœæ­¢å®¹å™¨RuntimeService.StopContainer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç­‰æ“ä½œã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®ç°ä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶&#34;&gt;å®ç°ä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶&lt;/h2&gt;
&lt;h2 id=&#34;å‚è€ƒé“¾æ¥&#34;&gt;å‚è€ƒé“¾æ¥&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://www.ianlewis.org/en/container-runtimes-part-1-introduction-container-r&#34;&gt;Container Runtimes Part 1: An Introduction to Container Runtimes&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://opencontainers.org/&#34;&gt;opencontainers.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/opencontainers/runtime-spec&#34;&gt;runtime-spec&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=Utf-A4rODH8&#34;&gt;Building a container from scratch in Go - Liz Rice (Microscaling Systems)
&lt;/a&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>Goæºç è§£è¯»ä¹‹sync.Cond</title>
      <link>http://hindung.cn/posts/19/</link>
      <pubDate>Sun, 16 May 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/19/</guid>
      <description>å‰è¨€ å‰é¢ğŸ”—è¯´è¿‡ï¼ŒCondå®ç°äº†ä¸€ä¸ªæ¡ä»¶å˜é‡ï¼Œæ˜¯ç­‰å¾…æˆ–å®£å¸ƒä¸€ä¸ªäº‹ä»¶å‘ç”Ÿçš„goroutinesçš„æ±‡åˆç‚¹ã€‚
å°±æ˜¯è¯´ï¼Œä½¿ç”¨sync.Condå¯ä»¥åšåˆ°å¤šä¸ªåç¨‹ç­‰å¾…æŸä¸ªåç¨‹é€šçŸ¥çš„åœºæ™¯ã€‚
ä½¿ç”¨channelå¯ä»¥å®ç°ä¸€è¯»ä¸€å†™çš„åœºæ™¯ï¼Œè€ŒCondåˆ™å®ç°å¤šè¯»ä¸€å†™çš„åœºæ™¯ã€‚
æºç è§£æ ç®€åŒ–ç‰ˆæ–¹æ³•ç­¾åï¼š
// Condç»“æ„ä½“ type Cond struct {}  // NewCond è¿”å›å¸¦Lockerçš„Condï¼Œè¿™ä¸ªLockerå¯ä»¥æ˜¯ // *Mutex æˆ– *RWMutex func NewCond(l Locker) *Cond {}  // ç­‰å¾…Lçš„è§£é”å¹¶æŒ‚èµ·goroutine func (c *Cond) Wait() {}  // å”¤é†’1ä¸ªå› cé˜»å¡çš„goroutineï¼Œ // å¦‚æœåœ¨Signalä¹‹åæ‰Waitä¼šå¯¼è‡´all goroutines are asleep - deadlock func (c *Cond) Signal() {}  // å”¤é†’æ‰€æœ‰å› cé˜»å¡çš„goroutine // å¦‚æœåœ¨Broadcastä¹‹åæ‰Waitä¼šå¯¼è‡´all goroutines are asleep - deadlock func (c *Cond) Broadcast() {} å› æ­¤ï¼Œåœ¨Signalæˆ–è€…Broadcastå‰è¦å…ˆä¿è¯ç›®æ ‡çš„åç¨‹å·²ç»è¿›å…¥äº†WaitçŠ¶æ€ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ­»é”ã€‚å› ä¸ºSignalæˆ–è€…Broadcaståªå”¤é†’å½“å‰æ­£åœ¨è¢«Waité˜»å¡çš„åç¨‹ã€‚
Condçš„å®šä¹‰ï¼š
// Copyright 2011 The Go Authors.</description>
      <content>&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;&#34;&gt;å‰é¢ğŸ”—&lt;/a&gt;è¯´è¿‡ï¼ŒCondå®ç°äº†ä¸€ä¸ªæ¡ä»¶å˜é‡ï¼Œæ˜¯ç­‰å¾…æˆ–å®£å¸ƒä¸€ä¸ªäº‹ä»¶å‘ç”Ÿçš„goroutinesçš„æ±‡åˆç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;å°±æ˜¯è¯´ï¼Œä½¿ç”¨sync.Condå¯ä»¥åšåˆ°å¤šä¸ªåç¨‹ç­‰å¾…æŸä¸ªåç¨‹é€šçŸ¥çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨channelå¯ä»¥å®ç°ä¸€è¯»ä¸€å†™çš„åœºæ™¯ï¼Œè€ŒCondåˆ™å®ç°å¤šè¯»ä¸€å†™çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æºç è§£æ&#34;&gt;æºç è§£æ&lt;/h2&gt;
&lt;p&gt;ç®€åŒ–ç‰ˆæ–¹æ³•ç­¾åï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Condç»“æ„ä½“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Cond&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// NewCond è¿”å›å¸¦Lockerçš„Condï¼Œè¿™ä¸ªLockerå¯ä»¥æ˜¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// *Mutex æˆ– *RWMutex
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewCond&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Locker&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Cond&lt;/span&gt; {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ç­‰å¾…Lçš„è§£é”å¹¶æŒ‚èµ·goroutine
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Cond&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Wait&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å”¤é†’1ä¸ªå› cé˜»å¡çš„goroutineï¼Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¦‚æœåœ¨Signalä¹‹åæ‰Waitä¼šå¯¼è‡´all goroutines are asleep - deadlock
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Cond&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Signal&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å”¤é†’æ‰€æœ‰å› cé˜»å¡çš„goroutine
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¦‚æœåœ¨Broadcastä¹‹åæ‰Waitä¼šå¯¼è‡´all goroutines are asleep - deadlock
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Cond&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Broadcast&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å› æ­¤ï¼Œåœ¨Signalæˆ–è€…Broadcastå‰è¦å…ˆä¿è¯ç›®æ ‡çš„åç¨‹å·²ç»è¿›å…¥äº†WaitçŠ¶æ€ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ­»é”ã€‚å› ä¸ºSignalæˆ–è€…Broadcaståªå”¤é†’å½“å‰æ­£åœ¨è¢«Waité˜»å¡çš„åç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://go.googlesource.com/go/+/go1.16.4/src/sync/cond.go#21&#34;&gt;Condçš„å®šä¹‰&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Copyright 2011 The Go Authors. All rights reserved.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Use of this source code is governed by a BSD-style
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// license that can be found in the LICENSE file.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync/atomic&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;unsafe&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Cond implements a condition variable, a rendezvous point
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// for goroutines waiting for or announcing the occurrence
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// of an event.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Condå®ç°äº†ä¸€ä¸ªæ¡ä»¶å˜é‡ï¼Œå®ƒæ˜¯goroutinesç­‰å¾…æˆ–å®£å¸ƒäº‹ä»¶å‘ç”Ÿçš„é›†åˆç‚¹ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Each Cond has an associated Locker L (often a *Mutex or *RWMutex),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// which must be held when changing the condition and
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// when calling the Wait method.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ¯ä¸ªCondéƒ½æœ‰ä¸€ä¸ªç›¸å…³çš„Locker Lï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ª*Mutexæˆ–*RWMutexï¼‰ï¼Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// åœ¨æ”¹å˜æ¡ä»¶å’Œè°ƒç”¨Waitæ–¹æ³•æ—¶ï¼Œå¿…é¡»æŒæœ‰è¿™ä¸ªLã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// A Cond must not be copied after first use.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Cond&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;noCopy&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;noCopy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// L is held while observing or changing the condition
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;L&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Locker&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// notifyListæ˜¯ç”¨äºå®ç°sync.Condçš„åŸºäºç¥¨è¯çš„é€šçŸ¥åˆ—è¡¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// å‚è€ƒï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// https://go.googlesource.com/go/+/go1.16.4/src/runtime/sema.go#446
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;notify&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;notifyList&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;checker&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;copyChecker&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// NewCond returns a new Cond with Locker l.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewCond&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Locker&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Cond&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Cond&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;L&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Wait atomically unlocks c.L and suspends execution
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// of the calling goroutine. After later resuming execution,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Wait locks c.L before returning. Unlike in other systems,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Wait cannot return unless awoken by Broadcast or Signal.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Because c.L is not locked when Wait first resumes, the caller
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// typically cannot assume that the condition is true when
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Wait returns. Instead, the caller should Wait in a loop:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    c.L.Lock()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    for !condition() {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        c.Wait()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    ... make use of condition ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    c.L.Unlock()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Waitä¼šå…ˆæŠŠåŠ å…¥åˆ°å¾…å”¤é†’é˜Ÿåˆ—ï¼Œå†é‡Šæ”¾é”ï¼Œç„¶åæ‰§è¡Œç­‰å¾…ï¼Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å½“å…¶ä»–goroutineè°ƒç”¨Broadcastæˆ–è€…Signalæ¥é€šçŸ¥å…¶æ¢å¤æ‰§è¡Œåï¼Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ä¼šé‡æ–°ä¸Šé”
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Cond&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Wait&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;checker&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;check&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// notifyListAddå°†è°ƒç”¨è€…æ·»åŠ åˆ°é€šçŸ¥åˆ—è¡¨ä¸­ï¼Œä»¥ä¾¿å®ƒå¯ä»¥æ¥æ”¶é€šçŸ¥ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// è°ƒç”¨è€…å¿…é¡»æœ€ç»ˆè°ƒç”¨notifyListWaitæ¥ç­‰å¾…è¿™æ ·çš„é€šçŸ¥ï¼Œå¹¶æ˜¾å¼ä¼ å‚ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// å‚è€ƒï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// https://go.googlesource.com/go/+/go1.16.4/src/sync/runtime.go#31
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// https://go.googlesource.com/go/+/go1.16.4/src/runtime/sema.go#475
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime_notifyListAdd&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;notify&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;L&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Unlock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// notifyListWaitç­‰å¾…é€šçŸ¥ã€‚å¦‚æœè‡ªé‚£ä»¥åå·²å‘é€ï¼Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// è°ƒç”¨notifyListAddï¼Œå®ƒç«‹å³è¿”å›ã€‚å¦åˆ™ï¼Œå®ƒå°†é˜»å¡ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// å‚è€ƒï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// https://go.googlesource.com/go/+/go1.16.4/src/sync/runtime.go#34
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// https://go.googlesource.com/go/+/go1.16.4/src/runtime/sema.go#485
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;runtime_notifyListWait&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;notify&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;L&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Lock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Signal wakes one goroutine waiting on c, if there is any.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// It is allowed but not required for the caller to hold c.L
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// during the call.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Cond&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Signal&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;checker&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;check&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;runtime_notifyListNotifyOne&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;notify&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Broadcast wakes all goroutines waiting on c.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// It is allowed but not required for the caller to hold c.L
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// during the call.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Cond&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Broadcast&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;checker&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;check&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;runtime_notifyListNotifyAll&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;notify&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// copyChecker holds back pointer to itself to detect object copying.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;copyChecker&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;copyChecker&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;check&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; uintptr(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		!&lt;span style=&#34;color:#a6e22e&#34;&gt;atomic&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;CompareAndSwapUintptr&lt;/span&gt;((&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;), &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;))) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		uintptr(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		panic(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync.Cond is copied&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// noCopy may be embedded into structs which must not be copied
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// after the first use.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// See https://golang.org/issues/8005#issuecomment-190753527
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// for details.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;noCopy&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Lock is a no-op used by -copylocks checker from `go vet`.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;noCopy&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Lock&lt;/span&gt;()   {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;noCopy&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Unlock&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ä½¿ç”¨ä¾‹å­&#34;&gt;ä½¿ç”¨ä¾‹å­&lt;/h2&gt;
&lt;p&gt;å¯ä»¥æŒ‰ç…§å®˜æ–¹ç»™çš„ä½¿ç”¨ä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    c.L.Lock()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    æŸä¸ªæ¡ä»¶æ»¡è¶³æ‰è¿›è¡ŒWaitï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´Waitå‘ç”Ÿåœ¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    å”¤é†’ä¹‹åï¼Œä»è€Œå¯¼è‡´æ­»é”
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    for !condition() {  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        c.Wait()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    ... make use of condition ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    c.L.Unlock()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;locker&lt;/span&gt; = new(&lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Mutex&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cond&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewCond&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;locker&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;condition&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WaitGroup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;cond&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;L&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Lock&lt;/span&gt;()         &lt;span style=&#34;color:#75715e&#34;&gt;//è·å–é”
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cond&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;L&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Unlock&lt;/span&gt;() &lt;span style=&#34;color:#75715e&#34;&gt;//é‡Šæ”¾é”
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;condition&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#a6e22e&#34;&gt;cond&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Wait&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Done&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }(&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }   
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cond&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;L&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Lock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;condition&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;cond&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Broadcast&lt;/span&gt;()  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cond&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;L&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Unlock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Wait&lt;/span&gt;()         
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ³¨æ„ï¼šsync.Condéœ€è¦å¼€å‘äººå‘˜æŠŠæ¡é”ä»¥åŠcondition()çš„æ¡ä»¶ï¼Œæ¯”è¾ƒå®¹æ˜“å‘ç”Ÿæ­»é”ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…¶ä»–ä»£ç ä¸­çš„åº”ç”¨&#34;&gt;å…¶ä»–ä»£ç ä¸­çš„åº”ç”¨&lt;/h2&gt;
&lt;p&gt;k8sä¸­çš„client-goä»£ç ä¸­çš„&lt;a href=&#34;https://github.com/kubernetes/client-go/blob/v0.21.0/tools/cache/delta_fifo.go#L98&#34;&gt;DeltaFIFOé˜Ÿåˆ—&lt;/a&gt;å®ç°å°±æ˜¯ç”¨äº†sync.Condæ¥å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DeltaFIFO&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// lock/cond protects access to &amp;#39;items&amp;#39; and &amp;#39;queue&amp;#39;.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;RWMutex&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cond&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Cond&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// å…¶ä»–å­—æ®µçœç•¥
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes/client-go/blob/v0.21.0/tools/cache/delta_fifo.go#L207&#34;&gt;åˆå§‹åŒ–&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewDeltaFIFO&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;keyFunc&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;KeyFunc&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;knownObjects&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;KeyListerGetter&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DeltaFIFO&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewDeltaFIFOWithOptions&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;DeltaFIFOOptions&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;KeyFunction&lt;/span&gt;:  &lt;span style=&#34;color:#a6e22e&#34;&gt;keyFunc&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;KnownObjects&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;knownObjects&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewDeltaFIFOWithOptions&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;opts&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DeltaFIFOOptions&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DeltaFIFO&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;opts&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;KeyFunction&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;opts&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;KeyFunction&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;MetaNamespaceKeyFunc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DeltaFIFO&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;items&lt;/span&gt;:        &lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#a6e22e&#34;&gt;Deltas&lt;/span&gt;{},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;queue&lt;/span&gt;:        []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;keyFunc&lt;/span&gt;:      &lt;span style=&#34;color:#a6e22e&#34;&gt;opts&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;KeyFunction&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;knownObjects&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;opts&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;KnownObjects&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;emitDeltaTypeReplaced&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;opts&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;EmitDeltaTypeReplaced&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// f.lock ä¸ f.cond ç»“åˆä½¿ç”¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cond&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;L&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å†æ¥çœ‹çœ‹&lt;a href=&#34;https://github.com/kubernetes/client-go/blob/v0.21.0/tools/cache/delta_fifo.go#L518&#34;&gt;Popæ–¹æ³•&lt;/a&gt;ï¼Œä½•æ—¶è°ƒç”¨Waitï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Popé˜»å¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æœ‰ä¸€äº›é¡¹ç›®ï¼Œç„¶åè¿”å›ä¸€ä¸ªã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¦‚æœå¤šä¸ªé¡¹ç›®å‡†å¤‡å°±ç»ªï¼Œå®ƒä»¬å°†æŒ‰ç…§å®ƒä»¬è¢«æ·»åŠ /æ›´æ–°çš„é¡ºåºè¿”å›ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DeltaFIFO&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Pop&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;process&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PopProcessFunc&lt;/span&gt;) (&lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}, &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Lock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Unlock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// æœ‰æ•°æ®å°±ä¸ç”¨Wait
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;queue&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// When the queue is empty, invocation of Pop() is blocked until new item is enqueued.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// å½“é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œå°†é˜»æ­¢Popï¼ˆï¼‰çš„è°ƒç”¨ï¼Œç›´åˆ°æ–°é¡¹ç›®å…¥é˜Ÿã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// When Close() is called, the f.closed is set and the condition is broadcasted.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// å½“Close()è¢«è°ƒç”¨æ—¶ï¼Œf.closedè¢«è®¾ç½®ï¼Œæ¡ä»¶è¢«å¹¿æ’­ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// Which causes this loop to continue and return from the Pop().
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ErrFIFOClosed&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// é˜»å¡ç›´åˆ°è¢«å¹¿æ’­ï¼ˆè¯´æ˜æœ‰æ•°æ®ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cond&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Wait&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;queue&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;queue&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;queue&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;:]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;initialPopulationCount&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;initialPopulationCount&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;--&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;item&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;items&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// This should never happen
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;klog&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Errorf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Inconceivable! %q was in f.queue but not f.items; ignoring.&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;continue&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		delete(&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;items&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;process&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;item&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;.(&lt;span style=&#34;color:#a6e22e&#34;&gt;ErrRequeue&lt;/span&gt;); &lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;addIfNotPresent&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;item&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// Don&amp;#39;t need to copyDeltas here, because we&amp;#39;re transferring
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// ownership to the caller.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;item&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½•æ—¶è°ƒç”¨Broadcastï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Close the queue.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DeltaFIFO&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Close&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Lock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Unlock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cond&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Broadcast&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// addIfNotPresent inserts deltas under id if it does not exist, and assumes the caller
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// already holds the fifo lock.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DeltaFIFO&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;addIfNotPresent&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;deltas&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Deltas&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;populated&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;exists&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;items&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;]; &lt;span style=&#34;color:#a6e22e&#34;&gt;exists&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;queue&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;queue&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;items&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;deltas&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// æœ‰æ•°æ®ï¼Œåˆ™å¹¿æ’­
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cond&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Broadcast&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// queueActionLocked appends to the delta list for the object.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// queueActionLockedè¿½åŠ åˆ°è¯¥å¯¹è±¡çš„deltaåˆ—è¡¨ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Caller must lock first.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DeltaFIFO&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;queueActionLocked&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;actionType&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DeltaType&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;obj&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}) &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;KeyOf&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;obj&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;KeyError&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;obj&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;oldDeltas&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;items&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newDeltas&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; append(&lt;span style=&#34;color:#a6e22e&#34;&gt;oldDeltas&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;Delta&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;actionType&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;obj&lt;/span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newDeltas&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;dedupDeltas&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;newDeltas&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;newDeltas&lt;/span&gt;) &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;exists&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;items&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;]; !&lt;span style=&#34;color:#a6e22e&#34;&gt;exists&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;queue&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;queue&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;items&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;newDeltas&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cond&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Broadcast&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	} &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// This never happens, because dedupDeltas never returns an empty list
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// when given a non-empty list (as it is here).
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// If somehow it happens anyway, deal with it but complain.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;oldDeltas&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;klog&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Errorf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Impossible dedupDeltas for id=%q: oldDeltas=%#+v, obj=%#+v; ignoring&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;oldDeltas&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;obj&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;klog&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Errorf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Impossible dedupDeltas for id=%q: oldDeltas=%#+v, obj=%#+v; breaking invariant by storing empty Deltas&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;oldDeltas&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;obj&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;items&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;newDeltas&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Errorf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Impossible dedupDeltas for id=%q: oldDeltas=%#+v, obj=%#+v; broke DeltaFIFO invariant by storing empty Deltas&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;oldDeltas&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;obj&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;æ›´æ–°äº 2021/05/16 23:53&lt;/em&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>Goæºç è§£è¯»ä¹‹syncä¸­çš„åŸºæœ¬ç±»å‹å’Œä½¿ç”¨åœºæ™¯</title>
      <link>http://hindung.cn/posts/18/</link>
      <pubDate>Tue, 11 May 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/18/</guid>
      <description>Overview åŒ…é“¾æ¥ğŸ”—
syncåŒ…æä¾›åŸºæœ¬çš„åŒæ­¥åŸè¯­ï¼Œä¾‹å¦‚äº’æ–¥é”ã€‚
é™¤äº†Onceå’ŒWaitGroupç±»å‹å¤–ï¼Œå¤§å¤šæ•°éƒ½æ˜¯ä¾›ä½çº§åº“ä¾‹ç¨‹ä½¿ç”¨çš„ã€‚
æ›´é«˜å±‚æ¬¡çš„åŒæ­¥æœ€å¥½é€šè¿‡channelså’Œé€šä¿¡æ¥å®Œæˆã€‚
ä»ä»£ç çœ‹ï¼Œsyncæä¾›äº†å‡ ç§ç±»å‹ï¼š
 Condï¼šæ¡ä»¶å˜é‡ Lockerï¼šé”çš„æ¥å£å®šä¹‰ Mapï¼šåç¨‹å¹¶å‘å®‰å…¨çš„Map Mutexï¼šäº’æ–¥é” Onceï¼šå•æ¬¡æ‰§è¡Œ Poolï¼šæ±  RWMutexï¼šè¯»å†™é” WaitGroupï¼šç­‰å¾…ç»„  å‡ ä¸ªç±»å‹åˆ†åˆ«å¯¹åº”ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚
sync.Cond Condå®ç°äº†ä¸€ä¸ªæ¡ä»¶å˜é‡ï¼Œæ˜¯ç­‰å¾…æˆ–å®£å¸ƒä¸€ä¸ªäº‹ä»¶å‘ç”Ÿçš„goroutinesçš„æ±‡åˆç‚¹ã€‚
é€šä¿—çš„è¯´ï¼Œsync.Condç”¨æ¥åè°ƒé‚£äº›è®¿é—®å…±äº«èµ„æºçš„goroutineï¼Œå½“å…±äº«èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥è¢«é˜»å¡goroutineã€‚
sync.Cond ç»å¸¸ç”¨åœ¨å¤šä¸ª goroutine ç­‰å¾…ä¸€ä¸ª goroutine é€šçŸ¥ï¼ˆäº‹ä»¶å‘ç”Ÿï¼‰çš„åœºæ™¯ã€‚
sync.Map Mapå°±åƒGoä¸­çš„map[interface{}]interface{}ï¼Œä½†å¯¹äºå¤šä¸ªgoroutineçš„å¹¶å‘ä½¿ç”¨æ˜¯å®‰å…¨çš„ï¼Œä¸éœ€è¦é¢å¤–çš„é”æˆ–åè°ƒã€‚
ä½¿ç”¨map + sync.Mutexæˆ–è€…sync.RWMutexçš„æ–¹å¼ä¹Ÿå¯ä»¥å®ç°ä¸sync.Mapç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†æ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œsync.Mapå…·æœ‰æ›´é«˜çš„æ€§èƒ½ï¼š
Mapç±»å‹é’ˆå¯¹ä¸¤ç§å¸¸è§ç”¨ä¾‹è¿›è¡Œäº†ä¼˜åŒ–ï¼š
 å½“ç»™å®škeyçš„æ¡ç›®ä»…è¢«å†™å…¥ä¸€æ¬¡å´è¢«è¯»å–å¤šæ¬¡æ—¶ï¼Œä¾‹å¦‚åœ¨ä»…å¢é•¿çš„é«˜é€Ÿç¼“å­˜ä¸­ å½“å¤šä¸ªgoroutineè¯»å–ï¼Œå†™å…¥å’Œè¦†ç›–çš„keyéƒ½ä¸ç›¸å…³æ—¶  åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œä¸ä¸å•ç‹¬çš„Mutexæˆ–RWMutex + map ç›¸æ¯”ï¼Œä½¿ç”¨Mapå¯ä»¥æ˜¾ç€å‡å°‘é”äº‰ç”¨ã€‚
sync.Mutex Mutexæ˜¯ä¸€ä¸ªç›¸äº’æ’æ–¥çš„é”ã€‚Mutexçš„é›¶å€¼æ˜¯ä¸€ä¸ªè§£é”çš„Mutexã€‚
å½“è°ƒç”¨Lockæ–¹æ³•è¿›è¡ŒåŠ é”æ—¶ï¼Œå¦‚æœé”å·²åœ¨ä½¿ç”¨ä¸­ï¼Œåˆ™goroutineä¼šé˜»å¡ï¼Œç›´åˆ°é”å¯ç”¨ä¸ºæ­¢ã€‚ å½“è°ƒç”¨UnLockæ–¹æ³•è¿›è¡Œè§£é”æ—¶ï¼Œå¦‚æœé”æ²¡æœ‰åœ¨ä½¿ç”¨ï¼Œåˆ™ä¼šå‡ºç°è¿è¡Œæ—¶é”™è¯¯ã€‚
é”å®šçš„äº’æ–¥é”ä¸ç‰¹å®šçš„goroutineæ²¡æœ‰å…³è”ã€‚å…è®¸ä¸€ä¸ªgoroutineé”å®šMutexï¼Œç„¶åå®‰æ’å¦ä¸€ä¸ªgoroutineå¯¹å…¶è¿›è¡Œè§£é”ã€‚
sync.RWMutex RWMutexæ˜¯ä¸€ä¸ªè¯»å†™å™¨ç›¸äº’æ’æ–¥çš„é”ã€‚ è¯¥é”å¯ä»¥ç”±ä»»æ„æ•°é‡çš„è¯»è€…æˆ–å•ä¸€çš„å†™è€…æŒæœ‰ã€‚RWMutexçš„é›¶å€¼æ˜¯ä¸€ä¸ªè§£é”çš„mutexã€‚
è¯»è¯»ä¸äº’æ–¥ï¼Œè¯»å†™äº’æ–¥ï¼Œå†™å†™äº’æ–¥ã€‚
sync.Once Onceçš„Do(f)æ–¹æ³•ä¿è¯åªè¿è¡Œä¸€æ¬¡ï¼Œå³ä½¿få‘ç”Ÿpanicã€‚ è¿™å¸¸ç”¨åœ¨å•ä¾‹æ¨¡å¼ï¼Œé…ç½®æ–‡ä»¶åŠ è½½ï¼Œåˆå§‹åŒ–è¿™äº›åœºæ™¯ä¸‹ã€‚
sync.Pool Poolæ˜¯ä¸€ç»„å¯ä»¥å•ç‹¬ä¿å­˜å’Œæ£€ç´¢çš„ä¸´æ—¶å¯¹è±¡ã€‚ å‚¨å­˜åœ¨æ± å­é‡Œçš„ä»»ä½•å¯¹è±¡éƒ½å¯èƒ½åœ¨ä»»ä½•æ—¶å€™è¢«è‡ªåŠ¨åˆ é™¤ï¼Œè€Œæ— éœ€é€šçŸ¥ã€‚ æ± å¯ä»¥å®‰å…¨åœ°åŒæ—¶è¢«å¤šä¸ªgoroutineä½¿ç”¨ã€‚
Poolçš„ä½œç”¨æ˜¯ç¼“å­˜å·²åˆ†é…ä½†æœªä½¿ç”¨çš„é¡¹ç›®ï¼Œä»¥ä¾¿ä»¥åå†ä½¿ç”¨ï¼Œå‡è½»åƒåœ¾æ”¶é›†å™¨çš„å‹åŠ›ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä½¿å»ºç«‹é«˜æ•ˆã€çº¿ç¨‹å®‰å…¨çš„è‡ªç”±åˆ—è¡¨å˜å¾—å®¹æ˜“ã€‚
æ± çš„ä¸€ä¸ªé€‚å½“çš„ç”¨é€”æ˜¯ç®¡ç†ä¸€ç»„ä¸´æ—¶é¡¹ç›®ï¼Œè¿™äº›ä¸´æ—¶é¡¹ç›®åœ¨åŒ…çš„ç‹¬ç«‹å®¢æˆ·ç«¯ä¹‹é—´é»˜é»˜åœ°å…±äº«ï¼Œå¹¶å¯èƒ½è¢«é‡å¤ä½¿ç”¨ã€‚Poolæä¾›äº†ä¸€ç§åœ¨è®¸å¤šå®¢æˆ·ç«¯ä¹‹é—´åˆ†æ‘Šåˆ†é…å¼€é”€çš„æ–¹æ³•ã€‚
å½“ç„¶ï¼ŒPoolå¹¶ä¸é€‚ç”¨äºä¸€äº›çŸ­å‘½çš„å¯¹è±¡æ± åŒ–ã€‚
ç›¸å½“äºæ‹¿å‡ºæ¥ï¼Œåšæ“ä½œï¼Œå†æ”¾å›å»ï¼Œæ“ä½œè¿‡çš„ä¸œè¥¿æ”¾å›å»çš„æ—¶å€™æ˜¯å•¥æ ·ï¼Œæ‹¿å‡ºæ¥çš„æ—¶å€™å°±æ˜¯å•¥æ ·çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‹¿å‡ºæ¥ç”¨çš„æ—¶å€™éœ€è¦åˆå§‹åŒ–æ•°æ®æˆ–è€…æ¸…ç©ºã€‚ å¦‚Ginçš„æºç ï¼šhttps://github.com/gin-gonic/gin/blob/v1.7.1/gin.go#L439
// ServeHTTP conforms to the http.Handler interface. func (engine *Engine) ServeHTTP(w http.</description>
      <content>&lt;h1 id=&#34;overview&#34;&gt;Overview&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://pkg.go.dev/sync&#34;&gt;åŒ…é“¾æ¥ğŸ”—&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;syncåŒ…æä¾›åŸºæœ¬çš„åŒæ­¥åŸè¯­ï¼Œä¾‹å¦‚äº’æ–¥é”ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†Onceå’ŒWaitGroupç±»å‹å¤–ï¼Œå¤§å¤šæ•°éƒ½æ˜¯ä¾›ä½çº§åº“ä¾‹ç¨‹ä½¿ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ›´é«˜å±‚æ¬¡çš„åŒæ­¥æœ€å¥½é€šè¿‡channelså’Œé€šä¿¡æ¥å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;ä»ä»£ç çœ‹ï¼Œsyncæä¾›äº†å‡ ç§ç±»å‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Condï¼šæ¡ä»¶å˜é‡&lt;/li&gt;
&lt;li&gt;Lockerï¼šé”çš„æ¥å£å®šä¹‰&lt;/li&gt;
&lt;li&gt;Mapï¼šåç¨‹å¹¶å‘å®‰å…¨çš„Map&lt;/li&gt;
&lt;li&gt;Mutexï¼šäº’æ–¥é”&lt;/li&gt;
&lt;li&gt;Onceï¼šå•æ¬¡æ‰§è¡Œ&lt;/li&gt;
&lt;li&gt;Poolï¼šæ± &lt;/li&gt;
&lt;li&gt;RWMutexï¼šè¯»å†™é”&lt;/li&gt;
&lt;li&gt;WaitGroupï¼šç­‰å¾…ç»„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‡ ä¸ªç±»å‹åˆ†åˆ«å¯¹åº”ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;synccond&#34;&gt;sync.Cond&lt;/h2&gt;
&lt;p&gt;Condå®ç°äº†ä¸€ä¸ªæ¡ä»¶å˜é‡ï¼Œæ˜¯ç­‰å¾…æˆ–å®£å¸ƒä¸€ä¸ªäº‹ä»¶å‘ç”Ÿçš„goroutinesçš„æ±‡åˆç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;é€šä¿—çš„è¯´ï¼Œsync.Condç”¨æ¥åè°ƒé‚£äº›è®¿é—®å…±äº«èµ„æºçš„goroutineï¼Œå½“å…±äº«èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥è¢«é˜»å¡goroutineã€‚&lt;/p&gt;
&lt;p&gt;sync.Cond ç»å¸¸ç”¨åœ¨å¤šä¸ª goroutine ç­‰å¾…ä¸€ä¸ª goroutine é€šçŸ¥ï¼ˆäº‹ä»¶å‘ç”Ÿï¼‰çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;syncmap&#34;&gt;sync.Map&lt;/h2&gt;
&lt;p&gt;Mapå°±åƒGoä¸­çš„&lt;code&gt;map[interface{}]interface{}&lt;/code&gt;ï¼Œä½†å¯¹äºå¤šä¸ªgoroutineçš„å¹¶å‘ä½¿ç”¨æ˜¯å®‰å…¨çš„ï¼Œä¸éœ€è¦é¢å¤–çš„é”æˆ–åè°ƒã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨map + sync.Mutexæˆ–è€…sync.RWMutexçš„æ–¹å¼ä¹Ÿå¯ä»¥å®ç°ä¸sync.Mapç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†æ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œsync.Mapå…·æœ‰æ›´é«˜çš„æ€§èƒ½ï¼š&lt;/p&gt;
&lt;p&gt;Mapç±»å‹é’ˆå¯¹ä¸¤ç§å¸¸è§ç”¨ä¾‹è¿›è¡Œäº†ä¼˜åŒ–ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“ç»™å®škeyçš„æ¡ç›®ä»…è¢«å†™å…¥ä¸€æ¬¡å´è¢«è¯»å–å¤šæ¬¡æ—¶ï¼Œä¾‹å¦‚åœ¨ä»…å¢é•¿çš„é«˜é€Ÿç¼“å­˜ä¸­&lt;/li&gt;
&lt;li&gt;å½“å¤šä¸ªgoroutineè¯»å–ï¼Œå†™å…¥å’Œè¦†ç›–çš„keyéƒ½ä¸ç›¸å…³æ—¶&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œä¸ä¸å•ç‹¬çš„Mutexæˆ–RWMutex + map ç›¸æ¯”ï¼Œä½¿ç”¨Mapå¯ä»¥æ˜¾ç€å‡å°‘é”äº‰ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;syncmutex&#34;&gt;sync.Mutex&lt;/h2&gt;
&lt;p&gt;Mutexæ˜¯ä¸€ä¸ªç›¸äº’æ’æ–¥çš„é”ã€‚Mutexçš„é›¶å€¼æ˜¯ä¸€ä¸ªè§£é”çš„Mutexã€‚&lt;/p&gt;
&lt;p&gt;å½“è°ƒç”¨Lockæ–¹æ³•è¿›è¡ŒåŠ é”æ—¶ï¼Œå¦‚æœé”å·²åœ¨ä½¿ç”¨ä¸­ï¼Œåˆ™goroutineä¼šé˜»å¡ï¼Œç›´åˆ°é”å¯ç”¨ä¸ºæ­¢ã€‚
å½“è°ƒç”¨UnLockæ–¹æ³•è¿›è¡Œè§£é”æ—¶ï¼Œå¦‚æœé”æ²¡æœ‰åœ¨ä½¿ç”¨ï¼Œåˆ™ä¼šå‡ºç°è¿è¡Œæ—¶é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;é”å®šçš„äº’æ–¥é”ä¸ç‰¹å®šçš„goroutineæ²¡æœ‰å…³è”ã€‚å…è®¸ä¸€ä¸ªgoroutineé”å®šMutexï¼Œç„¶åå®‰æ’å¦ä¸€ä¸ªgoroutineå¯¹å…¶è¿›è¡Œè§£é”ã€‚&lt;/p&gt;
&lt;h2 id=&#34;syncrwmutex&#34;&gt;sync.RWMutex&lt;/h2&gt;
&lt;p&gt;RWMutexæ˜¯ä¸€ä¸ªè¯»å†™å™¨ç›¸äº’æ’æ–¥çš„é”ã€‚
è¯¥é”å¯ä»¥ç”±ä»»æ„æ•°é‡çš„è¯»è€…æˆ–å•ä¸€çš„å†™è€…æŒæœ‰ã€‚RWMutexçš„é›¶å€¼æ˜¯ä¸€ä¸ªè§£é”çš„mutexã€‚&lt;/p&gt;
&lt;p&gt;è¯»è¯»ä¸äº’æ–¥ï¼Œè¯»å†™äº’æ–¥ï¼Œå†™å†™äº’æ–¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;synconce&#34;&gt;sync.Once&lt;/h2&gt;
&lt;p&gt;Onceçš„Do(f)æ–¹æ³•ä¿è¯åªè¿è¡Œä¸€æ¬¡ï¼Œå³ä½¿få‘ç”Ÿpanicã€‚
è¿™å¸¸ç”¨åœ¨å•ä¾‹æ¨¡å¼ï¼Œé…ç½®æ–‡ä»¶åŠ è½½ï¼Œåˆå§‹åŒ–è¿™äº›åœºæ™¯ä¸‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;syncpool&#34;&gt;sync.Pool&lt;/h2&gt;
&lt;p&gt;Poolæ˜¯ä¸€ç»„å¯ä»¥å•ç‹¬ä¿å­˜å’Œæ£€ç´¢çš„ä¸´æ—¶å¯¹è±¡ã€‚
å‚¨å­˜åœ¨æ± å­é‡Œçš„ä»»ä½•å¯¹è±¡éƒ½å¯èƒ½åœ¨ä»»ä½•æ—¶å€™è¢«è‡ªåŠ¨åˆ é™¤ï¼Œè€Œæ— éœ€é€šçŸ¥ã€‚
æ± å¯ä»¥å®‰å…¨åœ°åŒæ—¶è¢«å¤šä¸ªgoroutineä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;Poolçš„ä½œç”¨æ˜¯ç¼“å­˜å·²åˆ†é…ä½†æœªä½¿ç”¨çš„é¡¹ç›®ï¼Œä»¥ä¾¿ä»¥åå†ä½¿ç”¨ï¼Œå‡è½»åƒåœ¾æ”¶é›†å™¨çš„å‹åŠ›ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä½¿å»ºç«‹é«˜æ•ˆã€çº¿ç¨‹å®‰å…¨çš„è‡ªç”±åˆ—è¡¨å˜å¾—å®¹æ˜“ã€‚&lt;/p&gt;
&lt;p&gt;æ± çš„ä¸€ä¸ªé€‚å½“çš„ç”¨é€”æ˜¯ç®¡ç†ä¸€ç»„ä¸´æ—¶é¡¹ç›®ï¼Œè¿™äº›ä¸´æ—¶é¡¹ç›®åœ¨åŒ…çš„ç‹¬ç«‹å®¢æˆ·ç«¯ä¹‹é—´é»˜é»˜åœ°å…±äº«ï¼Œå¹¶å¯èƒ½è¢«é‡å¤ä½¿ç”¨ã€‚Poolæä¾›äº†ä¸€ç§åœ¨è®¸å¤šå®¢æˆ·ç«¯ä¹‹é—´åˆ†æ‘Šåˆ†é…å¼€é”€çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼ŒPoolå¹¶ä¸é€‚ç”¨äºä¸€äº›çŸ­å‘½çš„å¯¹è±¡æ± åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸å½“äºæ‹¿å‡ºæ¥ï¼Œåšæ“ä½œï¼Œå†æ”¾å›å»ï¼Œæ“ä½œè¿‡çš„ä¸œè¥¿æ”¾å›å»çš„æ—¶å€™æ˜¯å•¥æ ·ï¼Œæ‹¿å‡ºæ¥çš„æ—¶å€™å°±æ˜¯å•¥æ ·çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‹¿å‡ºæ¥ç”¨çš„æ—¶å€™éœ€è¦åˆå§‹åŒ–æ•°æ®æˆ–è€…æ¸…ç©ºã€‚
å¦‚Ginçš„æºç ï¼š&lt;a href=&#34;https://github.com/gin-gonic/gin/blob/v1.7.1/gin.go#L439&#34;&gt;https://github.com/gin-gonic/gin/blob/v1.7.1/gin.go#L439&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ServeHTTP conforms to the http.Handler interface.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Engine&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;ServeHTTP&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ResponseWriter&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Request&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// get Context from pool
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;pool&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;().(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// reset
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;writermem&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;reset&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Request&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;reset&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// use c
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;handleHTTPRequest&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// put back
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;pool&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Put&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;syncwaitgroup&#34;&gt;sync.WaitGroup&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸ªWaitGroupç­‰å¾…ä¸€ä¸ªgoroutineçš„é›†åˆå®Œæˆã€‚
ä¸»çš„goroutineè°ƒç”¨Addæ¥è®¾ç½®è¦ç­‰å¾…çš„goroutineçš„æ•°é‡ã€‚
ç„¶åæ¯ä¸ªgoroutineè¿è¡Œï¼Œå®Œæˆåè°ƒç”¨Doneã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶ï¼Œå¯ä»¥ç”¨Waitæ¥é˜»å¡ï¼Œç›´åˆ°æ‰€æœ‰çš„goroutineéƒ½å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æ›´æ–°äº2021/05/12 23:45&lt;/em&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>æ·±æ‹·è´ä¹‹å¾ªç¯å¼•ç”¨</title>
      <link>http://hindung.cn/posts/16/</link>
      <pubDate>Sat, 08 May 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/16/</guid>
      <description>é¢˜ç›® å®ç°å¦‚ä¸‹ç»“æ„ä½“çš„æ·±æ‹·è´ã€‚
type Node struct { 	Data int 	Fields []*Node } å³æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¹Ÿéœ€è¦Copyä¸€ä»½ã€‚
è§£æ è§‚å¯Ÿç»“æ„ä½“ï¼Œç”±äºFieldså­—æ®µé‡Œå­˜æ”¾çš„æ˜¯æŒ‡å‘Nodeç»“æ„ä½“çš„æŒ‡é’ˆåˆ‡ç‰‡ï¼Œæ·±æ‹·è´æ—¶è¦è€ƒè™‘å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œå¦‚ï¼š
struct a :  data: 1  fields: b, c struct b:  data: 2  fields: c struct c:  data: 3  fields: a // è¿™é‡Œå¾ªç¯å¼•ç”¨äº†aï¼Œ c-&amp;gt;a-&amp;gt;b, c-&amp;gt;a å¯ä»¥è€ƒè™‘ä½¿ç”¨map[*Node]*Nodeæ¥åˆ¤æ–­æ˜¯å¦æœ‰ç¯çš„æƒ…å†µï¼Œå³ç”¨map[src] = dstæ¥ä¿å­˜æ‹·è´è¿‡çš„èŠ‚ç‚¹ã€‚
ä»£ç  ä»£ç å¦‚ä¸‹ï¼š
package main  import ( 	&amp;#34;go/ast&amp;#34; 	&amp;#34;go/token&amp;#34; )  type Node struct { 	Data int 	Fields []*Node }  // deep copy var M map[*Node]*Node func Dup(src *Node) *Node { 	if src == nil { 	return nil 	} 	node := &amp;amp;Node{ 	Data: src.</description>
      <content>&lt;h2 id=&#34;é¢˜ç›®&#34;&gt;é¢˜ç›®&lt;/h2&gt;
&lt;p&gt;å®ç°å¦‚ä¸‹ç»“æ„ä½“çš„æ·±æ‹·è´ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt; []&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å³æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¹Ÿéœ€è¦Copyä¸€ä»½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ&#34;&gt;è§£æ&lt;/h2&gt;
&lt;p&gt;è§‚å¯Ÿç»“æ„ä½“ï¼Œç”±äºFieldså­—æ®µé‡Œå­˜æ”¾çš„æ˜¯æŒ‡å‘Nodeç»“æ„ä½“çš„æŒ‡é’ˆåˆ‡ç‰‡ï¼Œæ·±æ‹·è´æ—¶è¦è€ƒè™‘å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œå¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;fields&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;fields&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;fields&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// è¿™é‡Œå¾ªç¯å¼•ç”¨äº†aï¼Œ c-&amp;gt;a-&amp;gt;b, c-&amp;gt;a
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥è€ƒè™‘ä½¿ç”¨&lt;code&gt;map[*Node]*Node&lt;/code&gt;æ¥åˆ¤æ–­æ˜¯å¦æœ‰ç¯çš„æƒ…å†µï¼Œå³ç”¨&lt;code&gt;map[src] = dst&lt;/code&gt;æ¥ä¿å­˜æ‹·è´è¿‡çš„èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç &#34;&gt;ä»£ç &lt;/h2&gt;
&lt;p&gt;ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;go/ast&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;go/token&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt; []&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// deep copy
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;M&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Dup&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;M&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fields&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;{}&lt;span style=&#34;color:#75715e&#34;&gt;//make([]*Node, len(src.Fields))
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&amp;lt;len(&lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;);&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;tmp&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// if exist, is loop
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;M&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;]]; &lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#a6e22e&#34;&gt;tmp&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			} &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#a6e22e&#34;&gt;tmp&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;Dup&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;tmp&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;fields&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;fields&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;tmp&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;fields&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;()  {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;M&lt;/span&gt; = make(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;a1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;:   &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;a2&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;:   &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;a3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;:   &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;: []&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;a1&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;a2&lt;/span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;a1&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;a1&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;a3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;da3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Dup&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;a3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// print ast tree
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;ast&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;token&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewFileSet&lt;/span&gt;(),&lt;span style=&#34;color:#a6e22e&#34;&gt;a3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;ast&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;token&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewFileSet&lt;/span&gt;(),&lt;span style=&#34;color:#a6e22e&#34;&gt;da3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡ºå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// a3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;  .  &lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;  .  &lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;: []&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;  .  .  &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;: &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;  .  .  .  &lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;  .  .  .  &lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;: []&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;  .  .  .  .  &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;: &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;obj&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;@&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// æŒ‡å‘äº†0è¡Œçš„obj
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;  .  .  .  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;  .  .  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;  .  .  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;: &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;  .  .  .  &lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;  .  .  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;  .  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// da3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;  .  &lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;  .  &lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;: []&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;  .  .  &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;: &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;  .  .  .  &lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;  .  .  .  &lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;: []&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;  .  .  .  .  &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;: &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;obj&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;@&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)  &lt;span style=&#34;color:#75715e&#34;&gt;// åŒæ ·æŒ‡å‘äº†0è¡Œçš„obj
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;  .  .  .  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;  .  .  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;  .  .  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;: &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;  .  .  .  &lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;  .  .  .  &lt;span style=&#34;color:#a6e22e&#34;&gt;Fields&lt;/span&gt;: []&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;  .  .  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;  .  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å†æ¥è°ƒè¯•çœ‹çœ‹è¿è¡Œæ—¶çš„åœ°å€æƒ…å†µï¼š
a3çš„ä¿¡æ¯å¦‚ä¸‹ï¼š
&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/9dc4c374gy1gqb4iv6rl9j20iw0fr3z4.jpg&#34; alt=&#34;bd51ff320eef1f13f01579625118d58.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;da3çš„ä¿¡æ¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/9dc4c374gy1gqb4k98ajbj20kf0ij753.jpg&#34; alt=&#34;55bb9aa7a950f59e1bf2d73719fe209.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œda3é‡Œé¢çš„åœ°å€ä¸a3å‡ä¸ä¸€æ ·ï¼Œä½†æ˜¯å€¼ä¿¡æ¯æ˜¯ä¸€æ ·çš„ã€‚&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>LRU ç¼“å­˜æœºåˆ¶</title>
      <link>http://hindung.cn/posts/15/</link>
      <pubDate>Thu, 06 May 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/15/</guid>
      <description>é¢˜ç›® 146. LRU ç¼“å­˜æœºåˆ¶
è§£æ ç”±äºè¦æ±‚è¦ç”¨O(1)çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ‰€ä»¥è¦é‡‡ç”¨åŒå‘é“¾è¡¨ï¼‹mapçš„æ•°æ®ç»“æ„è§£ç­”ã€‚
å…·ä½“æºç å¦‚ä¸‹ï¼š
package main  import &amp;#34;fmt&amp;#34;  type LRUCache struct { 	M map[int]*Node 	Cap int 	Size int 	Head, Tail *Node }  type Node struct { 	Key, Value int 	Pre, Next *Node }  // init LRUCache func Constructor(capacity int) LRUCache { 	l := LRUCache{ 	M: map[int]*Node{}, 	Cap: capacity, 	Size: 0, 	Head: &amp;amp;Node{ 	Key: 0, 	Value: 0, 	Pre: nil, 	Next: nil, 	}, 	Tail: &amp;amp;Node{ 	Key: 0, 	Value: 0, 	Pre: nil, 	Next: nil, 	}, 	} 	// nil&amp;lt;-head&amp;lt;-&amp;gt;tail-&amp;gt; 	l.</description>
      <content>&lt;h2 id=&#34;é¢˜ç›®&#34;&gt;é¢˜ç›®&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://leetcode-cn.com/problems/lru-cache/&#34;&gt;146. LRU ç¼“å­˜æœºåˆ¶&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;è§£æ&#34;&gt;è§£æ&lt;/h2&gt;
&lt;p&gt;ç”±äºè¦æ±‚è¦ç”¨O(1)çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ‰€ä»¥è¦é‡‡ç”¨åŒå‘é“¾è¡¨ï¼‹mapçš„æ•°æ®ç»“æ„è§£ç­”ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“æºç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;LRUCache&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;M&lt;/span&gt;          &lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Cap&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Size&lt;/span&gt;       &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Head&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;Tail&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Key&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// init LRUCache
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Constructor&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;capacity&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;LRUCache&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;LRUCache&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;M&lt;/span&gt;:    &lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;{},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Cap&lt;/span&gt;:  &lt;span style=&#34;color:#a6e22e&#34;&gt;capacity&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Size&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Head&lt;/span&gt;: &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Key&lt;/span&gt;:   &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt;:   &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;:  &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Tail&lt;/span&gt;: &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Key&lt;/span&gt;:   &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt;:   &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;:  &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// nil&amp;lt;-head&amp;lt;-&amp;gt;tail-&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Head&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Tail&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Tail&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Head&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;LRUCache&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// get node and move to head next
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;M&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt;]; &lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Head&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;pre&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;next&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;pre&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;next&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Head&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Head&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Head&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Head&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;LRUCache&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Put&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// if exist, do update, and move to head next
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Head&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// if not exist, move to head next
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Key&lt;/span&gt;:   &lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;next&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Head&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;next&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Head&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;next&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Head&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Size&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Tail&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// size++
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Size&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// insert to map
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;M&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// if size &amp;gt; cap, tail move to pre,and size--
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Size&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Cap&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;rm&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Tail&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Tail&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;rm&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;rm&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pre&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Tail&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// delete from map
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		delete(&lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;M&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;rm&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Key&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// clean value
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;rm&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Size&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;--&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * Your LRUCache object will be instantiated and called as such:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * obj := Constructor(capacity);
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * param_1 := obj.Get(key);
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * obj.Put(key,value);
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;lRUCache&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Constructor&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;lRUCache&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Put&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// ç¼“å­˜æ˜¯ {1=1}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;lRUCache&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Put&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// ç¼“å­˜æ˜¯ {1=1, 2=2}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;lRUCache&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;))    &lt;span style=&#34;color:#75715e&#34;&gt;// è¿”å› 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;lRUCache&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Put&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 2 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {1=1, 3=3}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;lRUCache&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;))    &lt;span style=&#34;color:#75715e&#34;&gt;// è¿”å› -1 (æœªæ‰¾åˆ°)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;lRUCache&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Put&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 1 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {4=4, 3=3}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;lRUCache&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;))    &lt;span style=&#34;color:#75715e&#34;&gt;// è¿”å› -1 (æœªæ‰¾åˆ°)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;lRUCache&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;))    &lt;span style=&#34;color:#75715e&#34;&gt;// è¿”å› 3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;lRUCache&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;))    &lt;span style=&#34;color:#75715e&#34;&gt;// è¿”å› 4
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content>
    </item>
    
    <item>
      <title>Goæºç è§£è¯»ä¹‹sync/atomic</title>
      <link>http://hindung.cn/posts/14/</link>
      <pubDate>Thu, 29 Apr 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/14/</guid>
      <description>æ³¨ï¼šgo version 1.16.x
Overview ä»ç½‘ç«™pkg.go.devä¸Šå¯ä»¥çœ‹åˆ°ï¼Œå¯¹åº”çš„è§£é‡Šã€‚
atomicåŒ…æä¾›äº†ç”¨äºå®ç°åŒæ­¥ç®—æ³•çš„ä½çº§åŸå­å†…å­˜åŸè¯­ã€‚
å¯ä»¥åˆ†ä¸ºå‡ ç±»æ“ä½œï¼š
 Addæ“ä½œï¼šåŠ å‡æ“ä½œ CASæ“ä½œï¼šå…ˆæ¯”è¾ƒåèµ‹å€¼æ“ä½œ Swapæ“ä½œï¼šèµ‹å€¼æ“ä½œ Loadæ“ä½œï¼šä»æŸä¸ªåœ°å€ä¸­å–å€¼ Storeæ“ä½œï¼šå¾€æŸä¸ªåœ°å€èµ‹å€¼ Valueç±»å‹ï¼šå¯¹ä»»æ„ç±»å‹çš„Load/Storeæ“ä½œå°è£…  æ“ä½œåˆ†ç±» Addæ“ä½œ ç”±AddTå‡½æ•°å®ç°çš„åŠ æ³•æ“ä½œåœ¨åŸå­ä¸Šç­‰æ•ˆäºï¼š
*addr += delta \\ åŠ ä¸Šæ­¥é•¿ æ­£è´Ÿæ•°éƒ½å¯ä»¥ return *addr \\ åå›åŠ åçš„ç»“æœ ç›¸å…³çš„æ–¹æ³•æœ‰ï¼š
func AddInt32(addr *int32, delta int32) (new int32) func AddUint32(addr *uint32, delta uint32) (new uint32) func AddInt64(addr *int64, delta int64) (new int64) func AddUint64(addr *uint64, delta uint64) (new uint64) func AddUintptr(addr *uintptr, delta uintptr) (new uintptr) CASæ“ä½œ CASå³CompareAndSwapï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦å°±æ˜¯å…ˆæ¯”è¾ƒä¸€ä¸‹å½“å‰ä¼ å…¥çš„åœ°å€çš„å€¼æ˜¯å¦å’Œ old å€¼ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œå°±èµ‹å€¼æ–°å€¼è¿”å› trueï¼Œå¦‚æœä¸ç›¸ç­‰å°±è¿”å› false.</description>
      <content>&lt;p&gt;&lt;em&gt;æ³¨ï¼šgo version 1.16.x&lt;/em&gt;&lt;/p&gt;
&lt;h1 id=&#34;overview&#34;&gt;Overview&lt;/h1&gt;
&lt;p&gt;ä»ç½‘ç«™&lt;a href=&#34;https://pkg.go.dev/sync/atomic&#34;&gt;pkg.go.dev&lt;/a&gt;ä¸Šå¯ä»¥çœ‹åˆ°ï¼Œå¯¹åº”çš„è§£é‡Šã€‚&lt;/p&gt;
&lt;p&gt;atomicåŒ…æä¾›äº†ç”¨äºå®ç°åŒæ­¥ç®—æ³•çš„ä½çº§åŸå­å†…å­˜åŸè¯­ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥åˆ†ä¸ºå‡ ç±»æ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Addæ“ä½œï¼šåŠ å‡æ“ä½œ&lt;/li&gt;
&lt;li&gt;CASæ“ä½œï¼šå…ˆæ¯”è¾ƒåèµ‹å€¼æ“ä½œ&lt;/li&gt;
&lt;li&gt;Swapæ“ä½œï¼šèµ‹å€¼æ“ä½œ&lt;/li&gt;
&lt;li&gt;Loadæ“ä½œï¼šä»æŸä¸ªåœ°å€ä¸­å–å€¼&lt;/li&gt;
&lt;li&gt;Storeæ“ä½œï¼šå¾€æŸä¸ªåœ°å€èµ‹å€¼&lt;/li&gt;
&lt;li&gt;Valueç±»å‹ï¼šå¯¹ä»»æ„ç±»å‹çš„Load/Storeæ“ä½œå°è£…&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;æ“ä½œåˆ†ç±»&#34;&gt;æ“ä½œåˆ†ç±»&lt;/h1&gt;
&lt;h2 id=&#34;addæ“ä½œ&#34;&gt;Addæ“ä½œ&lt;/h2&gt;
&lt;p&gt;ç”±AddTå‡½æ•°å®ç°çš„åŠ æ³•æ“ä½œåœ¨åŸå­ä¸Šç­‰æ•ˆäºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;delta&lt;/span&gt;  &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\\&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;åŠ ä¸Šæ­¥é•¿&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;æ­£è´Ÿæ•°éƒ½å¯ä»¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\\&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;åå›åŠ åçš„ç»“æœ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç›¸å…³çš„æ–¹æ³•æœ‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddInt32&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;delta&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddUint32&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;delta&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddInt64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;delta&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddUint64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;delta&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddUintptr&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;delta&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;casæ“ä½œ&#34;&gt;CASæ“ä½œ&lt;/h2&gt;
&lt;p&gt;CASå³CompareAndSwapï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦å°±æ˜¯å…ˆæ¯”è¾ƒä¸€ä¸‹å½“å‰ä¼ å…¥çš„åœ°å€çš„å€¼æ˜¯å¦å’Œ old å€¼ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œå°±èµ‹å€¼æ–°å€¼è¿”å› trueï¼Œå¦‚æœä¸ç›¸ç­‰å°±è¿”å› false.&lt;/p&gt;
&lt;p&gt;åˆ©ç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥å®ç°é”æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸å…³çš„æ–¹æ³•æœ‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CompareAndSwapInt32&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;swapped&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CompareAndSwapInt64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;swapped&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CompareAndSwapUint32&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;swapped&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CompareAndSwapUint64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;swapped&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CompareAndSwapUintptr&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;swapped&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CompareAndSwapPointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;swapped&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»æºç &lt;a href=&#34;https://go.googlesource.com/go/+/go1.16.3/src/runtime/internal/atomic/asm_amd64.s#17&#34;&gt;runtime/internal/atomic/asm_amd64.s&lt;/a&gt;ä¸­å¯ä»¥çœ‹åˆ°CASå¯¹åº”çš„æ±‡ç¼–æŒ‡ä»¤å®ç°ã€‚
å¦‚&lt;code&gt;CompareAndSwapInt32&lt;/code&gt;æ–¹æ³•çš„å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// bool Cas(int32 *val, int32 old, int32 new)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Atomically:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//	if(*val == old){
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//		*val = new;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//		return 1;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//	} else
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//		return 0;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;TEXT&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;âˆ•&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;internal&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;âˆ•&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;atomic&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;Â·&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Cas&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;),&lt;span style=&#34;color:#a6e22e&#34;&gt;NOSPLIT&lt;/span&gt;,&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;17&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;FP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;BX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVL&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;FP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVL&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;FP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;LOCK&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;CMPXCHGL&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;BX&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;SETEQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ret&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;FP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;RET&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»æ±‡ç¼–æŒ‡ä»¤å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨äº†CPUçš„&lt;code&gt;LOCK&lt;/code&gt;æŒ‡ä»¤æ¥ä¿è¯åŸå­çš„æ“ä½œï¼Œè€Œ&lt;code&gt;CMPXCHGL&lt;/code&gt;æŒ‡ä»¤åˆ™æ˜¯CPUçº§åˆ«å®ç°çš„CASæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å…³äºLOCKæŒ‡ä»¤ï¼Œå¯ä»¥å‘æ•£åˆ°CPUæŒ‡ä»¤çš„é”æ€»çº¿ã€é”ç¼“å­˜ç­‰å†…å®¹ï¼Œè€ŒCPUä¼šæœ‰å¤šçº§ç¼“å­˜ï¼Œè¿™å°±éœ€è¦é€šè¿‡ç¼“å­˜ä¸€è‡´æ€§å»ä¿è¯åŸå­æ€§ã€‚è€ŒMESIæ˜¯ç¼“å­˜ä¸€è‡´æ€§åè®®çš„ä¸€ç§å®ç°æ–¹æ³•ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;casä¸èƒ½è§£å†³çš„é—®é¢˜&#34;&gt;CASä¸èƒ½è§£å†³çš„é—®é¢˜&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;CASåœ¨å…±äº«èµ„æºç«äº‰æ¯”è¾ƒæ¿€çƒˆçš„æ—¶å€™ï¼Œæ¯ä¸ªgoroutineä¼šå®¹æ˜“å¤„äºè‡ªæ—‹çŠ¶æ€ï¼Œå½±å“æ•ˆç‡ï¼Œåœ¨ç«äº‰æ¿€çƒˆçš„æ—¶å€™æ¨èä½¿ç”¨é”ã€‚&lt;/li&gt;
&lt;li&gt;æ— æ³•è§£å†³ABAé—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ABAé—®é¢˜æ˜¯æ— é”ç»“æ„å®ç°ä¸­å¸¸è§çš„ä¸€ç§é—®é¢˜ï¼Œå¯åŸºæœ¬è¡¨è¿°ä¸ºï¼š
è¿›ç¨‹P1è¯»å–äº†ä¸€ä¸ªæ•°å€¼A
P1è¢«æŒ‚èµ·(æ—¶é—´ç‰‡è€—å°½ã€ä¸­æ–­ç­‰)ï¼Œè¿›ç¨‹P2å¼€å§‹æ‰§è¡Œ
P2ä¿®æ”¹æ•°å€¼Aä¸ºæ•°å€¼Bï¼Œç„¶ååˆä¿®æ”¹å›A
P1è¢«å”¤é†’ï¼Œæ¯”è¾ƒåå‘ç°æ•°å€¼Aæ²¡æœ‰å˜åŒ–ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;swapæ“ä½œ&#34;&gt;Swapæ“ä½œ&lt;/h2&gt;
&lt;p&gt;Swapæ“ä½œä¼šæ‰§è¡Œäº¤æ¢æ“ä½œï¼Œå¹¶ä¸”è¿”å›åŸæ¥çš„å€¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// å¤åˆ¶åŸæ¥çš„å€¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// èµ‹å€¼ä¸ºæ–°çš„å€¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;   &lt;span style=&#34;color:#75715e&#34;&gt;// è¿”å›åŸæ¥çš„å€¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwapInt32&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwapInt64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwapPointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwapUint32&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwapUint64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwapUintptr&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;loadæ“ä½œ&#34;&gt;Loadæ“ä½œ&lt;/h2&gt;
&lt;p&gt;ä»æŸä¸ªåœ°å€é‡Œè·å–å¯¹åº”çš„å€¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ–¹æ³•ç­¾åï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;LoadInt32&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;LoadInt64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;LoadPointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;LoadUint32&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;LoadUint64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;LoadUintptr&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;storeæ“ä½œ&#34;&gt;Storeæ“ä½œ&lt;/h2&gt;
&lt;p&gt;å¾€æŸä¸ªåœ°å€é‡Œèµ‹å€¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ–¹æ³•ç­¾åï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StoreInt32&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StoreInt64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StorePointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StoreUint32&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StoreUint64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StoreUintptr&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;valueç±»å‹&#34;&gt;Valueç±»å‹&lt;/h2&gt;
&lt;p&gt;ä»æºç &lt;a href=&#34;https://go.googlesource.com/go/+/go1.16.3/src/sync/atomic/value.go#16&#34;&gt;https://go.googlesource.com/go/+/go1.16.3/src/sync/atomic/value.go#16&lt;/a&gt;å¯ä»¥çœ‹åˆ°ï¼š&lt;/p&gt;
&lt;p&gt;å®šä¹‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Load&lt;/span&gt;() (&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Store&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}) 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æºç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Copyright 2014 The Go Authors. All rights reserved.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Use of this source code is governed by a BSD-style
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// license that can be found in the LICENSE file.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;atomic&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;unsafe&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// A Value provides an atomic load and store of a consistently typed value.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// The zero value for a Value returns nil from Load.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Once Store has been called, a Value must not be copied.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// A Value must not be copied after first use.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ifaceWords is interface{} internal representation.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ifaceWords&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Load returns the value set by the most recent Store.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// It returns nil if there has been no call to Store for this Value.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Load&lt;/span&gt;() (&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;vp&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ifaceWords&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;LoadPointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;vp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ^uintptr(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// First store not yet completed.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;LoadPointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;vp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;xp&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ifaceWords&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;xp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;xp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Store sets the value of the Value to x.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// All calls to Store for a given Value must use values of the same concrete type.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Store of an inconsistent type panics, as does Store(nil).
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Store&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		panic(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync/atomic: store of nil value into Value&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;vp&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ifaceWords&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;xp&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ifaceWords&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;LoadPointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;vp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// Attempt to start first store.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// Disable preemption so that other goroutines can use
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// active spin wait to wait for completion; and so that
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// GC does not see the fake type accidentally.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;runtime_procPin&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;CompareAndSwapPointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;vp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(^uintptr(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;))) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#a6e22e&#34;&gt;runtime_procUnpin&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#66d9ef&#34;&gt;continue&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// Complete first store.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;StorePointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;vp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;xp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;StorePointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;vp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;xp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;runtime_procUnpin&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ^uintptr(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// First store in progress. Wait.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// Since we disable preemption around the first store,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// we can wait with active spinning.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;continue&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// First store completed. Check type and overwrite data.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;xp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			panic(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync/atomic: store of inconsistently typed value into Value&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;StorePointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;vp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;xp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Disable/enable preemption, implemented in runtime.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime_procPin&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime_procUnpin&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;åº”ç”¨&#34;&gt;åº”ç”¨&lt;/h1&gt;
&lt;p&gt;atomic.Valueè¿™ç§ç±»å‹å¸¸ç”¨äº&lt;em&gt;è¯»å¤šå†™å°‘&lt;/em&gt;çš„åœºæ™¯ï¼Œæ¯”å¦‚é…ç½®ç»“æ„ä½“çš„çƒ­æ›´æ–°ç­‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¾‹å­cowcopy-on-write&#34;&gt;ä¾‹å­COW(Copy On Write)&lt;/h2&gt;
&lt;p&gt;å†™æ—¶å¤åˆ¶ï¼šï¼ˆè‹±è¯­ï¼šCopy-on-writeï¼Œç®€ç§° COWï¼‰æ˜¯ä¸€ç§è®¡ç®—æœºç¨‹åºè®¾è®¡é¢†åŸŸçš„ä¼˜åŒ–ç­–ç•¥ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå¦‚æœæœ‰å¤šä¸ªè°ƒç”¨è€…ï¼ˆcallersï¼‰åŒæ—¶è¯·æ±‚ç›¸åŒèµ„æºï¼ˆå¦‚å†…å­˜æˆ–ç£ç›˜ä¸Šçš„æ•°æ®å­˜å‚¨ï¼‰ï¼Œä»–ä»¬ä¼šå…±åŒè·å–ç›¸åŒçš„æŒ‡é’ˆæŒ‡å‘ç›¸åŒçš„èµ„æºï¼Œç›´åˆ°æŸä¸ªè°ƒç”¨è€…è¯•å›¾ä¿®æ”¹èµ„æºçš„å†…å®¹æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šçœŸæ­£å¤åˆ¶ä¸€ä»½ä¸“ç”¨å‰¯æœ¬ï¼ˆprivate copyï¼‰ç»™è¯¥è°ƒç”¨è€…ï¼Œè€Œå…¶ä»–è°ƒç”¨è€…æ‰€è§åˆ°çš„æœ€åˆçš„èµ„æºä»ç„¶ä¿æŒä¸å˜ã€‚è¿™è¿‡ç¨‹å¯¹å…¶ä»–çš„è°ƒç”¨è€…éƒ½æ˜¯é€æ˜çš„ã€‚æ­¤ä½œæ³•ä¸»è¦çš„ä¼˜ç‚¹æ˜¯å¦‚æœè°ƒç”¨è€…æ²¡æœ‰ä¿®æ”¹è¯¥èµ„æºï¼Œå°±ä¸ä¼šæœ‰å‰¯æœ¬ï¼ˆprivate copyï¼‰è¢«åˆ›å»ºï¼Œå› æ­¤å¤šä¸ªè°ƒç”¨è€…åªæ˜¯è¯»å–æ“ä½œæ—¶å¯ä»¥å…±äº«åŒä¸€ä»½èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E5%AF%AB%E5%85%A5%E6%99%82%E8%A4%87%E8%A3%BD&#34;&gt;ç»´åŸºç™¾ç§‘&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;é€šä¿—çš„è®²å°±æ˜¯ï¼Œéœ€è¦å†™å…¥çš„æ—¶å€™æˆ‘å…ˆæŠŠè€çš„æ•°æ®å¤åˆ¶ä¸€ä»½åˆ°ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œç„¶åå†å†™å…¥æ–°çš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å­˜åœ¨çš„é—®é¢˜ï¼šè€çš„å¯¹è±¡å¯èƒ½ä¼šè¢«å…¶ä»–goroutineä½¿ç”¨è€Œå¯¼è‡´ä¸å›ç«‹å³è¢«åƒåœ¾å›æ”¶ï¼Œå¯¹äºå¤šå†™çš„åœºæ™¯ä¼šäº§ç”Ÿå¤§é‡å‰¯æœ¬ï¼Œä»è€Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šæ— é”ï¼ˆæˆ–è€…è¯´å¾ˆè½»é‡çš„é”ï¼‰ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šæœ‰ goroutine çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¹¶ä¸”åœ¨è¯»å–çš„æ—¶å€™å¤§å®¶éƒ½è¯»å–çš„ç›¸åŒçš„å‰¯æœ¬æ‰€ä»¥æ€§èƒ½ä¸Šå›å¥½ä¸€äº›ã€‚&lt;/p&gt;
&lt;p&gt;COW ç­–ç•¥åœ¨ linuxï¼Œ redis ä¸­éƒ½æœ‰å¾ˆå¤šçš„å®è·µã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync/atomic&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Map&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;       &lt;span style=&#34;color:#a6e22e&#34;&gt;atomic&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;//writeMu sync.Mutex
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewMap&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Map&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Map&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;:       &lt;span style=&#34;color:#a6e22e&#34;&gt;atomic&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt;{},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;//writeMu: sync.Mutex{},
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Store&lt;/span&gt;(make(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Map&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;m1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Load&lt;/span&gt;().(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;m1&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Map&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Put&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;//m.writeMu.Lock() // synchronize with other potential writers
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;//defer m.writeMu.Unlock()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;m1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Load&lt;/span&gt;().(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// load current value of the data structure
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;m2&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;)        &lt;span style=&#34;color:#75715e&#34;&gt;// create a new value
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;k&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;m1&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;m2&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;k&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// copy all data from the current object to the new one
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;m2&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// do the update that we need
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Store&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;m2&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// atomically replace the current object with the new one
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// At this point all new readers start working with the new version.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// The old version will be garbage collected once the existing readers
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// (if any) are done with it.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// COW
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewMap&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Put&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;key&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;value&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;key&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content>
    </item>
    
    <item>
      <title>ä½¿ç”¨Goé‡åˆ°çš„å‘</title>
      <link>http://hindung.cn/posts/13/</link>
      <pubDate>Thu, 01 Apr 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/13/</guid>
      <description>for range è¯­å¥ä¸­çš„å€¼ä¼ é€’é—®é¢˜ package main  import &amp;#34;fmt&amp;#34;  var pow = []int{1, 2, 4}  func main() { 	for _, v := range pow { 	v++ 	} 	for _, v := range pow { 	fmt.Println(v) 	} } //out put : 1 2 4 åŸå› ï¼šfor rangeåˆ›å»ºäº†æ¯ä¸ªå…ƒç´ çš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›æ¯ä¸ªå…ƒç´ çš„å¼•ç”¨ã€‚
IPv4ä¸IPv6æ ¼å¼é—®é¢˜Â  Goä¸­IPv4çš„é•¿åº¦å’ŒIPv6çš„é•¿åº¦æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯16Byteå­˜å‚¨ï¼Œæ•…ä¸èƒ½ä½¿ç”¨len()å‡½æ•°å»åŒºåˆ«:
 conn, err := net.Dial(&amp;#34;udp&amp;#34;, &amp;#34;8.9.10.11:2342&amp;#34;) if err != nil {  fmt.Println(&amp;#34;Error&amp;#34;, err) }  localaddr := conn.</description>
      <content>&lt;h2 id=&#34;for-range-è¯­å¥ä¸­çš„å€¼ä¼ é€’é—®é¢˜&#34;&gt;for range è¯­å¥ä¸­çš„å€¼ä¼ é€’é—®é¢˜&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pow&lt;/span&gt; = []&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pow&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pow&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//out put : 1  2  4
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åŸå› ï¼šfor rangeåˆ›å»ºäº†æ¯ä¸ªå…ƒç´ çš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›æ¯ä¸ªå…ƒç´ çš„å¼•ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ipv4ä¸ipv6æ ¼å¼é—®é¢˜&#34;&gt;IPv4ä¸IPv6æ ¼å¼é—®é¢˜Â &lt;/h2&gt;
&lt;p&gt;Goä¸­IPv4çš„é•¿åº¦å’ŒIPv6çš„é•¿åº¦æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯16Byteå­˜å‚¨ï¼Œæ•…ä¸èƒ½ä½¿ç”¨len()å‡½æ•°å»åŒºåˆ«:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;conn&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;net&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Dial&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;udp&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;8.9.10.11:2342&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Error&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;localaddr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;conn&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;LocalAddr&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;net&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ResolveUDPAddr&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;udp&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;localaddr&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ip&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;IP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ip&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(len(&lt;span style=&#34;color:#a6e22e&#34;&gt;ip&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯¦æƒ…è¯·ç‚¹å‡»é“¾æ¥ï¼š&lt;a href=&#34;https://stackoverflow.com/questions/22751035/golang-distinguish-ipv4-ipv6&#34;&gt;golang-distinguish-ipv4-ipv6&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;transportä½¿ç”¨ä¸å½“å¯¼è‡´ä¸èƒ½å…±äº«tcpè¿æ¥æ± è¿›è€Œå¯¼è‡´tcpè¿æ¥è¿‡å¤š&#34;&gt;transportä½¿ç”¨ä¸å½“å¯¼è‡´ä¸èƒ½å…±äº«tcpè¿æ¥æ± ï¼Œè¿›è€Œå¯¼è‡´tcpè¿æ¥è¿‡å¤š&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// åˆå§‹åŒ–ä¸€ä¸ª http.Client
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;getClient&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Client&lt;/span&gt;  {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Client&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Transport&lt;/span&gt;:     &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Transport&lt;/span&gt;{  &lt;span style=&#34;color:#75715e&#34;&gt;// è‡ªå®šä¹‰ Transport
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;TLSClientConfig&lt;/span&gt;:        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;tls&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Config&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;InsecureSkipVerify&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Timeout&lt;/span&gt;:       &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Post&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;url&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) ([]&lt;span style=&#34;color:#66d9ef&#34;&gt;byte&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;client&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;getClient&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewRequest&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;POST&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;url&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;strings&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewReader&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;test&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;httpRet&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;client&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Do&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;httpRet&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Body&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Close&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;body&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;byte&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;body&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;ioutil&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ReadAll&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;httpRet&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Body&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;body&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»£ç å­˜åœ¨é—®é¢˜ï¼š1ã€æ¯æ¬¡å‘è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€æ¬¡è¿æ¥ï¼›2ã€è¯·æ±‚ç»“æŸåæ²¡æœ‰åŠæ—¶é‡Šæ”¾è¿æ¥ï¼›3ã€å¯¼è‡´tcpè¿æ¥æš´æ¶¨&lt;/p&gt;
&lt;p&gt;åŸå› ï¼šå®ä¾‹åŒ–transportæ—¶æ²¡æœ‰å¤„ç†è¿æ¥æ± é—®é¢˜ï¼Œå¯¼è‡´æ¯æ¬¡åˆå§‹åŒ–éƒ½ä¼šä½¿ç”¨æ–°çš„è¿æ¥ã€‚å¦‚æœæ²¡æœ‰é»˜è®¤transportï¼Œå®ä¾‹åŒ–çš„clientä¼šä½¿ç”¨ä¸€ä¸ªdefaultçš„transportï¼Œå¹¶ä¸”å·²ç»å®ç°äº†æ± åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œå¦‚æœè¯·æ±‚çš„bodyæ²¡æœ‰å®Œå…¨è¯»å‡ºï¼Œå°†ä¼šå¯¼è‡´tcpè¿æ¥ä¸èƒ½æœç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é‡ç”Ÿgoroutineæ²¡æœ‰recoverå¯¼è‡´æ•´ä¸ªç¨‹åºé€€å‡º&#34;&gt;é‡ç”Ÿgoroutineæ²¡æœ‰recoverå¯¼è‡´æ•´ä¸ªç¨‹åºé€€å‡º&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ginæ—¶è™½ç„¶ä¼šæœ‰ä¸Šå±‚çš„recoverä¼šå¯¹panicå¼‚å¸¸åšå…œåº•ï¼Œä½†æ˜¯å¯¹äºè‡ªå·±å®šä¹‰çš„goroutineå¦‚æœæ²¡æœ‰åšrecoverå°±ä¼šå¯¼è‡´æ•´ä¸ªç¨‹åºå®æ‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/panic1&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;)  &lt;span style=&#34;color:#75715e&#34;&gt;// åˆ¶é€ ç©ºæŒ‡é’ˆpanicï¼Œè¿™é‡Œä¼šè¢«ginä¸Šå±‚çš„recoverå…œä½ï¼Œä¸ä¼šæ•´ä¸ªç¨‹åºé€€å‡º
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/panic2&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// é‡ç”Ÿ goroutine
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;)  &lt;span style=&#34;color:#75715e&#34;&gt;// è¿™é‡Œä¼šå¯¼è‡´panicï¼Œæ•´ä¸ªç¨‹åºé€€å‡º
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// åº”è¯¥è¿™æ ·
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/panic3&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// é‡ç”Ÿ goroutine
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#75715e&#34;&gt;// å®šä¹‰recoverå…œä½panic
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; recover(); &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;					&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;recover success&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;)  &lt;span style=&#34;color:#75715e&#34;&gt;// è¿™é‡Œä¼šå¯¼è‡´panicï¼Œä¸ä¼šæ•´ä¸ªç¨‹åºé€€å‡º
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	})
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å†…å­˜å¤ç”¨å¯¼è‡´map-keyé‡å¤&#34;&gt;å†…å­˜å¤ç”¨å¯¼è‡´Map Keyé‡å¤&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;unsafe&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;(){
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;//fmt.Printf(&amp;#34;i=%d\n&amp;#34;, i)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; []byte(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;id2&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// å­—é¢å€¼ä¸º id2ï¼Œmapè®¡ç®— hash æ—¶ä½¿ç”¨è¯¥å­—é¢å€¼ï¼Œå³ b çš„å†…å®¹ &amp;#34;id2&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// ä»è€Œ ï¼Œæ¯æ¬¡è®¡ç®—çš„æ˜¯ hash(&amp;#34;id2&amp;#34;)ï¼Œä½†å®é™…å†…å­˜ä¸­çš„å€¼æ˜¯ &amp;#34;id1&amp;#34;ï¼Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// ä»è€Œæ¯æ¬¡ hashéƒ½ä¼šåˆ†é…ä¸åŒçš„æ¡¶å­˜å‚¨ k/vï¼Œä½†å®é™… k çš„å€¼ä¸º &amp;#34;id1&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// *str ç›´æ¥æŒ‡å‘ b çš„å†…å­˜ï¼Œå†è½¬æˆ *stringï¼Œå†å–å€¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;str&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;str&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;] = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;1&amp;#39;&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// ä¿®æ”¹æŒ‡å‘çš„å†…å­˜çš„å€¼ï¼Œå˜ä¸º id1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; []byte(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;id2&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;str&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;, len(&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;id2&amp;#34;&lt;/span&gt;], &lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;id1&amp;#34;&lt;/span&gt;], &lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;str&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// out put
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// map[id1:1 id1:1 id1:1 id1:1 id1:1 id1:1 id1:1 id1:1 id1:1 id1:1] 10 0 0 0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ä¸€äº›é«˜æ€§èƒ½çš„httpæœåŠ¡æ¡†æ¶ä¸­ï¼Œå¦‚&lt;code&gt;fasthttp&lt;/code&gt;ï¼Œç”±äºä¸ºäº†æ€§èƒ½ï¼Œå‡å°‘é‡å¤çš„å†…å­˜åˆ†é…ï¼Œå¾ˆå¤šåœ°æ–¹ä¼šç”¨åˆ°å†…å­˜çš„å¤ç”¨ï¼Œå³é‡‡ç”¨äº†&lt;code&gt;unsafe.Pointer&lt;/code&gt;æ¥å®ç°æŒ‡å‘ç›¸åŒçš„å†…å­˜ç©ºé—´ï¼Œä»è€Œå¯¼è‡´ä»¥ä¸Šçš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æ›´æ–°äº:  2021/04/22 16:24:00&lt;/em&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>æ„å»ºå±äºä½ è‡ªå·±çš„æ ¸å¿ƒåŠ›é‡</title>
      <link>http://hindung.cn/posts/12/</link>
      <pubDate>Fri, 02 Oct 2020 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/12/</guid>
      <description>å‰è¨€ Bridging the Gap Between Junior and Senior Engineersè¿™ç¯‡æ–‡ç« æ˜¯å¶ç„¶åœ¨å…¬ä¼—å·çœ‹åˆ°çš„ï¼Œè§‰å¾—é‡Œé¢è¯´çš„ä»Juniorå¦‚ä½•å‘Senior Engineerså‘å±•ä»¥åŠæ‰€éœ€è¦æŒæ¡çš„æŠ€èƒ½ï¼Œæˆ‘è§‰å¾—è¯´çš„æŒºå¥½çš„ï¼Œè¿™é‡Œå°±ç¿»è¯‘è¿‡æ¥ï¼Œåšä¸ºä»¥ååçœçš„æ¸…å•å§ï¼Œå‘å¤§ä½¬é é½ï¼
éƒ¨åˆ†åŸæ–‡è¯‘æ–‡ ä»Juniorå‘Senior Engineerså‘å±•åº”è¯¥å…³æ³¨çš„ä¸€äº›é—®é¢˜ï¼š
  ç¼–ç ç¡¬å®åŠ›æ˜¯åŸºæœ¬çš„èƒ½åŠ›ã€‚
  ä½ çš„ä»£ç çš„å¯ç»´æŠ¤æ€§å¦‚ä½•ï¼Ÿæ˜¯å¦æœ‰å…¶ä»–å·¥ç¨‹å¸ˆä¸åœåœ°è½»æ•²ä½ çš„è‚©è†€ï¼Œè®©ä½ è§£é‡Šä½ ä»£ç çš„æ¯ä¸€è¡Œéƒ½æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿä½ çš„å˜é‡åå…·æœ‰æè¿°æ€§å—ï¼Ÿä½ çš„æ–¹æ³•æ˜¯ç›´è§‚ã€æ˜“ç†è§£çš„å—ï¼Ÿå½“ä½ å‘ç°è‡ªå·±åœ¨å¤åˆ¶ç²˜è´´å¾ˆå¤šè¡Œä»£ç æ—¶ï¼Œä½ æ˜¯å¦èƒ½å°†è¿™äº›ä»£ç çš„åŠŸèƒ½å†™å…¥å¯é‡ç”¨çš„æœåŠ¡ä¸­ï¼Ÿ
  åˆ«äººèƒ½å¤Ÿä»ä½ åœ¨æ‹‰å–è¯·æ±‚(PR)ä¸­ç•™ä¸‹çš„è¯„è®ºä¸­å—ç›Šå—ï¼Ÿä½ çš„åé¦ˆæ„è§æ˜¯æœ‰å»ºè®¾æ€§ï¼Œè¿˜æ˜¯å¤ªè¿‡ç²—ç³™ï¼Ÿå½“ä½ å‘ç°åˆ«äººçš„çŸ¥è¯†å­˜åœ¨ç¼ºå£æ—¶ï¼Œä½ åªæ˜¯å‘Šè¯‰ä»–ä»¬â€œæŠŠè¿™æ¡çº¿ä» ABC æ›´æ”¹ä¸º XYZâ€ï¼Œè¿˜æ˜¯æœ‰èƒ½åŠ›å¼•å¯¼ä»–ä»¬è®¤è¯†åˆ°è‡ªå·±çš„æ–¹æ³•å¯èƒ½ä¸æ˜¯æœ€ä½³æ–¹æ³•ï¼Œè®©ä»–ä»¬æˆé•¿ä¸ºæ›´ä¼˜ç§€çš„å¼€å‘è€…ï¼Ÿæ¯•ç«Ÿï¼ŒåŒæ ·æ˜¯å­¦ä¹ æ–°ä¸œè¥¿ï¼Œæˆäººä»¥é±¼ä¸å¦‚æˆä¹‹ä»¥æ¸”ã€‚
  ä½ çŸ¥é“å¦‚ä½•åŸºå‡†åŒ–ä½ çš„æ›´æ”¹å¹¶è¿›è¡Œè¯æ˜ã€æµ‹è¯•å—ï¼Ÿå¦‚æœä»Šå¤©æœ‰ 100,000 ä¸ªç”¨æˆ·åˆ›å»ºå¸æˆ·ï¼Œä½ çš„ä»£ç æ˜¯å¦ä¼šå¼€å§‹å¼•å‘å¤§é‡è¶…æ—¶å’Œ 500 ä¸ªé”™è¯¯ï¼Ÿä½ èƒ½ä¿è¯ä½ çš„PRï¼ˆåˆå¹¶è¯·æ±‚ï¼‰èƒ½å¤Ÿè§£å†³è¿™äº›é—®é¢˜å—ï¼Ÿ
  ä½ å¦‚ä½•å°†éå¸¸æŠ€æœ¯çš„é—®é¢˜åˆ†è§£ä¸ºå…¬å¸å…¶ä»–éƒ¨é—¨å¯ä»¥ç†è§£çš„ç®€å•è¯­è¨€ï¼Ÿå‘å¸‚åœºè§£é‡Šä¸ºä»€ä¹ˆä¸€ä¸ªåŠŸèƒ½å®é™…ä¸Šä¸å¯è¡Œæ—¶ï¼Œä½ æ˜¯å¦ä¼šè®©å¤§é‡çš„å·¥ç¨‹æœ¯è¯­ä»å˜´é‡Œæºœå‡ºæ¥ï¼Ÿ
  ä½ å¯¹é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æœ‰æ·±åˆ»çš„äº†è§£å—ï¼Ÿä½ æå‡ºçš„ç³»ç»Ÿæ¶æ„æ˜¯ä¸æ˜¯â€œé¡¶å¤šç®—è¯´å¾—é€šâ€ï¼Ÿ
  ä½ çš„å†™ä½œèƒ½åŠ›å¦‚ä½•ï¼Ÿåœ¨å›å¤ç”µå­é‚®ä»¶æ—¶ï¼Œä½ æ˜¯èƒ½æŠŠè‡ªå·±çš„æ„æ€è¡¨è¾¾æ¸…æ¥šï¼Œè¿˜æ˜¯å‘å®Œé‚®ä»¶ååŒäº‹ä»ç„¶éœ€è¦èµ°åˆ°ä½ çš„åŠå…¬æ¡Œæ—ï¼Œæ¥è¯¢é—®ä½ æ›´å¤šçš„èƒŒæ™¯ä¿¡æ¯ï¼Ÿ
  ä½ æ˜¯å¦ä¼šä¸»åŠ¨æå‡ºæƒ³æ³•ï¼Œä½¿ä½ çš„å›¢é˜Ÿæ•ˆç‡æ›´é«˜ï¼Ÿå½“éœ€è¦æ”¹åŠ¨ç°æœ‰è¿›ç¨‹æ—¶ï¼Œä½ æ˜¯å¦èƒ½å¤Ÿå‘æ‰€æœ‰å‚ä¸æ–¹è¯´æ˜æ”¶ç›Šï¼Ÿä½ èƒ½ä½¿æ‰€æœ‰äººéƒ½å¯¹è¿™ä¸€å˜åŒ–æ„Ÿåˆ°å…´å¥‹å—ï¼Ÿä½ æ˜¯å¦å¯ä»¥æŒç»­è·Ÿè¿›ï¼Œå¹¶ç¡®ä¿æ–°æµç¨‹ç¡®å®æœ‰æ•ˆï¼Ÿ
  ä½ å°Šé‡åˆ«äººçš„æ—¶é—´å—ï¼Ÿå½“ä½ è¦æ±‚åˆ«äººå¸®åŠ©ä½ è§£å†³é—®é¢˜æ—¶ï¼Œä½ èƒ½å¦å‡†ç¡®æè¿°ä½ é‡åˆ°é—®é¢˜çš„ä»£ç åº“çš„ç¡®åˆ‡å®šä½ï¼ˆå¦‚æŠ›å‡ºå¼‚å¸¸çš„è¡Œå·ã€ä½ åœ¨é—®åˆ«äººä¹‹å‰å·²ç»å°è¯•è¿‡çš„ debug æ–¹æ³•ï¼Œå…å¾—åˆ«äººå†æµªè´¹æ—¶é—´é‡å¤ä½ å·²ç»åšè¿‡çš„å·¥ä½œï¼‰ï¼Ÿåˆ«äººæ˜¯å¦å¿…é¡»åå¤é—®ä½ ï¼Œæ‰èƒ½ä»ä½ å˜´é‡Œæ’¬å‡ºè¿™äº›ä¿¡æ¯ï¼Ÿåœ¨åˆ«äººèµ°åˆ°ä½ åŠå…¬æ¡Œå‰ï¼Œä½ å·²ç»æ•´ç†å¥½è¦é—®çš„é—®é¢˜å¹¶åœ¨ MacBook ä¸Šæ‰“å¼€äº†å—ï¼Ÿ
  åœ¨ä¸å…¶ä»–éƒ¨é—¨ä¸€èµ·ç¡®å®šå¤§å‹é¡¹ç›®çš„èŒƒå›´æ—¶ï¼Œä½ å¯¹è¦å¼€å‘çš„æ–°åŠŸèƒ½çš„é—®é¢˜äº†è§£å¾—æœ‰å¤šæ·±å…¥ï¼Ÿåœ¨å¼€å§‹ç¼–ç ä¹‹å‰ï¼Œä½ æ˜¯å¦èƒ½å¤Ÿè€ƒè™‘åˆ°æ¯ä¸ªè¾¹ç¼˜æƒ…å†µï¼Ÿä½ æ˜¯å¦èƒ½å¤ŸåŠæ—©è¯†åˆ«èŒƒå›´è”“å»¶å¹¶å°½æ—©åˆ¶æ­¢ï¼Œä»è€Œä½¿å›¢é˜Ÿå…äºå‘¨å…­åŠ ç­ï¼Ÿ
  ä½ çš„å¤šä»»åŠ¡å¤„ç†èƒ½åŠ›å¦‚ä½•ï¼Ÿä½ çš„å¤§è„‘ä¼šè¶…è´Ÿè·å—ï¼ŸåŒæ ·ï¼Œåœ¨å¤„ç†å¤§å‹åŠŸèƒ½æ—¶ï¼Œæ¯”å¦‚æ¶‰åŠ 50 ä¸ªæ–‡ä»¶çš„åŠŸèƒ½â€¦â€¦ä½ å¯ä»¥ä¸€æ¬¡å°†å®ƒä»¬å…¨éƒ¨ä¿å­˜åœ¨è„‘æµ·ä¸­å—ï¼Ÿä½ æœ‰å…»æˆæ‰å®çš„è®°ç¬”è®°ä¹ æƒ¯å—ï¼Ÿä½ æ‰“ç®—å¦‚ä½•è®¡åˆ’è·Ÿè¸ªä»Šå¤©ä¸‹ç­å‰å¼¹å‡ºçš„ 500 ä¸‡ä»¶äº‹ï¼Ÿ
  å½“ä½ ç¼–å†™çš„ä¸€æ®µä»£ç å¯¼è‡´å¸å•é¡µé¢å‡ºé”™ï¼Œæå¾—å›¢é˜Ÿé¦–å¸­å·¥ç¨‹å¸ˆä¸å¾—ä¸å–æ¶ˆä»–ä»¬çš„æ™šé¤è®¡åˆ’ã€ç†¬å¤œå¸®ä½ è§£å†³é—®é¢˜æ—¶ï¼Œä½ ä¼šå¦‚ä½•åº”å¯¹ï¼Ÿä½ ä¼šæƒ…ç»ªæ¿€åŠ¨å—ï¼Ÿä½ è¿˜èƒ½ç†æ€§æ€è€ƒå—ï¼Ÿä½ æ˜¯å¦èƒ½å¤Ÿæ‘†è„±è¿™ç§æƒ…ç»ªï¼Œå¹¶æé†’è‡ªå·±ï¼Œåœ°çƒä¸Šçš„æ¯ä¸ªå¼€å‘äººå‘˜æ¯ä¸¤å¤©å°±ä¼šå‘å¸ƒé”™è¯¯ä»£ç ï¼Ÿ
  ä½ äº†è§£ä¸šåŠ¡è¿ä½œæ–¹å¼å—ï¼Ÿä½ äº†è§£ä¸ºä»€ä¹ˆå³ä½¿å¤±ä¸šäººæ•°è¾¾åˆ°ä¸¤ä½æ•°ï¼Œè½¯ä»¶å·¥ç¨‹å¸ˆä¹Ÿå¯ä»¥è¦æ±‚å¦‚æ­¤ç–¯ç‹‚çš„è–ªæ°´å—ï¼Ÿä¸ºä»€ä¹ˆç¼–ç¨‹æ˜¯å¦‚æ­¤å®è´µçš„æŠ€èƒ½ï¼Ÿä¸ºä»€ä¹ˆå®¢æˆ·æ„¿æ„ä¸ºæŸäº›è¶…çº§åŸºæœ¬çš„ Web è¡¨å•å‘ä½ çš„å…¬å¸æ¯å¹´æ”¯ä»˜ 50,000 ç¾å…ƒï¼Ÿä½ æ˜¯å¦è§‰å¾—ä»–ä»¬è¢«éª—äº†ï¼Ÿ</description>
      <content>&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://medium.com/@jacobcomer/bridging-the-gap-between-junior-and-senior-engineers-571b2248fbb8&#34;&gt;Bridging the Gap Between Junior and Senior Engineers&lt;/a&gt;è¿™ç¯‡æ–‡ç« æ˜¯å¶ç„¶åœ¨å…¬ä¼—å·çœ‹åˆ°çš„ï¼Œè§‰å¾—é‡Œé¢è¯´çš„ä»Juniorå¦‚ä½•å‘Senior Engineerså‘å±•ä»¥åŠæ‰€éœ€è¦æŒæ¡çš„æŠ€èƒ½ï¼Œæˆ‘è§‰å¾—è¯´çš„æŒºå¥½çš„ï¼Œè¿™é‡Œå°±ç¿»è¯‘è¿‡æ¥ï¼Œåšä¸ºä»¥ååçœçš„æ¸…å•å§ï¼Œå‘å¤§ä½¬é é½ï¼&lt;/p&gt;
&lt;h2 id=&#34;éƒ¨åˆ†åŸæ–‡è¯‘æ–‡&#34;&gt;éƒ¨åˆ†åŸæ–‡è¯‘æ–‡&lt;/h2&gt;
&lt;p&gt;ä»Juniorå‘Senior Engineerså‘å±•åº”è¯¥å…³æ³¨çš„ä¸€äº›é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¼–ç ç¡¬å®åŠ›æ˜¯åŸºæœ¬çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½ çš„ä»£ç çš„å¯ç»´æŠ¤æ€§å¦‚ä½•ï¼Ÿæ˜¯å¦æœ‰å…¶ä»–å·¥ç¨‹å¸ˆä¸åœåœ°è½»æ•²ä½ çš„è‚©è†€ï¼Œè®©ä½ è§£é‡Šä½ ä»£ç çš„æ¯ä¸€è¡Œéƒ½æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿä½ çš„å˜é‡åå…·æœ‰æè¿°æ€§å—ï¼Ÿä½ çš„æ–¹æ³•æ˜¯ç›´è§‚ã€æ˜“ç†è§£çš„å—ï¼Ÿå½“ä½ å‘ç°è‡ªå·±åœ¨å¤åˆ¶ç²˜è´´å¾ˆå¤šè¡Œä»£ç æ—¶ï¼Œä½ æ˜¯å¦èƒ½å°†è¿™äº›ä»£ç çš„åŠŸèƒ½å†™å…¥å¯é‡ç”¨çš„æœåŠ¡ä¸­ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ«äººèƒ½å¤Ÿä»ä½ åœ¨æ‹‰å–è¯·æ±‚(PR)ä¸­ç•™ä¸‹çš„è¯„è®ºä¸­å—ç›Šå—ï¼Ÿä½ çš„åé¦ˆæ„è§æ˜¯æœ‰å»ºè®¾æ€§ï¼Œè¿˜æ˜¯å¤ªè¿‡ç²—ç³™ï¼Ÿå½“ä½ å‘ç°åˆ«äººçš„çŸ¥è¯†å­˜åœ¨ç¼ºå£æ—¶ï¼Œä½ åªæ˜¯å‘Šè¯‰ä»–ä»¬â€œæŠŠè¿™æ¡çº¿ä» ABC æ›´æ”¹ä¸º XYZâ€ï¼Œè¿˜æ˜¯æœ‰èƒ½åŠ›å¼•å¯¼ä»–ä»¬è®¤è¯†åˆ°è‡ªå·±çš„æ–¹æ³•å¯èƒ½ä¸æ˜¯æœ€ä½³æ–¹æ³•ï¼Œè®©ä»–ä»¬æˆé•¿ä¸ºæ›´ä¼˜ç§€çš„å¼€å‘è€…ï¼Ÿæ¯•ç«Ÿï¼ŒåŒæ ·æ˜¯å­¦ä¹ æ–°ä¸œè¥¿ï¼Œæˆäººä»¥é±¼ä¸å¦‚æˆä¹‹ä»¥æ¸”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½ çŸ¥é“å¦‚ä½•åŸºå‡†åŒ–ä½ çš„æ›´æ”¹å¹¶è¿›è¡Œè¯æ˜ã€æµ‹è¯•å—ï¼Ÿå¦‚æœä»Šå¤©æœ‰ 100,000 ä¸ªç”¨æˆ·åˆ›å»ºå¸æˆ·ï¼Œä½ çš„ä»£ç æ˜¯å¦ä¼šå¼€å§‹å¼•å‘å¤§é‡è¶…æ—¶å’Œ 500 ä¸ªé”™è¯¯ï¼Ÿä½ èƒ½ä¿è¯ä½ çš„PRï¼ˆåˆå¹¶è¯·æ±‚ï¼‰èƒ½å¤Ÿè§£å†³è¿™äº›é—®é¢˜å—ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½ å¦‚ä½•å°†éå¸¸æŠ€æœ¯çš„é—®é¢˜åˆ†è§£ä¸ºå…¬å¸å…¶ä»–éƒ¨é—¨å¯ä»¥ç†è§£çš„ç®€å•è¯­è¨€ï¼Ÿå‘å¸‚åœºè§£é‡Šä¸ºä»€ä¹ˆä¸€ä¸ªåŠŸèƒ½å®é™…ä¸Šä¸å¯è¡Œæ—¶ï¼Œä½ æ˜¯å¦ä¼šè®©å¤§é‡çš„å·¥ç¨‹æœ¯è¯­ä»å˜´é‡Œæºœå‡ºæ¥ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½ å¯¹é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æœ‰æ·±åˆ»çš„äº†è§£å—ï¼Ÿä½ æå‡ºçš„ç³»ç»Ÿæ¶æ„æ˜¯ä¸æ˜¯â€œé¡¶å¤šç®—è¯´å¾—é€šâ€ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½ çš„å†™ä½œèƒ½åŠ›å¦‚ä½•ï¼Ÿåœ¨å›å¤ç”µå­é‚®ä»¶æ—¶ï¼Œä½ æ˜¯èƒ½æŠŠè‡ªå·±çš„æ„æ€è¡¨è¾¾æ¸…æ¥šï¼Œè¿˜æ˜¯å‘å®Œé‚®ä»¶ååŒäº‹ä»ç„¶éœ€è¦èµ°åˆ°ä½ çš„åŠå…¬æ¡Œæ—ï¼Œæ¥è¯¢é—®ä½ æ›´å¤šçš„èƒŒæ™¯ä¿¡æ¯ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½ æ˜¯å¦ä¼šä¸»åŠ¨æå‡ºæƒ³æ³•ï¼Œä½¿ä½ çš„å›¢é˜Ÿæ•ˆç‡æ›´é«˜ï¼Ÿå½“éœ€è¦æ”¹åŠ¨ç°æœ‰è¿›ç¨‹æ—¶ï¼Œä½ æ˜¯å¦èƒ½å¤Ÿå‘æ‰€æœ‰å‚ä¸æ–¹è¯´æ˜æ”¶ç›Šï¼Ÿä½ èƒ½ä½¿æ‰€æœ‰äººéƒ½å¯¹è¿™ä¸€å˜åŒ–æ„Ÿåˆ°å…´å¥‹å—ï¼Ÿä½ æ˜¯å¦å¯ä»¥æŒç»­è·Ÿè¿›ï¼Œå¹¶ç¡®ä¿æ–°æµç¨‹ç¡®å®æœ‰æ•ˆï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½ å°Šé‡åˆ«äººçš„æ—¶é—´å—ï¼Ÿå½“ä½ è¦æ±‚åˆ«äººå¸®åŠ©ä½ è§£å†³é—®é¢˜æ—¶ï¼Œä½ èƒ½å¦å‡†ç¡®æè¿°ä½ é‡åˆ°é—®é¢˜çš„ä»£ç åº“çš„ç¡®åˆ‡å®šä½ï¼ˆå¦‚æŠ›å‡ºå¼‚å¸¸çš„è¡Œå·ã€ä½ åœ¨é—®åˆ«äººä¹‹å‰å·²ç»å°è¯•è¿‡çš„ debug æ–¹æ³•ï¼Œå…å¾—åˆ«äººå†æµªè´¹æ—¶é—´é‡å¤ä½ å·²ç»åšè¿‡çš„å·¥ä½œï¼‰ï¼Ÿåˆ«äººæ˜¯å¦å¿…é¡»åå¤é—®ä½ ï¼Œæ‰èƒ½ä»ä½ å˜´é‡Œæ’¬å‡ºè¿™äº›ä¿¡æ¯ï¼Ÿåœ¨åˆ«äººèµ°åˆ°ä½ åŠå…¬æ¡Œå‰ï¼Œä½ å·²ç»æ•´ç†å¥½è¦é—®çš„é—®é¢˜å¹¶åœ¨ MacBook ä¸Šæ‰“å¼€äº†å—ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ä¸å…¶ä»–éƒ¨é—¨ä¸€èµ·ç¡®å®šå¤§å‹é¡¹ç›®çš„èŒƒå›´æ—¶ï¼Œä½ å¯¹è¦å¼€å‘çš„æ–°åŠŸèƒ½çš„é—®é¢˜äº†è§£å¾—æœ‰å¤šæ·±å…¥ï¼Ÿåœ¨å¼€å§‹ç¼–ç ä¹‹å‰ï¼Œä½ æ˜¯å¦èƒ½å¤Ÿè€ƒè™‘åˆ°æ¯ä¸ªè¾¹ç¼˜æƒ…å†µï¼Ÿä½ æ˜¯å¦èƒ½å¤ŸåŠæ—©è¯†åˆ«èŒƒå›´è”“å»¶å¹¶å°½æ—©åˆ¶æ­¢ï¼Œä»è€Œä½¿å›¢é˜Ÿå…äºå‘¨å…­åŠ ç­ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½ çš„å¤šä»»åŠ¡å¤„ç†èƒ½åŠ›å¦‚ä½•ï¼Ÿä½ çš„å¤§è„‘ä¼šè¶…è´Ÿè·å—ï¼ŸåŒæ ·ï¼Œåœ¨å¤„ç†å¤§å‹åŠŸèƒ½æ—¶ï¼Œæ¯”å¦‚æ¶‰åŠ 50 ä¸ªæ–‡ä»¶çš„åŠŸèƒ½â€¦â€¦ä½ å¯ä»¥ä¸€æ¬¡å°†å®ƒä»¬å…¨éƒ¨ä¿å­˜åœ¨è„‘æµ·ä¸­å—ï¼Ÿä½ æœ‰å…»æˆæ‰å®çš„è®°ç¬”è®°ä¹ æƒ¯å—ï¼Ÿä½ æ‰“ç®—å¦‚ä½•è®¡åˆ’è·Ÿè¸ªä»Šå¤©ä¸‹ç­å‰å¼¹å‡ºçš„ 500 ä¸‡ä»¶äº‹ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“ä½ ç¼–å†™çš„ä¸€æ®µä»£ç å¯¼è‡´å¸å•é¡µé¢å‡ºé”™ï¼Œæå¾—å›¢é˜Ÿé¦–å¸­å·¥ç¨‹å¸ˆä¸å¾—ä¸å–æ¶ˆä»–ä»¬çš„æ™šé¤è®¡åˆ’ã€ç†¬å¤œå¸®ä½ è§£å†³é—®é¢˜æ—¶ï¼Œä½ ä¼šå¦‚ä½•åº”å¯¹ï¼Ÿä½ ä¼šæƒ…ç»ªæ¿€åŠ¨å—ï¼Ÿä½ è¿˜èƒ½ç†æ€§æ€è€ƒå—ï¼Ÿä½ æ˜¯å¦èƒ½å¤Ÿæ‘†è„±è¿™ç§æƒ…ç»ªï¼Œå¹¶æé†’è‡ªå·±ï¼Œåœ°çƒä¸Šçš„æ¯ä¸ªå¼€å‘äººå‘˜æ¯ä¸¤å¤©å°±ä¼šå‘å¸ƒé”™è¯¯ä»£ç ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½ äº†è§£ä¸šåŠ¡è¿ä½œæ–¹å¼å—ï¼Ÿä½ äº†è§£ä¸ºä»€ä¹ˆå³ä½¿å¤±ä¸šäººæ•°è¾¾åˆ°ä¸¤ä½æ•°ï¼Œè½¯ä»¶å·¥ç¨‹å¸ˆä¹Ÿå¯ä»¥è¦æ±‚å¦‚æ­¤ç–¯ç‹‚çš„è–ªæ°´å—ï¼Ÿä¸ºä»€ä¹ˆç¼–ç¨‹æ˜¯å¦‚æ­¤å®è´µçš„æŠ€èƒ½ï¼Ÿä¸ºä»€ä¹ˆå®¢æˆ·æ„¿æ„ä¸ºæŸäº›è¶…çº§åŸºæœ¬çš„ Web è¡¨å•å‘ä½ çš„å…¬å¸æ¯å¹´æ”¯ä»˜ 50,000 ç¾å…ƒï¼Ÿä½ æ˜¯å¦è§‰å¾—ä»–ä»¬è¢«éª—äº†ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é¢†å¯¼å¯ä»¥æ”¾å¿ƒåœ°è®©ä½ å»è´Ÿè´£é¢è¯•å€™é€‰äººå—ï¼Ÿä½ æ˜¯å¦æ“…é•¿é€šè¿‡æœ‰é™çš„ä¿¡æ¯æ¥å¯¹äººå‘˜è¿›è¡Œåˆ†ç±»ï¼Œå¹¶å¯è§†åŒ–ä»–ä»¬å’Œå›¢é˜Ÿçš„é€‚åˆç¨‹åº¦ï¼Ÿä½ èƒ½è¯†åˆ«å‡ºåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œåœ¨å·¥ç¨‹æ–¹é¢ä¼˜ç§€çš„å€™é€‰äººå´ä¸èƒ½å¾ˆå¥½åœ°èå…¥å…¬å¸æ–‡åŒ–å—ï¼Ÿè¿™ç§å€™é€‰äººä½ ä¼šå»ºè®®å½•å–å—ï¼ŸåŒæ ·ï¼Œå³ä½¿ä½ å’Œå€™é€‰äººåœ¨ Zoom é‡ŒèŠäº† 5 åˆ†é’Ÿå°±çŸ¥é“ä»–ä¸å¯èƒ½è¢«å½•å–ï¼Œä½ æ˜¯å¦è¿˜å¯ä»¥ç¡®ä¿ä»–ä»ç„¶å¯ä»¥ä»ä½ ä»¬çš„èŠå¤©ä¸­å­¦åˆ°ä¸œè¥¿ï¼Ÿæ¯•ç«Ÿï¼Œè¯­è¨€åœ¨ç½‘ç»œä¸Šçš„ä¼ æ’­é€Ÿåº¦æ˜¯å¾ˆå¿«çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‡å¦‚ä»Šå¤©æ˜¯ 12 æœˆ 28 æ—¥ï¼Œä½ è¢«å›°åœ¨åŠå…¬å®¤ã€‚ä½ ä»Šå¹´æœ‰ç‚¹ç–¯ç‹‚ï¼Œåœ¨ 9 æœˆä¸­æ—¬å°±æŠŠä»Šå¹´æ‰€æœ‰çš„å¸¦è–ªä¼‘å‡ç³Ÿè¹‹å®Œäº†ã€‚æ­¤æ—¶æ­¤åˆ»ï¼ŒåŒäº‹ä»¬éƒ½ä¼‘å‡å‡ºå» high äº†ã€‚ä½ è¿˜èƒ½æŒ‰æ—¶ä¸Šç­å—ï¼Ÿé¢†å¯¼ä¸åœ¨èº«è¾¹æƒ©ç½šä½ ï¼Œä½ æ˜¯å¦æ‰“ç®—åŠé€”è€ŒåºŸï¼Ÿè¿™ç§æƒ…å½¢ä¸‹ï¼Œæ˜¯å¦éœ€è¦é¢†å¯¼å¼ºè¿«ä½ ä½ æ‰èƒ½å°½å…¨åŠ›å·¥ä½œï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœºä¼šæˆæœ¬æ˜¯ä¸€ä»¶å¿…é¡»è€ƒè™‘çš„äº‹ã€‚ä½ åœ¨å¹³è¡¡æŠ€æœ¯å€ºåŠ¡å’Œæ¨åŠ¨ä¸šåŠ¡å‘å±•æ–¹é¢åšå¾—å¦‚ä½•ï¼Ÿä½ æ˜¯å¦ä¼šé‡æ„å‘ç°çš„æ¯ä¸ªå¾®å°çš„ç¼–ç æ ·å¼é—®é¢˜ï¼Ÿæ¯•ç«Ÿå¤§å®¶éƒ½å¾ˆéš¾æ‰¿è®¤â€œè¿™æ®µä»£ç å¾ˆçƒ¦äººï¼Œä½†å®ƒç¡®å®æœ‰æ•ˆï¼Œéœ€è¦èŠ±è´¹å››ä¸ªå°æ—¶çš„æ¸…ç†æ—¶é—´ï¼Œè¿™æ®µæ—¶é—´å¯ä»¥èŠ±åœ¨æ„å»ºå…¶ä»–åŠŸèƒ½ä¸Šï¼Œè€Œè¿™æ˜¯å¾ˆå¤šå®¢æˆ·éƒ½åœ¨è¯·æ±‚çš„â€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½ çŸ¥é“å¦‚ä½•å‘ä½ çš„ä¸‹å±åé¦ˆ ä»–ä»¬ çš„ç»©æ•ˆå—ï¼Ÿä½ å’Œä»–ä»¬æœ‰è‰¯å¥½çš„å·¥ä½œå…³ç³»å—ï¼Ÿä½ æ˜¯å¦å°†ä»–ä»¬è§†ä¸ºæ•Œäººï¼Ÿä½ æ˜¯å¦æ­£åœ¨ç§¯æå°è¯•å‡è½»ä»–ä»¬çš„å‹åŠ›ï¼Œä½¿ä»–ä»¬çš„ç”Ÿæ´»æ›´è½»æ¾ï¼Ÿä½ æ˜¯å¦æ›¾ç»è¯´è¿‡â€œä½ ä»¬é‚£è¾¹æœ‰ä»€ä¹ˆçƒ¦äººçš„ä»»åŠ¡æˆ‘å¯ä»¥å¸®å¿™å‰Šå‡å—â€ï¼Ÿå…¬å¸é›‡äººéƒ½æ˜¯æœ‰åŸå› çš„ï¼Œä½ çš„ä¸‹å±å¯èƒ½æ¯”ä½ æƒ³è±¡çš„æ›´æœ‰ç»éªŒå’Œèµ„æ ¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½ æœ‰èƒ½åŠ›æ‰‘ç­ç”Ÿäº§å¤§ç«å—ï¼Ÿä½ æ˜¯å¦ä¼šåœ¨é‡åˆ° å¤§éº»çƒ¦ æ—¶æƒŠæ…Œã€ä¸çŸ¥æ‰€æªï¼ˆæ¯”å¦‚ AWS ä¸­æ–­ä½¿ç½‘ç«™ç˜«ç—ªã€ä¸å°å¿ƒæä¸¢äº† customer_invoices è¡¨å•ã€æŸäº›é”™è¯¯å¯¼è‡´äº†ä¸åŒç”¨æˆ·å¸æˆ·ä¹‹é—´çš„æ•°æ®æ³„æ¼ç­‰ï¼‰ï¼Ÿä½ æ˜¯ä¼šåœ¨å‹åŠ›ä¹‹ä¸‹å´©æºƒï¼Œè¿˜æ˜¯ä¼šåœ¨è§£å†³é—®é¢˜çš„åŒæ—¶ä¿æŒé•‡é™ï¼Œå¹¶ä¸å…¶ä»–éƒ¨é—¨è¿›è¡Œæœ‰æ•ˆçš„æ²Ÿé€šï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æ›´å¥½çš„å‘ç®¡ç†è€…æ–¹å‘å‘å±•ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ”¹è¿›æˆ‘ä»¬è¿›è¡ŒæŠ€æœ¯é¢è¯•çš„æ–¹å¼ï¼Œä¿è¯æˆ‘ä»¬ä¸å€™é€‰äººä¹‹é—´çš„æ²Ÿé€šä¿¡å™ªæ¯”æ›´é«˜ï¼ˆå¦‚æ”¹å–„æˆ‘ä»¬çš„é¢è¯•é—®é¢˜ã€é‡æ–°è€ƒè™‘æˆ‘ä»¬çš„ç”µå­é‚®ä»¶æ¨¡æ¿ã€è€ƒè™‘æ˜¯å¦è¦ç»™é¢è¯•è€…å¸ƒç½®çº¿ä¸‹ç¬”è¯•é¢˜ã€åæ€æˆ‘ä»¬å¯¹å·¥ä½œçš„æè¿°æ˜¯å¦å‡†ç¡®ã€æˆ‘ä»¬å‘å“ªé‡ŒæŠ•æ”¾æ‹›è˜å¹¿å‘Šã€æ¢ä½æ€è€ƒå¦‚æœæˆ‘æ­£åœ¨å¯»æ‰¾å·¥ä½œä¼šå¦‚ä½•å›å¤è¯¥æ‹›è˜ä¿¡æ¯ã€å¦‚ä½•åœ¨å€™é€‰äººåšå‡ºå†³å®šä¹‹å‰ä½¿å…¶æ›´æ·±å…¥åœ°äº†è§£æˆ‘ä»¬çš„å…¬å¸æ–‡åŒ–å’Œå‘å±•å†ç¨‹ç­‰ç­‰ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸äº§å“å›¢é˜Ÿåˆä½œï¼Œä»¥æ›´ç»†è‡´çš„æ–¹å¼å¯¹å³å°†å¼€å±•çš„å·¥ä½œè¿›è¡Œåˆ†ç±»ï¼Œä»è€Œä½¿äº§å“å›¢é˜Ÿå’Œæœ€ç»ˆè¦å»æ¥æ”¶ JIRA tickets çš„å·¥ç¨‹å¸ˆä¹‹é—´çš„æ²Ÿé€šæ›´åŠ é¡ºç•…ï¼Œè€Œä¸éœ€è¦ç£¨å½å¥½å‡ ä¸ªæ¥å›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»„ç»‡å›¢å»ºæ´»åŠ¨å’Œå›¢é˜Ÿèšé¤&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“ CEO/CTO ä¸ºå³å°†åˆ°æ¥çš„å­£åº¦åˆ¶å®šçš„ç›®æ ‡å¬èµ·æ¥æœ‰ç‚¹è¿‡äºä¹è§‚æ—¶ï¼Œå‘ä»–ä»¬æå‡ºæé†’å’Œæ„è§ï¼Œä»¥å…å›¢é˜Ÿå…¶ä»–æˆå‘˜å—ä¸äº†è¿‡åˆ†è¾›è‹¦çš„å·¥ä½œè€Œé€ƒç¦»ä½ ä»¬å…¬å¸&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ€å¥½èƒ½æ¯å‘¨ä¸æ‰€æœ‰å¤§çš„å®¢æˆ·è¿›è¡Œä¸€æ¬¡ç¡®è®¤ç”µè¯ï¼ˆäº²è‡ªå›ç­”ä»–ä»¬æ‰€æœ‰çš„æŠ€æœ¯é—®é¢˜ï¼Œå¹¶ç¡®ä¿åŒæ–¹ä¹‹é—´çš„å…³ç³»ä¿æŒå¥åº·ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨ 6 ä¸ªæœˆçš„æ—¶é—´è¿›è¡Œç§¯æçš„å®‰å…¨å®¡æ ¸ï¼Œä¸æ–­æé†’å®¢æˆ·æˆ‘ä»¬ä¼šè®¤çœŸå¯¹å¾…ä»–ä»¬çš„éšç§ï¼Œå¹¶åœ¨å…¬å¸å‘å±•çš„æ¯ä¸ªæ£€æŸ¥ç‚¹åŠªåŠ›å®Œå–„æˆ‘ä»¬çš„æµç¨‹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰¾å‡ºå…¶ä»–å¼€å‘äººå‘˜åœ¨çŸ¥è¯†ä¸Šçš„ä¸è¶³ä¹‹å¤„ï¼Œç„¶åè®©ä»–ä»¬æŸ¥ç¼ºè¡¥æ¼ï¼ˆä½¿ç”¨èƒ½æ¿€å‘ä»–ä»¬å­¦ä¹ å…´è¶£çš„æ–¹å¼ï¼‰ï¼šå¦‚ä½¿ç”¨ vim å®å¤„ç† CSV æ–‡ä»¶ã€Linux ç»ˆç«¯ä¸­å®ç”¨çš„çŸ­å‘½ä»¤ã€é«˜çº§ SQL å‘½ä»¤ã€å¦‚ä½•ä½¿ PR æè¿°æ›´å…·æè¿°æ€§ã€è§£é‡Šè´Ÿè½½å¹³è¡¡å™¨å¦‚ä½•å·¥ä½œã€è®¨è®ºåˆå¹¶å’Œé‡æ–°å®šåŸºä¹‹é—´çš„åŒºåˆ«ç­‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¸®åŠ©è®¾è®¡å›¢é˜Ÿåœ¨èŠ±æ•°å°æ—¶å°†çº¿æ¡†è½¬æ¢ä¸ºé«˜ä¿çœŸæ¨¡å‹ ä¹‹å‰ï¼Œå…ˆå¼„æ¸…æ¥šå“ªäº›åŠŸèƒ½æ˜“äºå¼€å‘&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ”¹è¿›æˆ‘ä»¬çš„æµç¨‹ï¼Œè®©å…¶ä»–éƒ¨é—¨çŸ¥é“ä½•æ—¶ä¼šå¢åŠ æ–°åŠŸèƒ½ï¼ˆç¼–å†™æ›´å¥½çš„å‘è¡Œè¯´æ˜ã€åœ¨æ¯å‘¨çš„å†…éƒ¨äº§å“æ¼”ç¤ºä¸­å›ç­”ä»–ä»¬çš„é—®é¢˜ã€å¸®åŠ©ä»–ä»¬ç¼–å†™å®¢æˆ·èƒ½ç†è§£çš„å¤–éƒ¨æ–‡æ¡£ï¼‰ï¼Œå› ä¸ºæ²¡äººçŸ¥é“çš„åŠŸèƒ½ä¸ä¼šè§£å†³ä»»ä½•å®é™…é—®é¢˜&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;â€œå‡ å¹´åï¼Œè®¸å¤šé«˜çº§å·¥ç¨‹å¸ˆèµ°çš„è·¯éƒ½æ˜¯ç±»ä¼¼çš„ã€‚ä½ å¯èƒ½åœ¨ä¸çŸ¥ä¸è§‰ä¸­å°±å˜æˆäº†å°é¢†å¯¼ï¼Œæ¯å¤©æœ‰ 6 ä¸ªäººå‘ä½ æ±‡æŠ¥å·¥ä½œã€‚â€&lt;/p&gt;
&lt;p&gt;å‚è€ƒæ–‡ç« ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://medium.com/@jacobcomer/bridging-the-gap-between-junior-and-senior-engineers-571b2248fbb8&#34;&gt;Bridging the Gap Between Junior and Senior Engineers&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;amp;mid=2651044994&amp;amp;idx=2&amp;amp;sn=3ec4cec72005bedf2871aa51e6797810&amp;amp;chksm=bdbe44d18ac9cdc74899b7db1af4327d7f7c105882475a7261ecc6365b29ab9de4a50c4d8792&amp;amp;scene=126&amp;amp;sessionid=1601612361&amp;amp;key=92bd8fadcb6a48582ba00a5cf8b8dda29bd2cbd845d7f4be8fd1aa2adfc022015fc22b94f6e093a164a428b153f65bf92a2db9555922fc8b71aaf22382af6657f75366044351a24f93e115f0e07f06a0395a6e563bda878a5b4851100eba585d7bfff7ae110fdc487937bc23bc881845cf9fbe640b2ec9168dc4c37e96c67e4d&amp;amp;ascene=1&amp;amp;uin=MTcwOTE1MTEyMw%3D%3D&amp;amp;devicetype=Windows+10+x64&amp;amp;version=62090070&amp;amp;lang=zh_CN&amp;amp;exportkey=AX4Qqfsk7VJ1vh7G9EqzVQc%3D&amp;amp;pass_ticket=iAiY4i9x3ClORTZ1oyzCuk3Ph%2FBMcbMzY9sQFKSb3XdaBF6RjtuBZzqDaLWP5WAf&amp;amp;wx_header=0&#34;&gt;ä»åˆçº§å·¥ç¨‹å¸ˆå‘å±•åˆ°é«˜çº§å·¥ç¨‹å¸ˆï¼Œéœ€è¦è·¨è¶Šçš„é¸¿æ²Ÿ&lt;/a&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>Golangå®ç°ä¼˜å…ˆé˜Ÿåˆ—</title>
      <link>http://hindung.cn/posts/11/</link>
      <pubDate>Wed, 23 Sep 2020 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/11/</guid>
      <description>å‰è¨€ ç”±äºåˆ·é¢˜æ—¶å¶å°”ä¼šç”¨åˆ°é˜Ÿåˆ—ä»¥åŠä¼˜å…ˆé˜Ÿåˆ—ç­‰æ•°æ®ç»“æ„ï¼Œå…¶ä»–è¯­è¨€éƒ½æœ‰ç°æˆçš„å®ç°ï¼Œå¦‚C++çš„priority_queueç­‰ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯ç”±äºä¸ªäººæ¯”è¾ƒå–œæ¬¢ä½¿ç”¨golangè¯­è¨€è¿›è¡Œç­”é¢˜ï¼Œä½†æ˜¯goå¯¹é˜Ÿåˆ—ä»¥åŠä¼˜å…ˆé˜Ÿåˆ—çš„å®ç°åªæä¾›äº†ä¸€ä¸ªæ¥å£ï¼Œå³container/heapåŒ…ä¸­çš„heapæ•°æ®ç»“æ„ï¼Œæ•…å®ç°è¿˜æ˜¯è¦è‡ªå·±å»ç ï¼Œè¿™é‡Œåšä¸€ä¸ªç¬”è®°ã€‚å®ç°äº†heapæ¥å£æ¥å®ç°priority_queueï¼Œå¹¶ä¸”æä¾›äº†å…¶ä»–æ–¹æ³•çš„å®ç°ã€‚
heapåŸç† goçš„container/heapåŒ…å®ç°çš„æ˜¯æ•°æ®ç»“æ„æ˜¯æ•°ç»„æ„æˆçš„äºŒå‰æ ‘ï¼ˆå®Œå…¨äºŒå‰æ ‘ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
// æ ‘ä¸­æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯ä¸å¤§äºæˆ–ä¸å°äºå…¶å­©å­èŠ‚ç‚¹çš„å€¼ï¼› // æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å­æ ‘éƒ½æ˜¯å †æ ‘ // index 0 1 2 3 4 5 6 7 8 9 // index 1 2 3 4 5 6 7 8 9 10 // a[] = {4, 1, 3, 2, 16, 9, 10, 14, 8, 7} // 4 // / \ // 1 3 // / \ / \ // 2 16 9 10 // /\ / // 14 8 7 // è‹¥å–a[1]ä¸ºå †é¡¶æœ€å¤§æˆ–æœ€å°ï¼Œa[i]çš„å·¦å­èŠ‚ç‚¹ä¸ºa[2i],å³å­èŠ‚ç‚¹ä¸ºa[2i+1],çˆ¶èŠ‚ç‚¹ä¸ºa[i/2]: // a[i] // / \ // a[2i] a[2i+1] // è‹¥å–a[0]ä¸ºå †é¡¶æœ€å¤§æˆ–æœ€å°ï¼Œa[i]çš„å·¦å­èŠ‚ç‚¹ä¸ºa[2i+1],å³å­èŠ‚ç‚¹ä¸ºa[2i+2],çˆ¶èŠ‚ç‚¹ä¸ºa[(i-1)/2] // a[i] // / \ // a[2i+1] a[2i+2] è€Œcontainer/heapåŒ…é‡‡ç”¨çš„æ˜¯a[0]ä½œä¸ºå¯¹é¡¶ï¼Œæ•…å·¦å­ã€å³å­èŠ‚ç‚¹ä»¥åŠçˆ¶èŠ‚ç‚¹è¡¨ç¤ºä¸ºa[2i+1]ã€a[2i+2]ã€a[(i-1)/2]ã€‚</description>
      <content>&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ç”±äºåˆ·é¢˜æ—¶å¶å°”ä¼šç”¨åˆ°é˜Ÿåˆ—ä»¥åŠä¼˜å…ˆé˜Ÿåˆ—ç­‰æ•°æ®ç»“æ„ï¼Œå…¶ä»–è¯­è¨€éƒ½æœ‰ç°æˆçš„å®ç°ï¼Œå¦‚C++çš„priority_queueç­‰ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯ç”±äºä¸ªäººæ¯”è¾ƒå–œæ¬¢ä½¿ç”¨golangè¯­è¨€è¿›è¡Œç­”é¢˜ï¼Œä½†æ˜¯goå¯¹é˜Ÿåˆ—ä»¥åŠä¼˜å…ˆé˜Ÿåˆ—çš„å®ç°åªæä¾›äº†ä¸€ä¸ªæ¥å£ï¼Œå³container/heapåŒ…ä¸­çš„heapæ•°æ®ç»“æ„ï¼Œæ•…å®ç°è¿˜æ˜¯è¦è‡ªå·±å»ç ï¼Œè¿™é‡Œåšä¸€ä¸ªç¬”è®°ã€‚å®ç°äº†heapæ¥å£æ¥å®ç°priority_queueï¼Œå¹¶ä¸”æä¾›äº†å…¶ä»–æ–¹æ³•çš„å®ç°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;heapåŸç†&#34;&gt;heapåŸç†&lt;/h2&gt;
&lt;p&gt;goçš„container/heapåŒ…å®ç°çš„æ˜¯æ•°æ®ç»“æ„æ˜¯æ•°ç»„æ„æˆçš„äºŒå‰æ ‘ï¼ˆå®Œå…¨äºŒå‰æ ‘ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ ‘ä¸­æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯ä¸å¤§äºæˆ–ä¸å°äºå…¶å­©å­èŠ‚ç‚¹çš„å€¼ï¼›
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å­æ ‘éƒ½æ˜¯å †æ ‘
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// index  0  1  2  3  4   5  6   7   8  9
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// index  1  2  3  4   5  6   7   8  9  10
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// a[] = {4, 1, 3, 2, 16, 9, 10, 14, 8, 7}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//                  4
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//                /  \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//               1    3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//              / \  / \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//             2  16 9  10
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//            /\  /
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//           14 8 7
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// è‹¥å–a[1]ä¸ºå †é¡¶æœ€å¤§æˆ–æœ€å°ï¼Œa[i]çš„å·¦å­èŠ‚ç‚¹ä¸ºa[2i],å³å­èŠ‚ç‚¹ä¸ºa[2i+1],çˆ¶èŠ‚ç‚¹ä¸ºa[i/2]:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//          a[i]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//          /  \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//      a[2i]  a[2i+1]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// è‹¥å–a[0]ä¸ºå †é¡¶æœ€å¤§æˆ–æœ€å°ï¼Œa[i]çš„å·¦å­èŠ‚ç‚¹ä¸ºa[2i+1],å³å­èŠ‚ç‚¹ä¸ºa[2i+2],çˆ¶èŠ‚ç‚¹ä¸ºa[(i-1)/2]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//          a[i]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//          /  \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    a[2i+1]  a[2i+2]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è€Œcontainer/heapåŒ…é‡‡ç”¨çš„æ˜¯a[0]ä½œä¸ºå¯¹é¡¶ï¼Œæ•…å·¦å­ã€å³å­èŠ‚ç‚¹ä»¥åŠçˆ¶èŠ‚ç‚¹è¡¨ç¤ºä¸ºa[2i+1]ã€a[2i+2]ã€a[(i-1)/2]ã€‚&lt;/p&gt;
&lt;h2 id=&#34;containerheapæºç &#34;&gt;container/heapæºç &lt;/h2&gt;
&lt;p&gt;container/heapåŒ…æ˜¯Goå†…ç½®çš„æ¥å£ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// The Interface type describes the requirements
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// for a type using the routines in this package.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Any type that implements it may be used as a
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// min-heap with the following invariants (established after
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Init has been called or if the data is empty or sorted):
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//	!h.Less(j, i) for 0 &amp;lt;= i &amp;lt; h.Len() and 2*i+1 &amp;lt;= j &amp;lt;= 2*i+2 and j &amp;lt; h.Len()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Note that Push and Pop in this interface are for package heap&amp;#39;s
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// implementation to call. To add and remove things from the heap,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// use heap.Push and heap.Pop.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Interface&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;sort&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Interface&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Push&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}) &lt;span style=&#34;color:#75715e&#34;&gt;// add x as element Len()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Pop&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}   &lt;span style=&#34;color:#75715e&#34;&gt;// remove and return element Len() - 1.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Init establishes the heap invariants required by the other routines in this package.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Init is idempotent with respect to the heap invariants
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// and may be called whenever the heap invariants may have been invalidated.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// The complexity is O(n) where n = h.Len().
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Init&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Interface&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// heapify
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Len&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;--&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;down&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Push pushes the element x onto the heap.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// The complexity is O(log n) where n = h.Len().
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Push&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Interface&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Push&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;up&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Len&lt;/span&gt;()&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Pop removes and returns the minimum element (according to Less) from the heap.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// The complexity is O(log n) where n = h.Len().
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Pop is equivalent to Remove(h, 0).
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Pop&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Interface&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{} {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Len&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Swap&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;down&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pop&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Remove removes and returns the element at index i from the heap.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// The complexity is O(log n) where n = h.Len().
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Remove&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Interface&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{} {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Len&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Swap&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;down&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;up&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pop&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Fix re-establishes the heap ordering after the element at index i has changed its value.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Changing the value of the element at index i and then calling Fix is equivalent to,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// but less expensive than, calling Remove(h, i) followed by a Push of the new value.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// The complexity is O(log n) where n = h.Len().
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Fix&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Interface&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;down&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Len&lt;/span&gt;()) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;up&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;up&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Interface&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// parent
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Less&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Swap&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;down&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Interface&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i0&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;j1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;j1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;j1&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; { &lt;span style=&#34;color:#75715e&#34;&gt;// j1 &amp;lt; 0 after int overflow
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;j1&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// left child
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;j2&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;j1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;j2&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Less&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;j2&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;j1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;j2&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// = 2*i + 2  // right child
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Less&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Swap&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ç®€å•ä½¿ç”¨&#34;&gt;ç®€å•ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;ç”±ä»¥ä¸Šæºç å¯çŸ¥ï¼Œè¦å®ç°ä¸€ä¸ªheapæ•°æ®ç»“æ„ï¼Œéœ€è¦å®ç°Len()ã€Less()ï¼ˆæ ¹æ®è¿™é‡Œæ§åˆ¶å¤§é¡¶å †è¿˜æ˜¯å°é¡¶å †ï¼‰ã€Swap()ã€Push()ã€Pop()ã€Fix()(æˆ–Update())æ–¹æ³•ï¼Œå…¶ä¸­Fixæ–¹æ³•æ˜¯å¯é€‰çš„ã€‚Fixæ–¹æ³•ä¸»è¦æ˜¯ä¼ å…¥å…ƒç´ å’Œå…ƒç´ æ‰€åœ¨æ•°ç»„çš„indexï¼Œå¹¶ä¸”ä¸‹æ²‰è¯¥å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å®ç°ä¸€ä¸ªç®€å•çš„[]intæ•°ç»„æ„æˆçš„heapã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;heap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IntHeap&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IntHeap&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Len&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;           { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;) }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IntHeap&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Less&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;] &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt;] }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IntHeap&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Swap&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;)      { &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;], &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt;], &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;] }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;IntHeap&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Push&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; = append(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt;.(&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;IntHeap&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Pop&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{} {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; : &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;*  test file
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;**/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;heap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;container/heap&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;log&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;testing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;TestHeap&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;testing&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;T&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;IntHeap&lt;/span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;heap&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Init&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;heap&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Push&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Len&lt;/span&gt;() &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;heap&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pop&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;*  output
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;**/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;= &lt;span style=&#34;color:#a6e22e&#34;&gt;RUN&lt;/span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;TestHeap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;09&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;09&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;09&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;09&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;09&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;09&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·å°±å¯ä»¥å®ç°intæ•°ç»„çš„å°é¡¶å †ï¼Œå¦‚æœéœ€è¦å®ç°æ›´åŠ å¤æ‚çš„æ•°æ®ç»“æ„çš„heapï¼Œå¯ä»¥å‚è€ƒ[]intçš„æ–¹æ³•æ¥å®ç°ï¼Œå¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;heap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;wight&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DataHeap&lt;/span&gt; []&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DataHeap&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Len&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;           { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;) }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DataHeap&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Less&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;].&lt;span style=&#34;color:#a6e22e&#34;&gt;wight&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt;].&lt;span style=&#34;color:#a6e22e&#34;&gt;wight&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DataHeap&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Swap&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;)      { &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;], &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;j&lt;/span&gt;], &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;] }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DataHeap&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Push&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; = append(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt;.(&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DataHeap&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Pop&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{} {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; : &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;*  test file
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;**/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;heap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;container/heap&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;log&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;testing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;TestDataHeap&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;testing&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;T&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DataHeap&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;},&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;},&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;heap&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Init&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;heap&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Push&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;,&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;340&lt;/span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Len&lt;/span&gt;() &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;heap&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pop&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;*  output
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;**/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;= &lt;span style=&#34;color:#a6e22e&#34;&gt;RUN&lt;/span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;TestDataHeap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;09&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt; {&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;340&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;09&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt; {&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;09&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt; {&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;09&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt; {&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;09&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;59&lt;/span&gt; {&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å…¶ä»–æ–¹æ³•å®ç°heap&#34;&gt;å…¶ä»–æ–¹æ³•å®ç°heap&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;math/rand&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å †å®ç°æœ€å°ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå³æœ€å°å †
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ•°æ®ç»“æ„æ˜¯æ•°ç»„æ„æˆçš„äºŒå‰æ ‘ï¼ˆå®Œå…¨äºŒå‰æ ‘ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ ‘ä¸­æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯ä¸å¤§äºæˆ–ä¸å°äºå…¶å­©å­èŠ‚ç‚¹çš„å€¼ï¼›
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å­æ ‘éƒ½æ˜¯å †æ ‘
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        1  2  3  4   5  6   7   8  9  10
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// a[] = {4, 1, 3, 2, 16, 9, 10, 14, 8, 7}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//                  4
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//                /  \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//               1    3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//              / \  / \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//             2  16 9  10
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//            /\  /
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//           14 8 7
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// è‹¥å–a[1]ä¸ºå †é¡¶æœ€å¤§æˆ–æœ€å°ï¼Œa[i]çš„å·¦å­èŠ‚ç‚¹ä¸ºa[2i],å³å­èŠ‚ç‚¹ä¸ºa[2i+1],çˆ¶èŠ‚ç‚¹ä¸ºa[i/2]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// è‹¥å–a[0]ä¸ºå †é¡¶æœ€å¤§æˆ–æœ€å°ï¼Œa[i]çš„å·¦å­èŠ‚ç‚¹ä¸ºa[2i+1],å³å­èŠ‚ç‚¹ä¸ºa[2i+2],çˆ¶èŠ‚ç‚¹ä¸ºa[(i-1)/2]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PriorityHeap&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PriorityHeap&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;push&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;pri&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;pri&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;/*if len(p.arr) == 0 {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;		return
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;	}*/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// fixup æ¯”çˆ¶èŠ‚ç‚¹å°çš„å°±ä¸Šæµ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;end&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;father&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;end&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; ) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;father&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;father&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;end&lt;/span&gt;] {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;father&lt;/span&gt;], &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;end&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;end&lt;/span&gt;], &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;father&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;end&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;father&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;father&lt;/span&gt; = (&lt;span style=&#34;color:#a6e22e&#34;&gt;end&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; ) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PriorityHeap&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;pop&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt; = []&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[:&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt; = len(&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// fix down æ¯”å·¦ã€å³èŠ‚ç‚¹å°çš„è¶Šå°è¶Šå¾€å“ªè¾¹ä¸‹æ²‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;farther&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;farther&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt; { &lt;span style=&#34;color:#75715e&#34;&gt;// å³èŠ‚ç‚¹å­˜åœ¨ï¼Ÿ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;] &amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] { &lt;span style=&#34;color:#75715e&#34;&gt;// å·¦èŠ‚ç‚¹æ¯”å³èŠ‚ç‚¹å¤§ï¼Ÿ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;				&lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// é‚£å°±ç”¨å³èŠ‚ç‚¹ï¼Œå¦åˆ™å¾€å·¦å­èŠ‚ç‚¹ä¸‹æ²‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;farther&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;] {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;farther&lt;/span&gt;], &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;], &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;farther&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;farther&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;farther&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;initHeap&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PriorityHeap&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PriorityHeap&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;arr&lt;/span&gt;: []&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;{},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;initHeap&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;rand&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Seed&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;Unix&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;;&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;push&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rand&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Int&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;;&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;pop&lt;/span&gt;(), &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;pop&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/*  output:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;    17 0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;	47 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;	49 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;	52 3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;	55 4
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;	55 5
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;	71 6
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;	74 7
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;	93 8
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;	98 9
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;	-1*/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content>
    </item>
    
    <item>
      <title>é›ªèŠ±ç®—æ³•</title>
      <link>http://hindung.cn/posts/6/</link>
      <pubDate>Thu, 27 Aug 2020 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/6/</guid>
      <description>å‰è¨€ å·¥ä½œé¡¹ç›®ä¸­æœ‰ä½¿ç”¨åˆ°é›ªèŠ±ç®—æ³•(snowflake)ï¼Œè§‰å¾—å¾ˆæœ‰æ„æ€ï¼Œæ‰€ä»¥æƒ³æ·±å…¥äº†è§£ä¸€ä¸‹å®ç°çš„åŸç†å¹¶åšè®°å½•ã€‚
ç®—æ³•ç®€ä»‹ ä»€ä¹ˆæ˜¯é›ªèŠ±ç®—æ³• snowflakeï¼Œé›ªèŠ±ã€‚æ‰€ä»¥snowflakeç®—æ³•å°±å«åšé›ªèŠ±ç®—æ³•ã€‚æœ€æ—©æ˜¯Twitterå†…éƒ¨ä½¿ç”¨çš„åˆ†å¸ƒå¼ç¯å¢ƒå”¯ä¸€IDç”Ÿæˆç®—æ³•ã€‚
è§£å†³äº†ä»€ä¹ˆé—®é¢˜ é‚£ä¹ˆï¼Œè¯¥ç®—æ³•ä¸»è¦è§£å†³äº†ï¼š
 é«˜å¹¶å‘åˆ†å¸ƒå¼ç³»ç»Ÿç¯å¢ƒä¸‹IDä¸é‡å¤ åŸºäºæ—¶é—´æˆ³ï¼Œå¯ä»¥ä¿è¯æœ‰åºé€’å¢ ä¸ä¾èµ–ç¬¬ä¸‰æ–¹åº“æˆ–ä¸­é—´ä»¶ ç”Ÿæˆæ•ˆç‡é«˜  ç®—æ³•åŸç† ä½¿ç”¨ç»Ÿä¸€ä¸é‡å¤ç³»ç»Ÿç¼–å·çš„æœåŠ¡å™¨+æ¯«ç§’çº§æ—¶é—´æˆ³+é€’å¢åºåˆ—åŒ–ç”Ÿæˆ64bité•¿æ•´å‹æ•°å­—ï¼š
+-&amp;gt;1bit not use + 000000000000000000000000000000000000000000000000000000000000000 = 64 bit  &amp;lt;--------------------------------------&amp;gt;&amp;lt;---+----&amp;gt;&amp;lt;----------&amp;gt;  41bit millisecond timestamp = 69 years | 12bit Inc num = 4096  v  10bit machine ID= 1024 64bitæ•´æ•°ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š
 ç¬¬ä¸€ä½ç½®é›¶ï¼Œ1ä¸ºè´Ÿæ•°ï¼Œæ•…ä¸ç”¨ï¼› 41ä½è¡¨ç¤ºæ¯«ç§’çº§æ—¶é—´æˆ³ï¼› 10ä½è¡¨ç¤ºæœºå™¨IDï¼Œæœ€å¤šå¯ä»¥éƒ¨ç½²åœ¨1024å°æœåŠ¡å™¨ä¸Šï¼› 12ä½è¡¨ç¤º1æ¯«ç§’çš„å†…é€’å¢åºåˆ—ï¼Œä»0å¼€å§‹ï¼Œåˆ°4095ï¼›  ä¹Ÿå°±æ˜¯è¯´åŒä¸€æ¯«ç§’å†…æœ€å¤šèƒ½ç”Ÿæˆ4096ä¸ªidï¼Œè¶…å‡ºçš„è¯éœ€è¦ç­‰å¾…ä¸‹ä¸€æ¯«ç§’ï¼Œé›ªèŠ±ç®—æ³•æœ€å¤šå†²çªç­‰å¾…1msã€‚
æœºå™¨IDä¿è¯äº†ç³»ç»Ÿå†…çš„æœºå™¨å”¯ä¸€æ€§ï¼Œæ—¶é—´æˆ³å’Œé€’å¢åºåˆ—å·ä¿è¯äº†æ—¶åºé€’å¢ã€‚
å®ç°æ€è·¯ äº†è§£äº†å”¯ä¸€IDçš„ç»“æ„ä¹‹åå°±å¯ä»¥ç®€å•å®ç°é›ªèŠ±ç®—æ³•ï¼ˆä¼ªä»£ç ï¼‰ï¼š
machineID # æœºå™¨ID n # é€’å¢åºåˆ— now := time().now().Unix() if now == last { # å¦‚æœæ˜¯åŒ1æ¯«ç§’å†…  n++ # è‡ªå¢1  if n &amp;gt; 4095 { # è¶…è¿‡4095ï¼Œåˆ™ç­‰å¾…ä¸‹ä¸€æ¯«ç§’  now = nexttime()  n = 0  } } else {  n = 0  last = now } ID = now &amp;lt;&amp;lt; 22 | mashineID &amp;lt;&amp;lt; 12 | n # å°†ç»“æœæ‹¼æ¥ä¸º64bitä¹‹åè½¬æ¢æˆåè¿›åˆ¶ æ·±å…¥æºä»£ç  é›ªèŠ±ç”Ÿæˆç®—æ³•è§ï¼šsnowflake</description>
      <content>&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;å·¥ä½œé¡¹ç›®ä¸­æœ‰ä½¿ç”¨åˆ°é›ªèŠ±ç®—æ³•(snowflake)ï¼Œè§‰å¾—å¾ˆæœ‰æ„æ€ï¼Œæ‰€ä»¥æƒ³æ·±å…¥äº†è§£ä¸€ä¸‹å®ç°çš„åŸç†å¹¶åšè®°å½•ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç®—æ³•ç®€ä»‹&#34;&gt;ç®—æ³•ç®€ä»‹&lt;/h2&gt;
&lt;h3 id=&#34;ä»€ä¹ˆæ˜¯é›ªèŠ±ç®—æ³•&#34;&gt;ä»€ä¹ˆæ˜¯é›ªèŠ±ç®—æ³•&lt;/h3&gt;
&lt;p&gt;snowflakeï¼Œé›ªèŠ±ã€‚æ‰€ä»¥snowflakeç®—æ³•å°±å«åšé›ªèŠ±ç®—æ³•ã€‚æœ€æ—©æ˜¯Twitterå†…éƒ¨ä½¿ç”¨çš„&lt;em&gt;åˆ†å¸ƒå¼ç¯å¢ƒå”¯ä¸€IDç”Ÿæˆç®—æ³•&lt;/em&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è§£å†³äº†ä»€ä¹ˆé—®é¢˜&#34;&gt;è§£å†³äº†ä»€ä¹ˆé—®é¢˜&lt;/h3&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œè¯¥ç®—æ³•ä¸»è¦è§£å†³äº†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é«˜å¹¶å‘åˆ†å¸ƒå¼ç³»ç»Ÿç¯å¢ƒä¸‹IDä¸é‡å¤&lt;/li&gt;
&lt;li&gt;åŸºäºæ—¶é—´æˆ³ï¼Œå¯ä»¥ä¿è¯æœ‰åºé€’å¢&lt;/li&gt;
&lt;li&gt;ä¸ä¾èµ–ç¬¬ä¸‰æ–¹åº“æˆ–ä¸­é—´ä»¶&lt;/li&gt;
&lt;li&gt;ç”Ÿæˆæ•ˆç‡é«˜&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç®—æ³•åŸç†&#34;&gt;ç®—æ³•åŸç†&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨&lt;em&gt;ç»Ÿä¸€ä¸é‡å¤ç³»ç»Ÿç¼–å·çš„æœåŠ¡å™¨+æ¯«ç§’çº§æ—¶é—´æˆ³+é€’å¢åºåˆ—åŒ–&lt;/em&gt;ç”Ÿæˆ64bité•¿æ•´å‹æ•°å­—ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+-&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;bit&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;not&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;use&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;000000000000000000000000000000000000000000000000000000000000000&lt;/span&gt;  = &lt;span style=&#34;color:#ae81ff&#34;&gt;64&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;bit&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;--------------------------------------&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;---+----&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;----------&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;41&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;bit&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;millisecond&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;timestamp&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;69&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;years&lt;/span&gt;      |  &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;bit&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Inc&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;num&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;4096&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                             &lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                           &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;bit&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;machine&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt;= &lt;span style=&#34;color:#ae81ff&#34;&gt;1024&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;64bitæ•´æ•°ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€ä½ç½®é›¶ï¼Œ1ä¸ºè´Ÿæ•°ï¼Œæ•…ä¸ç”¨ï¼›&lt;/li&gt;
&lt;li&gt;41ä½è¡¨ç¤ºæ¯«ç§’çº§æ—¶é—´æˆ³ï¼›&lt;/li&gt;
&lt;li&gt;10ä½è¡¨ç¤ºæœºå™¨IDï¼Œæœ€å¤šå¯ä»¥éƒ¨ç½²åœ¨1024å°æœåŠ¡å™¨ä¸Šï¼›&lt;/li&gt;
&lt;li&gt;12ä½è¡¨ç¤º1æ¯«ç§’çš„å†…é€’å¢åºåˆ—ï¼Œä»0å¼€å§‹ï¼Œåˆ°4095ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´åŒä¸€æ¯«ç§’å†…æœ€å¤šèƒ½ç”Ÿæˆ4096ä¸ªidï¼Œè¶…å‡ºçš„è¯éœ€è¦ç­‰å¾…ä¸‹ä¸€æ¯«ç§’ï¼Œé›ªèŠ±ç®—æ³•æœ€å¤šå†²çªç­‰å¾…1msã€‚&lt;/p&gt;
&lt;p&gt;æœºå™¨IDä¿è¯äº†ç³»ç»Ÿå†…çš„æœºå™¨å”¯ä¸€æ€§ï¼Œæ—¶é—´æˆ³å’Œé€’å¢åºåˆ—å·ä¿è¯äº†æ—¶åºé€’å¢ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®ç°æ€è·¯&#34;&gt;å®ç°æ€è·¯&lt;/h2&gt;
&lt;p&gt;äº†è§£äº†å”¯ä¸€IDçš„ç»“æ„ä¹‹åå°±å¯ä»¥ç®€å•å®ç°é›ªèŠ±ç®—æ³•ï¼ˆä¼ªä»£ç ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;machineID&lt;/span&gt;  &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;#&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;æœºå™¨ID&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;          &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;#&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;é€’å¢åºåˆ—&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;Unix&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;last&lt;/span&gt; {    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;#&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;å¦‚æœæ˜¯åŒ1æ¯«ç§’å†…&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;              &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;#&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;è‡ªå¢1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4095&lt;/span&gt; {    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;#&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;è¶…è¿‡4095&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;åˆ™ç­‰å¾…ä¸‹ä¸€æ¯«ç§’&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;nexttime&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;last&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt; | &lt;span style=&#34;color:#a6e22e&#34;&gt;mashineID&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; | &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;  &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;#&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;å°†ç»“æœæ‹¼æ¥ä¸º64bitä¹‹åè½¬æ¢æˆåè¿›åˆ¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;æ·±å…¥æºä»£ç &#34;&gt;æ·±å…¥æºä»£ç &lt;/h2&gt;
&lt;p&gt;é›ªèŠ±ç”Ÿæˆç®—æ³•è§ï¼š&lt;a href=&#34;https://github.com/bwmarrin/snowflake&#34;&gt;snowflake&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä»£ç ä¸»è¦ç”Ÿæˆéƒ¨åˆ†:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Generate creates and returns a unique snowflake ID
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// To help guarantee uniqueness
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// - Make sure your system is keeping accurate system time
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// - Make sure you never have multiple nodes running with the same node ID
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Node&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Generate&lt;/span&gt;() &lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;mu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Lock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Since&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;epoch&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;Nanoseconds&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1000000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt; {           &lt;span style=&#34;color:#75715e&#34;&gt;// å¦‚æœæ˜¯åŒä¸€æ¯«ç§’å†…
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;step&lt;/span&gt; = (&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;step&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;stepMask&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// è‡ªå¢1å¹¶æ ¡éªŒæ˜¯å¦è¶…è¿‡4095
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;step&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Since&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;epoch&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;Nanoseconds&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1000000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {   &lt;span style=&#34;color:#75715e&#34;&gt;// ä¸åœ¨åŒä¸€ms
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;step&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// æ‹¼æ¥64bit
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt;((&lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;timeShift&lt;/span&gt; |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        (&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;node&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;nodeShift&lt;/span&gt;) |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        (&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;step&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;mu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Unlock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;é›ªèŠ±ç®—æ³•ä¸éš¾ç†è§£å¹¶ä¸”ç®€å•èƒ½å¤Ÿè‡ªå·±å®ç°ï¼Œè¿™å¤§æ¦‚æ˜¯è¿™ä¸ªç®—æ³•è¢«å¹¿æ³›ä½¿ç”¨çš„ä¸€ä¸ªåŸå› å§ï¼Œæ­¤å¤–ï¼Œé›ªèŠ±ç®—æ³•å¯¹ç³»ç»Ÿçš„æ—¶é’Ÿä¾èµ–æ€§å¾ˆé«˜ï¼Œå¦‚æœæœ‰æŸä¸ªç³»ç»Ÿæ—¶é’Ÿä¸åŒæ­¥ï¼Œå¯èƒ½ä¼šç”ŸæˆåŒä¸€æ—¶é—´æˆ³çš„IDå€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‚è€ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.machengyu.net/tech/2019/12/04/snowflake.html&#34;&gt;http://www.machengyu.net/tech/2019/12/04/snowflake.html&lt;/a&gt;
&lt;a href=&#34;https://www.bilibili.com/video/BV1Xa4y1i7Ax&#34;&gt;https://www.bilibili.com/video/BV1Xa4y1i7Ax&lt;/a&gt;
&lt;a href=&#34;https://github.com/bwmarrin/snowflake&#34;&gt;https://github.com/bwmarrin/snowflake&lt;/a&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>Golang-channel</title>
      <link>http://hindung.cn/posts/5/</link>
      <pubDate>Sat, 01 Aug 2020 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/5/</guid>
      <description>å‰è¨€ æœ¬æ–‡ä¸»è¦è®°å½•å¹³æ—¶ä½¿ç”¨Golangçš„channelå¯¹è±¡æ˜¯å¦‚ä½•åœ¨å†…å­˜ä¸­å­˜å‚¨å’Œå®ç°çš„ï¼ŒåŒ…æ‹¬channelçš„åˆ›å»ºã€å‘é€ã€æ¥æ”¶ã€å®ç°å’Œå…³é—­ï¼Œæœ€ä½³å®è·µç­‰ï¼Œæœ‰æ—¶è¿˜åº”è¯¥æ›´åŠ å…³æ³¨channelçš„é˜»å¡é—®é¢˜ï¼Œä»¥åŠselectåº•å±‚å®ç°ä¸channelçš„é€‰æ‹©æ‰§è¡Œã€‚
channelä¸goroutine  goroutine, to execute tasks independently, potentially in parallel. channels, for communication, synchronization between goroutine.
 æ­£å¦‚ä¸Šé¢è¯´çš„ï¼Œgoroutineæ˜¯ç‹¬ç«‹åœ°ï¼Œå¯èƒ½å¹¶è¡Œåœ°æ‰§è¡Œä»»åŠ¡ã€‚channelæ˜¯æœåŠ¡ä¸goroutineä¹‹é—´çš„é€šè®¯ï¼ŒåŒæ­¥ç­‰ã€‚
Goè¯­è¨€çš„å¹¶å‘æ¨¡å‹æ˜¯åŸºäºCSPçš„ï¼Œ Golangä»CSPä¸­å¸æ”¶äº†Process/Channelã€‚
channelæ˜¯ä¸€ç§ï¼š
 åç¨‹å®‰å…¨ å¯ä»¥åœ¨åç¨‹ä¹‹é—´å­˜å‚¨å’Œä¼ è¾“å€¼ å…ˆè¿›å…ˆå‡º èƒ½å¤Ÿå¯¼è‡´åç¨‹é˜»å¡æˆ–ä¸é˜»å¡ï¼ˆblock or unblockï¼‰  å…³äºgoroutineçš„å†…å®¹ä»¥ååœ¨æ·±å…¥ï¼Œæœ¬æ–‡å°±é‡ç‚¹äº†è§£ä¸€ä¸‹channelã€‚
 Do not communicate by sharing memory; instead, share memory by communicating.
 è¿™æ˜¯Goè¯­è¨€çš„å¹¶å‘å“²å­¦ã€‚
ä¸‹é¢å°±æ¥è¯¦ç»†äº†è§£ä¸€ä¸‹golangæ˜¯å¦‚ä½•å®ç°channelè¿™ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”å¦‚ä½•å®ç°goroutineä¹‹é—´çš„æ•°æ®é€šä¿¡çš„ã€‚
channelçš„åŸºæœ¬ä½¿ç”¨ var ch chan int //å£°æ˜ä¸€ä¸ªintç±»å‹çš„channelï¼Œæ³¨æ„ï¼Œè¯¥è¯­å¥ä»…å£°æ˜ï¼Œä¸åˆå§‹åŒ–channel  ch := make(chan int) //åˆ›å»ºä¸€ä¸ªæ— ç¼“å†²çš„intå‹çš„channelï¼Œæ— ç¼“å†²çš„channelå½“æ”¾å…¥1ä¸ªå…ƒç´ åï¼Œåç»­çš„è¾“å…¥ä¾¿ä¼šé˜»å¡  ch := make(chan int, 10) //åˆ›å»ºä¸€ä¸ªç¼“å†²åŒºå¤§å°ä¸º10çš„intå‹çš„channel  ch &amp;lt;- x //å°†xå‘é€åˆ°channelä¸­ï¼Œå¦‚æœchannelç¼“å†²åŒºæ»¡ï¼Œåˆ™é˜»å¡å½“å‰goroutine  &amp;lt;- ch //ä»channelä¸­æ¥æ”¶ä¸€ä¸ªå€¼ï¼Œå¦‚æœç¼“å†²åŒºä¸ºç©ºï¼Œåˆ™é˜»å¡  x = &amp;lt;- ch //ä»channelä¸­æ¥æ”¶ä¸€ä¸ªå€¼å¹¶å­˜åˆ°xä¸­ï¼Œå¦‚æœç¼“å†²åŒºä¸ºç©ºï¼Œåˆ™é˜»å¡  x, ok = &amp;lt;- ch //ä»channelä¸­æ¥æ”¶ä¸€ä¸ªå€¼ï¼Œå¦‚æœchannelå…³é—­äº†ï¼Œé‚£ä¹ˆokä¸ºfalseï¼ˆåœ¨æ²¡æœ‰defaultselectè¯­å¥çš„å‰æä¸‹ï¼‰ï¼Œåœ¨channelæœªå…³é—­ä¸”ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œä¼šé˜»å¡  close(ch) //å…³é—­channel  for item := range ch {} //ç­‰å¾…å¹¶å–å‡ºchannelä¸­çš„å€¼ï¼Œç›´åˆ°channelå…³é—­ï¼Œä¼šé˜»å¡ æ— ç¼“å†²åŒºçš„channel ä»æ— ç¼“å­˜çš„channelä¸­è¯»å–æ¶ˆæ¯ä¼šé˜»å¡ï¼Œç›´åˆ°goroutineå‘channelä¸­å‘é€æ¶ˆæ¯ï¼›åŒç†ï¼Œå‘æ— ç¼“å­˜çš„channel ä¸­å‘é€æ¶ˆæ¯ä¹Ÿä¼šé˜»å¡ï¼Œç›´åˆ°æœ‰goroutineä»channelä¸­è¯»å–æ¶ˆæ¯ã€‚</description>
      <content>&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦è®°å½•å¹³æ—¶ä½¿ç”¨Golangçš„channelå¯¹è±¡æ˜¯å¦‚ä½•åœ¨å†…å­˜ä¸­å­˜å‚¨å’Œå®ç°çš„ï¼ŒåŒ…æ‹¬channelçš„åˆ›å»ºã€å‘é€ã€æ¥æ”¶ã€å®ç°å’Œå…³é—­ï¼Œæœ€ä½³å®è·µç­‰ï¼Œæœ‰æ—¶è¿˜åº”è¯¥æ›´åŠ å…³æ³¨channelçš„é˜»å¡é—®é¢˜ï¼Œä»¥åŠselectåº•å±‚å®ç°ä¸channelçš„é€‰æ‹©æ‰§è¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;channelä¸goroutine&#34;&gt;channelä¸goroutine&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;goroutine, to execute tasks &lt;em&gt;independently&lt;/em&gt;, potentially in parallel.
channels, for &lt;em&gt;communication&lt;/em&gt;, &lt;em&gt;synchronization&lt;/em&gt; between goroutine.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ­£å¦‚ä¸Šé¢è¯´çš„ï¼Œgoroutineæ˜¯ç‹¬ç«‹åœ°ï¼Œå¯èƒ½å¹¶è¡Œåœ°æ‰§è¡Œä»»åŠ¡ã€‚channelæ˜¯æœåŠ¡ä¸goroutineä¹‹é—´çš„é€šè®¯ï¼ŒåŒæ­¥ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;Goè¯­è¨€çš„å¹¶å‘æ¨¡å‹æ˜¯åŸºäºCSPçš„ï¼Œ Golangä»CSPä¸­å¸æ”¶äº†Process/Channelã€‚&lt;/p&gt;
&lt;p&gt;channelæ˜¯ä¸€ç§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åç¨‹å®‰å…¨&lt;/li&gt;
&lt;li&gt;å¯ä»¥åœ¨åç¨‹ä¹‹é—´å­˜å‚¨å’Œä¼ è¾“å€¼&lt;/li&gt;
&lt;li&gt;å…ˆè¿›å…ˆå‡º&lt;/li&gt;
&lt;li&gt;èƒ½å¤Ÿå¯¼è‡´åç¨‹é˜»å¡æˆ–ä¸é˜»å¡ï¼ˆblock or unblockï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…³äºgoroutineçš„å†…å®¹ä»¥ååœ¨æ·±å…¥ï¼Œæœ¬æ–‡å°±é‡ç‚¹äº†è§£ä¸€ä¸‹channelã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Do not communicate by sharing memory; instead, share memory by communicating.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™æ˜¯Goè¯­è¨€çš„å¹¶å‘å“²å­¦ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å°±æ¥è¯¦ç»†äº†è§£ä¸€ä¸‹golangæ˜¯å¦‚ä½•å®ç°channelè¿™ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”å¦‚ä½•å®ç°goroutineä¹‹é—´çš„æ•°æ®é€šä¿¡çš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;channelçš„åŸºæœ¬ä½¿ç”¨&#34;&gt;channelçš„åŸºæœ¬ä½¿ç”¨&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;//å£°æ˜ä¸€ä¸ªintç±»å‹çš„channelï¼Œæ³¨æ„ï¼Œè¯¥è¯­å¥ä»…å£°æ˜ï¼Œä¸åˆå§‹åŒ–channel
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//åˆ›å»ºä¸€ä¸ªæ— ç¼“å†²çš„intå‹çš„channelï¼Œæ— ç¼“å†²çš„channelå½“æ”¾å…¥1ä¸ªå…ƒç´ åï¼Œåç»­çš„è¾“å…¥ä¾¿ä¼šé˜»å¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//åˆ›å»ºä¸€ä¸ªç¼“å†²åŒºå¤§å°ä¸º10çš„intå‹çš„channel
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;//å°†xå‘é€åˆ°channelä¸­ï¼Œå¦‚æœchannelç¼“å†²åŒºæ»¡ï¼Œåˆ™é˜»å¡å½“å‰goroutine
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;//ä»channelä¸­æ¥æ”¶ä¸€ä¸ªå€¼ï¼Œå¦‚æœç¼“å†²åŒºä¸ºç©ºï¼Œåˆ™é˜»å¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;//ä»channelä¸­æ¥æ”¶ä¸€ä¸ªå€¼å¹¶å­˜åˆ°xä¸­ï¼Œå¦‚æœç¼“å†²åŒºä¸ºç©ºï¼Œåˆ™é˜»å¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;x&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;//ä»channelä¸­æ¥æ”¶ä¸€ä¸ªå€¼ï¼Œå¦‚æœchannelå…³é—­äº†ï¼Œé‚£ä¹ˆokä¸ºfalseï¼ˆåœ¨æ²¡æœ‰defaultselectè¯­å¥çš„å‰æä¸‹ï¼‰ï¼Œåœ¨channelæœªå…³é—­ä¸”ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œä¼šé˜»å¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;close(&lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//å…³é—­channel
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;item&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; {} &lt;span style=&#34;color:#75715e&#34;&gt;//ç­‰å¾…å¹¶å–å‡ºchannelä¸­çš„å€¼ï¼Œç›´åˆ°channelå…³é—­ï¼Œä¼šé˜»å¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;æ— ç¼“å†²åŒºçš„channel&#34;&gt;æ— ç¼“å†²åŒºçš„channel&lt;/h4&gt;
&lt;p&gt;ä»æ— ç¼“å­˜çš„channelä¸­è¯»å–æ¶ˆæ¯ä¼šé˜»å¡ï¼Œç›´åˆ°goroutineå‘channelä¸­å‘é€æ¶ˆæ¯ï¼›åŒç†ï¼Œå‘æ— ç¼“å­˜çš„channel ä¸­å‘é€æ¶ˆæ¯ä¹Ÿä¼šé˜»å¡ï¼Œç›´åˆ°æœ‰goroutineä»channelä¸­è¯»å–æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æœ‰ç¼“å†²åŒºçš„channel&#34;&gt;æœ‰ç¼“å†²åŒºçš„channel&lt;/h4&gt;
&lt;p&gt;æœ‰ç¼“å­˜çš„channe çš„æ„é€ æ–¹å¼ä¸ºæŒ‡å®šmakeå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ä¸ºchannelç¼“å­˜çš„å®¹é‡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ‰ç¼“å­˜çš„channelå®ç°äº†ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—(é‡‡ç”¨ç¯å½¢æ•°ç»„å®ç°)ã€‚å½“ç¼“å­˜æœªæ»¡æ—¶ï¼Œå‘channelä¸­å‘é€æ¶ˆæ¯æ—¶ä¸ä¼šé˜»å¡ï¼Œå½“ç¼“å­˜æ»¡æ—¶ï¼Œå‘é€æ“ä½œå°†è¢«é˜»å¡ï¼Œç›´åˆ°æœ‰å…¶ä»–goroutineä»ä¸­è¯»å–æ¶ˆæ¯ï¼›ç›¸åº”çš„ï¼Œå½“channelä¸­æ¶ˆæ¯ä¸ä¸ºç©ºæ—¶ï¼Œè¯»å–æ¶ˆæ¯ä¸ä¼šå‡ºç°é˜»å¡ï¼Œå½“channelä¸ºç©ºæ—¶ï¼Œè¯»å–æ“ä½œä¼šé€ æˆé˜»å¡ï¼Œç›´åˆ°æœ‰goroutineå‘channelä¸­å†™å…¥æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åªè¯»åªå†™çš„channel&#34;&gt;åªè¯»/åªå†™çš„channel&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//å®šä¹‰åªè¯»çš„channel
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;read_only&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;make&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//å®šä¹‰åªå†™çš„channel
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;write_only&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;make&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//å¯åŒæ—¶è¯»å†™
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;read_write&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;make&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸€èˆ¬æ¥è¯´ï¼Œ åªè¯»æˆ–è€…åªå†™çš„channelä¸»è¦ç”¨åœ¨å‚æ•°ä¼ é€’ä¸Šé¢ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªè¯»å–å’Œå‘é€æ•°æ®çš„å‡½æ•°ï¼Œé‚£ä¹ˆåœ¨å‡½æ•°å‚æ•°å®šä¹‰çš„æ—¶å€™å¯ä»¥é™å®šchannelç±»å‹ï¼Œä½¿å¾—æƒé™æœ€å°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//åªèƒ½å¾€channelé‡Œé¢å†™æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;send&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//åªèƒ½ä»channelé‡Œé¢è¯»æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;recv&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;channelçš„åº•å±‚å®ç°&#34;&gt;channelçš„åº•å±‚å®ç°&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“channelä¸èƒ½newå‡ºæ¥ï¼Œåªèƒ½makeå‡ºæ¥ï¼Œè¿™æ˜¯å› ä¸ºchannelæœ¬èº«æ•°æ®ç»“æ„çš„å¤æ‚æ€§ã€‚
æˆ‘ä»¬æœ¬æ¬¡ä¸»è¦é‡ç‚¹çœ‹ä¸€ä¸‹channelåº•å±‚æ˜¯å¦‚ä½•å®ç°çš„ã€‚ï¼ˆæºç æ˜¯åŸºäºGo 1.10.2ï¼‰
channelçš„æ•°æ®ç»“æ„è¡¨ç¤º&lt;/p&gt;
&lt;p&gt;åœ¨src/runtime/chan.goé‡Œé¢å®šä¹‰äº†channelçš„æ•°æ®ç»“æ„&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;hchan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;qcount&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;uint&lt;/span&gt;           &lt;span style=&#34;color:#75715e&#34;&gt;// total data in the queueï¼š channelçš„å½“å‰å…ƒç´ ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯lenæ–¹æ³•çš„ç»“æœ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;dataqsiz&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint&lt;/span&gt;           &lt;span style=&#34;color:#75715e&#34;&gt;// size of the circular queueï¼šchannelçš„å®¹é‡ï¼Œç¯å½¢é˜Ÿåˆ—çš„å¤§å°ï¼Œcapæ–¹æ³•çš„ç»“æœ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;buf&lt;/span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// points to an array of dataqsiz elements :ç¯å½¢æ•°ç»„å®ç°çš„ç¼“å†²åŒº
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;elemsize&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// æ¯ä¸ªå…ƒç´ çš„å¤§å°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;//æ ‡å¿—ä½ï¼Œæ ‡è¯†æ˜¯å¦close
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;elemtype&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;_type&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// element typeï¼š channelå­˜æ”¾å…ƒç´ çš„ç±»å‹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;sendx&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint&lt;/span&gt;   &lt;span style=&#34;color:#75715e&#34;&gt;// send indexï¼š ç¯å½¢é˜Ÿåˆ—ä¸­ä¸‹ä¸€æ¬¡å‘é€å…ƒç´ çš„ç´¢å¼•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;recvx&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint&lt;/span&gt;   &lt;span style=&#34;color:#75715e&#34;&gt;// receive indexï¼š ç¯å½¢é˜Ÿåˆ—ä¸­ä¸‹ä¸€æ¬¡æ¥æ”¶å…ƒç´ çš„ç´¢å¼•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;recvq&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;waitq&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// list of recv waiters  ï¼š recvçš„goroutinueçš„ç­‰å¾…é˜Ÿåˆ—
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;sendq&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;waitq&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// list of send waiters  ï¼š sendçš„goroutinueçš„ç­‰å¾…é˜Ÿåˆ—
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// lock protects all fields in hchan, as well as several
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// fields in sudogs blocked on this channel.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Do not change another G&amp;#39;s status while holding this lock
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// (in particular, do not ready a G), as this can deadlock
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// with stack shrinking.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mutex&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;//äº’æ–¥é‡ï¼Œä¿è¯åŒæ­¥å®‰å…¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šé¢å°±æ˜¯channelå¯¹è±¡çš„æ•°æ®ç»“æ„è¡¨ç¤ºï¼Œå†…éƒ¨æœ‰ä¸€ä¸ªç¯å½¢é˜Ÿåˆ—æ¥å­˜æ”¾æ•°æ®ã€‚å¹¶ä¸”è¿˜æœ‰ä¸¤ä¸ªwaitqé“¾è¡¨æ¥å®ç°goroutineçš„ç­‰å¾…é˜Ÿåˆ—ï¼Œç”¨æ¥å­˜æ”¾å“ªäº›goroutineå› ä¸ºsendæˆ–è€…recvè¢«é˜»å¡åœ¨äº†è¿™ä¸ªchannelä¸Šé¢ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;waitq&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;first&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sudog&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;last&lt;/span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sudog&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€åsudogå°±æ˜¯å¯¹äºgoroutineä¸­çš„Gçš„å°è£…, è®°å½•çš„å°±æ˜¯å› ä¸ºchannelè¯»å†™è¢«é˜»å¡çš„goroutineã€‚
make channelçš„å®ç°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;makechan&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;chantype&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hchan&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Hchan does not contain pointers interesting for GC when elements stored in buf do not contain pointers.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// buf points into the same allocation, elemtype is persistent.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// SudoG&amp;#39;s are referenced from their owning thread so they can&amp;#39;t be collected.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// TODO(dvyukov,rlh): Rethink when collector can move allocated objects.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hchan&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;:  &lt;span style=&#34;color:#75715e&#34;&gt;//æ²¡æœ‰ç¼“å†²åŒº
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// Queue or element size is zero.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; = (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hchan&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;mallocgc&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;hchanSize&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// Race detector uses this location for synchronization.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;buf&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;kind&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kindNoPointers&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;:  &lt;span style=&#34;color:#75715e&#34;&gt;//channelä¸åŒ…å«æŒ‡é’ˆ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// Elements do not contain pointers.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// Allocate hchan and buf in one call.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; = (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hchan&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;mallocgc&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;hchanSize&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;buf&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;hchanSize&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// Elements contain pointers.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; = new(&lt;span style=&#34;color:#a6e22e&#34;&gt;hchan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;buf&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;mallocgc&lt;/span&gt;(uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elemsize&lt;/span&gt; = uint16(&lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elemtype&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dataqsiz&lt;/span&gt; = uint(&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œmake channelé‡Œé¢ä¸»è¦æ˜¯è¦ç”³è¯·ç¯å½¢é˜Ÿåˆ—çš„å†…å­˜å—ï¼Œä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆchannelä¸èƒ½ç”¨newæ¥å®ç°çš„åŸå› äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¹¶ä¸”make channelç”³è¯·æ•°æ®çš„å †å†…å­˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¼ é€’channelå¯¹è±¡è€Œä¸æ˜¯channelçš„æŒ‡é’ˆã€‚&lt;/p&gt;
&lt;h4 id=&#34;channelçš„sendæ–¹æ³•&#34;&gt;channelçš„sendæ–¹æ³•&lt;/h4&gt;
&lt;p&gt;æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„å›¾æ¥è¡¨ç¤ºå‘é€å’Œæ¥å—çš„æµç¨‹ï¼Œåˆšå¼€å§‹çš„æ—¶å€™ï¼Œç¼“å†²åŒºéƒ½æ˜¯ç©ºçš„ã€‚å¦‚æœå¼€å§‹å‘é€ï¼Œé‚£ä¹ˆå˜æˆä¸‹é¢è¿™ç§çŠ¶æ€ï¼Œå¹¶ä¸”sendxå¼€å§‹ç´¯åŠ ã€‚&lt;/p&gt;
&lt;p&gt;ç¼“å†²åŒºå‘é€æ»¡äº†ä»¥åå°±æ˜¯è¿™ç§çŠ¶æ€ï¼š&lt;/p&gt;
&lt;p&gt;channel sendçš„æºä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;chansend&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hchan&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ep&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;block&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;callerpc&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//å¦‚æœæƒ³ä¸€ä¸ªnilçš„channelå‘é€æ•°æ®ï¼Œä¼šè°ƒç”¨goparkå°†å½“å‰çš„goroutineä¼‘çœ ï¼Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//ç„¶åé€šè¿‡ç¬¬ä¸€ä¸ªå‚æ•°å”¤é†’ï¼Œä½†æ˜¯ä¸‹é¢ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯nilé‚£ä¹ˆå°±ä¼šå¯¼è‡´è¿™ä¸ªgoroutineä¸€ç›´ä¼‘çœ 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//å¦‚æœgoroutine sysmonæ£€æŸ¥åˆ°è¿™ç§æƒ…å†µå°±ï¼Œå°±ä¼šthrow(&amp;#34;all goroutines are asleep - deadlock!&amp;#34;) 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;block&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;gopark&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;chan send (nil chan)&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;traceEvGoStop&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;throw&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;unreachable&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;raceenabled&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;racereadpc&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;callerpc&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;funcPC&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;chansend&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Fast path: check for failed non-blocking operation without acquiring the lock.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// After observing that the channel is not closed, we observe that the channel is
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// not ready for sending. Each of these observations is a single word-sized read
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// (first c.closed and second c.recvq.first or c.qcount depending on kind of channel).
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Because a closed channel cannot transition from &amp;#39;ready for sending&amp;#39; to
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// &amp;#39;not ready for sending&amp;#39;, even if the channel is closed between the two observations,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// they imply a moment between the two when the channel was both not yet closed
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// and not ready for sending. We behave as if we observed the channel at that moment,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// and report that the send cannot proceed.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// It is okay if the reads are reordered here: if we observe that the channel is not
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// ready for sending and then observe that it is not closed, that implies that the
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// channel wasn&amp;#39;t closed during the first observation.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;block&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ((&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dataqsiz&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;recvq&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;first&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dataqsiz&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;qcount&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dataqsiz&lt;/span&gt;)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t0&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;blockprofilerate&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;t0&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;cputicks&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//è·å–åŒæ­¥é”
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//ä¸èƒ½å‘å·²ç»closeçš„channelå‘é€æ•°æ®ï¼Œå¦åˆ™ç›´æ¥panic
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;unlock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        panic(&lt;span style=&#34;color:#a6e22e&#34;&gt;plainError&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;send on closed channel&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//å¦‚æœæœ‰goroutineåœ¨è¿™ä¸ªchannelä¸Šé¢ç­‰å¾…ï¼Œé‚£ä¹ˆç›´æ¥å°†æ•°æ®å‘é€ç»™è¿™ä¸ªæ¥æ”¶goroutine
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;recvq&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dequeue&lt;/span&gt;(); &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// Found a waiting receiver. We pass the value we want to send
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// directly to the receiver, bypassing the channel buffer (if any).
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;send&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ep&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() { &lt;span style=&#34;color:#a6e22e&#34;&gt;unlock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;) }, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#75715e&#34;&gt;//ç¼“å†²é˜Ÿåˆ—è¿˜æ²¡æœ‰æ»¡ï¼Œé‚£ä¹ˆç›´æ¥å°†æ•°æ®å¤åˆ¶åˆ°ç¼“å†²é˜Ÿåˆ—é‡Œé¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;qcount&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dataqsiz&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// Space is available in the channel buffer. Enqueue the element to send.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;qp&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;chanbuf&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;sendx&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;raceenabled&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;raceacquire&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;qp&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;racerelease&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;qp&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;typedmemmove&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elemtype&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;qp&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ep&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;sendx&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;sendx&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dataqsiz&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;sendx&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;qcount&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;unlock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;block&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;unlock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Block on the channel. Some receiver will complete our operation for us.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//å¦‚æœç¼“å†²é˜Ÿåˆ—æ»¡äº†ï¼Œä¿ºä¹ˆå°±å°†å½“å‰çš„å‘é€goroutineå¡åˆ°å‘é€é˜Ÿåˆ—ä¸­å»
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;getg&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;acquireSudog&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;releasetime&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;releasetime&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// No stack splits between assigning elem and enqueuing mysg
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// on gp.waiting where copystack can find it.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;ep&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;waitlink&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;g&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;isSelect&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;waiting&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;param&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;sendq&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;enqueue&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;)  &lt;span style=&#34;color:#75715e&#34;&gt;//å…¥é˜Ÿåˆ—
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;goparkunlock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;chan send&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;traceEvGoBlockSend&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// someone woke us up.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;waiting&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;throw&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;G waiting list is corrupted&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;waiting&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;param&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;throw&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;chansend: spurious wakeup&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        panic(&lt;span style=&#34;color:#a6e22e&#34;&gt;plainError&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;send on closed channel&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;param&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;releasetime&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;blockevent&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;releasetime&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;releaseSudog&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹åˆ°åŸºæœ¬å‘é€æµç¨‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è·å–åŒæ­¥é”ï¼Œå¯¹ç¼“å†²é˜Ÿåˆ—è¿›è¡ŒåŠ é”&lt;/li&gt;
&lt;li&gt;å¦‚æœæœ‰ç­‰å¾…çš„goroutinueï¼Œé‚£ä¹ˆæ•°æ®ç›´æ¥å‘é€ç»™è¿™ä¸ªæ¥æ”¶goroutineï¼Œæ•°æ®æ‹·è´1æ¬¡&lt;/li&gt;
&lt;li&gt;å¦‚æœç¼“å†²é˜Ÿåˆ—æ²¡æœ‰æ»¡ï¼Œå°†å‘é€çš„æ•°æ®æ‹·è´åˆ°é˜Ÿåˆ—ä¸­ï¼ŒsendxåŠ 1&lt;/li&gt;
&lt;li&gt;å¦‚æœç¼“å†²é˜Ÿåˆ—æ»¡äº†ï¼Œé‚£ä¹ˆå°†å‘é€goroutineæ”¾åˆ°å‘é€é˜»å¡é˜Ÿåˆ—ä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;channelçš„recvæ–¹æ³•&#34;&gt;channelçš„recvæ–¹æ³•&lt;/h4&gt;
&lt;p&gt;åœ¨å‘é€çš„ç« èŠ‚ï¼Œæˆ‘ä»¬å·²ç»æŠŠç¼“å†²åŒºé‡Œé¢å­˜æ”¾äº†æ•°æ®ï¼Œç„¶åå°±æ˜¯æ¥å—çš„goroutinueå¼€å§‹æ¥å—æ•°æ®äº†ã€‚
image.png&lt;/p&gt;
&lt;p&gt;ç›´åˆ°æŠŠæ•°æ®è¯»å®Œé˜»å¡ä¸ºæ­¢ã€‚&lt;/p&gt;
&lt;p&gt;channel recvçš„æºä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;chanrecv&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hchan&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ep&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;block&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;selected&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;received&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// raceenabled: don&amp;#39;t need to check ep, as it is always on the stack
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// or is new memory allocated by reflect.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Fast path: check for failed non-blocking operation without acquiring the lock.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// After observing that the channel is not ready for receiving, we observe that the
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// channel is not closed. Each of these observations is a single word-sized read
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// (first c.sendq.first or c.qcount, and second c.closed).
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Because a channel cannot be reopened, the later observation of the channel
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// being not closed implies that it was also not closed at the moment of the
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// first observation. We behave as if we observed the channel at that moment
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// and report that the receive cannot proceed.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// The order of operations is important here: reversing the operations can lead to
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// incorrect behavior when racing with a close.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;block&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dataqsiz&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;sendq&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;first&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dataqsiz&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;atomic&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Loaduint&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;qcount&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;atomic&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Load&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t0&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;blockprofilerate&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;t0&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;cputicks&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//åŠ é”
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//å¦‚æœchannelå·²ç»å…³é—­å¹¶ä¸”channelä¸ºç©ºï¼Œé‚£ä¹ˆrecvçš„æ—¶å€™è¿”å›ç©ºå€¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;qcount&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;raceenabled&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;raceacquire&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;unlock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ep&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;typedmemclr&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elemtype&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ep&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//å¦‚æœæœ‰sendé˜»å¡é˜Ÿåˆ—
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//å¦‚æœchannelæ²¡æœ‰ç¼“å†²åŒºï¼Œé‚£ä¹ˆç›´æ¥ä»send goroutineæ¥æ”¶æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//å¦åˆ™ä»ç¼“å†²åŒºé˜Ÿåˆ—å¤´å–å‡ºæ•°æ®ï¼Œå¹¶ä¸”å”¤é†’sendå¼€å§‹å†™å…¥æ•°æ®åˆ°é˜Ÿåˆ—å°¾éƒ¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;sendq&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dequeue&lt;/span&gt;(); &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// Found a waiting sender. If buffer is size 0, receive value
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// directly from sender. Otherwise, receive from head of queue
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// and add sender&amp;#39;s value to the tail of the queue (both map to
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// the same buffer slot because the queue is full).
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;recv&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ep&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() { &lt;span style=&#34;color:#a6e22e&#34;&gt;unlock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;) }, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//ç¼“å­˜é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆä»é˜Ÿåˆ—è·å–æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;qcount&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// Receive directly from queue
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;qp&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;chanbuf&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;recvx&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;raceenabled&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;raceacquire&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;qp&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;racerelease&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;qp&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ep&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;typedmemmove&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elemtype&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ep&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;qp&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;typedmemclr&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elemtype&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;qp&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;recvx&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;recvx&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dataqsiz&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;recvx&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;qcount&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;--&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;unlock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;block&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;unlock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//ç¼“å­˜é˜Ÿåˆ—ä¸ºç©ºï¼Œé‚£ä¹ˆå°†recv goroutineåŠ å…¥åˆ°recvé˜»å¡é˜Ÿåˆ—ä¸­
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// no sender available: block on this channel.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;getg&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;acquireSudog&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;releasetime&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;releasetime&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// No stack splits between assigning elem and enqueuing mysg
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// on gp.waiting where copystack can find it.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;ep&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;waitlink&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;waiting&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;g&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;isSelect&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;param&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;recvq&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;enqueue&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;goparkunlock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;chan receive&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;traceEvGoBlockRecv&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// someone woke us up
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;waiting&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;throw&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;G waiting list is corrupted&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;waiting&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;releasetime&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;blockevent&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;releasetime&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;param&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;param&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;releaseSudog&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mysg&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;, !&lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;channelçš„æ•°æ®æ¥æ”¶å’Œå‘é€æ¯”è¾ƒç±»ä¼¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºé˜Ÿåˆ—è¿›è¡ŒåŠ é”&lt;/li&gt;
&lt;li&gt;å¦‚æœæœ‰sendé˜»å¡é˜Ÿåˆ—ï¼Œé‚£ä¹ˆ
&lt;ul&gt;
&lt;li&gt;å¦‚æœchannelæ²¡æœ‰ç¼“å†²åŒºï¼Œé‚£ä¹ˆç›´æ¥ä»send goroutineæ¥æ”¶æ•°æ®&lt;/li&gt;
&lt;li&gt;å¦åˆ™ä»ç¼“å†²åŒºé˜Ÿåˆ—å¤´å–å‡ºæ•°æ®ï¼Œå¹¶ä¸”å”¤é†’sendå¼€å§‹å†™å…¥æ•°æ®åˆ°é˜Ÿåˆ—å°¾éƒ¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¼“å­˜é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆä»é˜Ÿåˆ—è·å–æ•°æ®ï¼Œæ•°æ®éƒ½æ˜¯æ‹·è´å‡ºæ¥çš„ã€‚&lt;/li&gt;
&lt;li&gt;ç¼“å­˜é˜Ÿåˆ—ä¸ºç©ºï¼Œé‚£ä¹ˆå°†recv goroutineåŠ å…¥åˆ°recvé˜»å¡é˜Ÿåˆ—ä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å…³é—­channel&#34;&gt;å…³é—­channel&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;closechan&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hchan&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        panic(&lt;span style=&#34;color:#a6e22e&#34;&gt;plainError&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;close of nil channel&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//é‡å¤closeåŒä¸€ä¸ªchannelä¼španic
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;unlock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        panic(&lt;span style=&#34;color:#a6e22e&#34;&gt;plainError&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;close of closed channel&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;raceenabled&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;callerpc&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;getcallerpc&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;racewritepc&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;callerpc&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;funcPC&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;closechan&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;racerelease&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;glist&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;g&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//æŠŠæ‰€æœ‰çš„é˜»å¡çš„recvgoroutineå”¤é†’
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// release all readers
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;recvq&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dequeue&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;typedmemclr&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elemtype&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;releasetime&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;releasetime&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;cputicks&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;g&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;param&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;raceenabled&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;raceacquireg&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;schedlink&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;set&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;glist&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;glist&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//å”¤é†’æ‰€æœ‰çš„é˜»å¡çš„send
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// release all writers (they will panic)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;sendq&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dequeue&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;releasetime&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;releasetime&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;cputicks&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;g&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;param&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;raceenabled&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;raceacquireg&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;schedlink&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;set&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;glist&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;glist&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;unlock&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lock&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Ready all Gs now that we&amp;#39;ve dropped the channel lock.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;glist&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;glist&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;glist&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;glist&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;schedlink&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;schedlink&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;goready&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gp&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;close channel çš„å·¥ä½œé™¤äº†å°† ch.closed è®¾ç½®ä¸º1ã€‚è¿˜éœ€è¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å”¤é†’ recvq é˜Ÿåˆ—é‡Œé¢çš„é˜»å¡ goroutine&lt;/li&gt;
&lt;li&gt;å”¤é†’ sendq é˜Ÿåˆ—é‡Œé¢çš„é˜»å¡ goroutine&lt;/li&gt;
&lt;li&gt;å¤„ç†æ–¹å¼æ˜¯åˆ†åˆ«éå† recvq å’Œ sendq é˜Ÿåˆ—ï¼Œå°†æ‰€æœ‰çš„ goroutine æ”¾åˆ° glist é˜Ÿåˆ—ä¸­ï¼Œæœ€åå”¤é†’ glist é˜Ÿåˆ—ä¸­çš„ goroutineã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;selectä¸channel&#34;&gt;selectä¸channel&lt;/h3&gt;
&lt;p&gt;selectç”¨äºåœ¨å¤šä¸ªchannelä¸ŠåŒæ—¶è¿›è¡Œä¾¦å¬å¹¶æ”¶å‘æ¶ˆæ¯ï¼Œå½“ä»»ä½•ä¸€ä¸ªcaseæ»¡è¶³æ¡ä»¶æ—¶å³æ‰§è¡Œï¼Œå¦‚æœæ²¡æœ‰å¯æ‰§è¡Œçš„caseåˆ™ä¼šæ‰§è¡Œdefaultçš„caseï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šdefaultcaseï¼Œåˆ™ä¼šé˜»å¡ç¨‹åºï¼Œselectçš„è¯­æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;select&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;communication&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;clause&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;statement&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;);     
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;communication&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;clause&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;statement&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#75715e&#34;&gt;/*å¯ä»¥å®šä¹‰ä»»æ„æ•°é‡çš„ case */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt; : &lt;span style=&#34;color:#75715e&#34;&gt;/*å¯é€‰ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;statement&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸‹é¢æ¥çœ‹ä¸€ä¸‹golangåº•å±‚æ˜¯å¦‚ä½•å®ç°selectå’Œchannelçš„é…åˆçš„ã€‚
ä¸€ä¸ªsend case + default&lt;/p&gt;
&lt;p&gt;å¯¹äºè¿™ç§æƒ…å†µï¼Œchan.goæºç ä¸­æ˜¯å¦‚ä¸‹å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// compiler implements
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    select {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    case c &amp;lt;- v:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        ... foo
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    default:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        ... bar
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// as
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    if selectnbsend(c, v) {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        ... foo
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    } else {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        ... bar
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;selectnbsend&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hchan&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;selected&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;chansend&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;getcallerpc&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ä¸€ä¸ªrecv&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// compiler implements
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    select {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    case v = &amp;lt;-c:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        ... foo
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    default:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        ... bar
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// as
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    if selectnbrecv(&amp;amp;v, c) {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        ... foo
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    } else {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        ... bar
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;selectnbrecv&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hchan&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;selected&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;selected&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;chanrecv&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;å¸¦æœ‰okç»“æœçš„recv&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// compiler implements
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    select {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    case v, ok = &amp;lt;-c:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        ... foo
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    default:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        ... bar
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// as
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    if c != nil &amp;amp;&amp;amp; selectnbrecv2(&amp;amp;v, &amp;amp;ok, c) {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        ... foo
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    } else {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//        ... bar
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;selectnbrecv2&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;received&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hchan&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;selected&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// TODO(khr): just return 2 values from this function, now that it is in Go.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;selected&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;received&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;chanrecv&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;å¤šç§case&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;defaultæ··åˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;å¦‚æœä¸‹é¢è¿™ç§å¤šä¸ªcaseæ··åˆçš„ä»£ç &lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;é‚£ä¹ˆselectæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼Ÿ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ch2&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//çœç•¥åˆå§‹åŒ–channel
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;select&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ch2&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ch&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬é€šè¿‡go build -gcflags -S helloworld.go 2&amp;gt; helloworld.sæ¥åæ±‡ç¼–ä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ä»£ç ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0084&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00132&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;newselect&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0089&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00137&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;LEAQ&lt;/span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;..&lt;span style=&#34;color:#a6e22e&#34;&gt;autotmp_8&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;88&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x008e&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00142&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, (&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0092&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00146&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;XORPS&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;X1&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;X1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0095&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0014&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;MOVUPS&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;X1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x009a&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00154&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00a3&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00163&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00a3&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00163&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selectrecv&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00a8&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0016&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;LEAQ&lt;/span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;..&lt;span style=&#34;color:#a6e22e&#34;&gt;autotmp_8&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;88&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00ad&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00173&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, (&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00b1&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00177&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00ba&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;001&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;86&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;LEAQ&lt;/span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;..&lt;span style=&#34;color:#a6e22e&#34;&gt;autotmp_3&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00bf&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;001&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;91&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00c4&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;001&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;96&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00cd&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00205&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00cd&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00205&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selectrecv&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00d2&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00210&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;LEAQ&lt;/span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;..&lt;span style=&#34;color:#a6e22e&#34;&gt;autotmp_8&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;88&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00d7&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00215&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, (&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00db&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0021&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00e4&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0022&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;LEAQ&lt;/span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;..&lt;span style=&#34;color:#a6e22e&#34;&gt;autotmp_7&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;48&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00e9&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00233&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00ee&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0023&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00ee&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0023&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selectsend&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00f3&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00243&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;LEAQ&lt;/span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;..&lt;span style=&#34;color:#a6e22e&#34;&gt;autotmp_8&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;88&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00f8&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0024&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, (&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00fc&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00252&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00fc&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00252&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selectdefault&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0101&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00257&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;LEAQ&lt;/span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;..&lt;span style=&#34;color:#a6e22e&#34;&gt;autotmp_8&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;88&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0106&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00262&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, (&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x010a&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00266&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;    &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x010a&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00266&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selectgo&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x010f&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00271&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0114&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00276&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;TESTQ&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;å…¶ä¸­ä¸‹é¢è¿™å‡ è¡Œå°±æ˜¯å…³é”®&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0084&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00132&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;newselect&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00a3&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00163&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selectrecv&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00cd&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00205&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selectrecv&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00ee&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0023&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selectsend&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00fc&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00252&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selectdefault&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0x010a&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00266&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;helloworld&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;)    &lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;selectgo&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬åœ¨src\runtime\select.goä¸‹é¢å¯ä»¥æ‰¾åˆ°selectgoæ–¹æ³•ï¼Œè¿™ä¸ªæ˜¯selectçš„è°ƒåº¦æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;selectgo&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hselect&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;loop&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// pass 1 - look for something already waiting
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dfli&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dfl&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;scase&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;casi&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cas&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;scase&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; int(&lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ncase&lt;/span&gt;); &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;casi&lt;/span&gt; = int(&lt;span style=&#34;color:#a6e22e&#34;&gt;pollorder&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;cas&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;scases&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;casi&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;cas&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cas&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;kind&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;caseNil&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;continue&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;//æ¥æ”¶æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;caseRecv&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;sendq&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dequeue&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;//å¦‚æœæœ‰å‘é€goroutineé˜»å¡ï¼Œé‚£ä¹ˆå°±æ¥æ”¶æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;goto&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;recv&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;//å¦‚æœç¼“å†²é˜Ÿåˆ—é‡Œé¢æœ‰æ•°æ®ï¼Œæ¥æ”¶æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;qcount&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;goto&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;bufrecv&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;//å¦‚æœchannelæ˜¯å…³é—­çš„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;goto&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rclose&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;caseSend&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;raceenabled&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;racereadpc&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;cas&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;pc&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;chansendpc&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;closed&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;goto&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sclose&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;//å¦‚æœæœ‰æ¥æ”¶goroutineé˜»å¡ï¼Œé‚£ä¹ˆå°±å‘é€æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;recvq&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dequeue&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sg&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;goto&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;send&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;//å¦‚æœç¼“å†²åŒºä¸ä¸ºç©ºï¼Œé‚£ä¹ˆå‘é€æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;qcount&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dataqsiz&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;goto&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;bufsend&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;//defaultåˆ†æ”¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;caseDefault&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;dfli&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;casi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;dfl&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;cas&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…¶ä»–çš„selectsendï¼Œ selectrecvï¼Œ selectdefaultéƒ½æ˜¯å¢åŠ selectçš„scasesï¼Œå°†åˆ†æ”¯åŠ å…¥åˆ°è°ƒåº¦åˆ—è¡¨ä¸­å»ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;newselect&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hselect&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;selsize&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;selsize&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; int64(&lt;span style=&#34;color:#a6e22e&#34;&gt;selectsize&lt;/span&gt;(uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;))) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;runtime: bad select size &amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;selsize&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;, want &amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;selectsize&lt;/span&gt;(uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;)), &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\n&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;throw&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;bad select size&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;tcase&lt;/span&gt; = uint16(&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ncase&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lockorder&lt;/span&gt; = (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uint16&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;scase&lt;/span&gt;), uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sizeof&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;hselect&lt;/span&gt;{}.&lt;span style=&#34;color:#a6e22e&#34;&gt;scase&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;])))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;pollorder&lt;/span&gt; = (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uint16&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;lockorder&lt;/span&gt;), uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sizeof&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hselect&lt;/span&gt;{}.&lt;span style=&#34;color:#a6e22e&#34;&gt;lockorder&lt;/span&gt;)))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;selectsend&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hselect&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hchan&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;pc&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;getcallerpc&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ncase&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;tcase&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;throw&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;selectsend: too many cases&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ncase&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;cas&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;scase&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;scase&lt;/span&gt;), uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sizeof&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;scase&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;])))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;cas&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;pc&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;pc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;cas&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;cas&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;kind&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;caseSend&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;cas&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;elem&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;debugSelect&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;selectsend s=&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;sel&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; pc=&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;hex&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;cas&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;pc&lt;/span&gt;), &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; chan=&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;cas&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\n&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;selectæœ‰è‡ªå·±çš„æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬hselectå’Œscaseï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†å±•å¼€selectçš„å†…éƒ¨å®ç°åŸç†çš„ï¼Œæˆ‘ä»¬åªè¦ç†è§£ä¸‹é¢å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœselectä¸‹é¢åªæœ‰defaultè¯­å¥ï¼Œæˆ–è€…åªæœ‰ä¸€ä¸ªcase+defautè¯­å¥ï¼Œç¼–è¯‘å™¨ä¼šé‡æ–°ç”Ÿæˆä¸€äº›ä»£ç ï¼Œç®€å•å¤„ç†è¿™ç§æƒ…å†µã€‚&lt;/li&gt;
&lt;li&gt;selectgoå‡½æ•°æ˜¯æ‰§è¡Œcaseè¯­å¥çš„æ–¹æ³•ï¼Œä¸»è¦æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤æ¥å®æ–½
&lt;ul&gt;
&lt;li&gt;evaluate all the involved channels and values&lt;/li&gt;
&lt;li&gt;permuting the cases slice elements (randomize)&lt;/li&gt;
&lt;li&gt;ordering elements according to cases hchan address&lt;/li&gt;
&lt;li&gt;locking all the channels&lt;/li&gt;
&lt;li&gt;starting to loopâ€¦&lt;/li&gt;
&lt;li&gt;a. checking if a channel is already waiting, so we can use it immediately (and itâ€™s done)&lt;/li&gt;
&lt;li&gt;b. otherwise, enqueuing on all channels (and sleep)&lt;/li&gt;
&lt;li&gt;c. waiting for another goroutine to wake us up&lt;/li&gt;
&lt;li&gt;d. another goroutine wake us up (done = 1)&lt;/li&gt;
&lt;li&gt;e. dequeuing of all the other channels&lt;/li&gt;
&lt;li&gt;i. if we were waken up by a channel close operation, return to a.&lt;/li&gt;
&lt;li&gt;ii. else, weâ€™re done :)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å‘é€å’Œæ¥æ”¶çš„é˜»å¡&#34;&gt;å‘é€å’Œæ¥æ”¶çš„é˜»å¡&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ä»å‰é¢å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœå‘é€çš„æ—¶å€™ï¼Œæ¥æ”¶ç«¯æ²¡æœ‰å‡†å¤‡å¥½ï¼Œæˆ–è€…ç¼“å†²åŒºé˜Ÿåˆ—æ˜¯æ»¡çš„ï¼Œé‚£ä¹ˆå°±ä¼šå°†å½“å‰çš„goroutineé˜»å¡ï¼Œç„¶åç­‰å¾…å”¤é†’ã€‚ è¿™ä¸ªä¸»è¦æ˜¯æ¶‰åŠåˆ°äº†goroutineçš„åº•å±‚æ¨¡å‹ä»¥åŠè°ƒåº¦æœºåˆ¶ï¼Œè¿™é‡Œä¸»è¦ç®€å•æè¿°ä¸€ä¸‹channelå¯¹è±¡ä¸­sudogå¯¹è±¡æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚&lt;/p&gt;
&lt;p&gt;image.png&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä¸¾ä¸€ä¸ªå‘é€çš„ä¾‹å­ï¼Œå¦‚æœç»™ä¸€ä¸ªç¼“å†²åŒºå·²ç»æ»¡äº†çš„channelå‘é€æ•°æ®ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªsudogå¯¹è±¡ï¼Œsudogå¯¹è±¡é‡Œé¢å°è£…çš„å°±æ˜¯å‘é€goroutineï¼Œ è¿™ä¸ªgoroutineè¢«é˜»å¡ã€‚
image.png&lt;/p&gt;
&lt;p&gt;å¦‚æœè¿™æ—¶å€™recvçš„goroutineå¼€å§‹æ¥å—æ•°æ®ï¼Œé‚£ä¹ˆæ‰¾åˆ°è¢«é˜»å¡çš„send goroutineçš„sudogï¼Œ ç„¶åæŠŠsudogçš„é˜Ÿåˆ—çš„æ•°æ®å¡åˆ°ç¼“å†²åŒºé˜Ÿåˆ—é‡Œé¢ï¼Œå¹¶ä¸”æ¿€æ´»è¿™ä¸ªsudogå¯¹è±¡ï¼Œè®©é‡Œé¢çš„goroutineæˆä¸ºrunnableã€‚
image.png
æ€»ç»“&lt;/p&gt;
&lt;p&gt;å›åˆ°åˆšå¼€å§‹çš„é‚£å¥è¯ï¼š
image.png
è¿™ä¸ªéœ€è¦å¤§å®¶å¥½å¥½ä½“ä¼šä¸€ä¸‹goroutineå’Œchannelæ˜¯å¦‚ä½•å®ç°è¿™ä¸ªæ€æƒ³çš„ï¼Œå¹¶ä¸”ä»åˆ†ææºç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä½¿ç”¨channelå¯¹è±¡çš„ä¸€äº›å¸¸è§é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»™ä¸€ä¸ªnil channelå‘é€æ•°æ®ï¼Œé€ æˆæ°¸è¿œé˜»å¡&lt;/li&gt;
&lt;li&gt;ä»ä¸€ä¸ªnil channelæ¥æ”¶æ•°æ®ï¼Œé€ æˆæ°¸è¿œé˜»å¡&lt;/li&gt;
&lt;li&gt;ç»™ä¸€ä¸ªå·²ç»å…³é—­çš„channelå‘é€æ•°æ®ï¼Œå¼•èµ·panic&lt;/li&gt;
&lt;li&gt;ä»ä¸€ä¸ªå·²ç»å…³é—­çš„channelæ¥æ”¶æ•°æ®ï¼Œç«‹å³è¿”å›ä¸€ä¸ªé›¶å€¼&lt;/li&gt;
&lt;li&gt;å…³é—­å·²ç»å·²ç»å…³é—­çš„channelï¼Œå¼•èµ·panic&lt;/li&gt;
&lt;li&gt;å…³é—­ä¸€ä¸ªnil channelï¼Œå¼•èµ·panic&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å‚è€ƒèµ„æ–™&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://speakerdeck.com/kavya719/understanding-channels&#34;&gt;understanding-channels&lt;/a&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>Golangè¯­è¨€æ¨¡å‹</title>
      <link>http://hindung.cn/posts/4/</link>
      <pubDate>Sun, 26 Jul 2020 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/4/</guid>
      <description>å‰è¨€ è¿™ç¯‡ç¬”è®°ä¸»è¦è®°å½•ä¸€ä¸‹å­¦ä¹ Goè§åˆ°çš„å„ç§æ•°æ®ç±»å‹ï¼Œä»æ•°æ®ç±»å‹åœ¨å†…å­˜çš„åˆ†å¸ƒä¸Šçœ‹äº†è§£å…¶ä¸­çš„åŸç†ï¼Œä¸»è¦åŒ…æ‹¬ï¼š
 åŸºæœ¬ç±»å‹ï¼ˆint, string, uint, int8, int16, byte, rune, unitptr, float32, float64, complex64, complex128, boolç­‰ï¼‰ æ•°ç»„å’Œsliceçš„å†…å­˜æ¨¡å‹ï¼ˆstringæ˜¯ç‰¹æ®Šçš„sliceï¼‰ æŒ‡é’ˆçš„å†…å­˜æ¨¡å‹åŠunitpträ¸unsafe.Pointerã€æ™®é€šæŒ‡é’ˆ *Tçš„åŒºåˆ« mapçš„å†…å­˜æ¨¡å‹ structçš„å†…å­˜æ¨¡å‹å’Œå­—èŠ‚å¯¹é½ channelã€goroutineçš„å†…å­˜æ¨¡å‹ä»¥åå•ç‹¬è®°å½• interfaceçš„å†…å­˜æ¨¡å‹å·²ç»åœ¨ç¬¬ä¸€ç¯‡ç¬”è®°é‡Œ  Goçš„å†…å­˜æ¨¡å‹ä¸Cè¯­è¨€å¾ˆåƒï¼Œæ‰€ä»¥äº†è§£Cè¯­è¨€åº”è¯¥å¾ˆå®¹æ˜“ç†è§£Goçš„å†…å­˜æ¨¡å‹ã€‚
åŸºæœ¬ç±»å‹çš„å†…å­˜æ¨¡å‹ Goè¯­è¨€æœ‰18ç§åŸºæœ¬çš„æ•°æ®ç»“æ„ï¼š
bool string rune byte int uint int8 uint8 int16 uint16 int32 uint32 int64 uint64 float32 float64 complex64 complex128 å…¶ä¸­stringå’Œboolç±»å‹æ¯”è¾ƒç‰¹æ®Šï¼Œè¿™ä¸ªåé¢è®¨è®ºã€‚
ç„¶å byte ç±»å‹æ˜¯uint8çš„åˆ«åï¼Œruneæ˜¯int32çš„åˆ«åã€‚
å¹³å°ç›¸å…³çš„æ•°æ®ç±»å‹æœ‰ï¼š
 uintï¼šint32 æˆ–è€…æ˜¯ int64ï¼Œçœ‹æœºå­ç±»å‹ uintptrï¼šè¶³å¤Ÿè¡¨ç¤ºæŒ‡é’ˆå¤§å°çš„æ— ç¬¦å·æ•´æ•°ç±»å‹  è¿™äº›åŸºæœ¬ç±»å‹åœ¨å†…å­˜ä¸­çš„è¡¨ç¤ºå¦‚ï¼š
æ•°ç»„å’Œåˆ‡ç‰‡ æ•°ç»„ å¯¹äºæ•°ç»„æ¥è¯´ï¼Œå¦‚ï¼švar arr = [5]byte{1,2,3,4,5}
å¯¹äºarrè¿™ä¸ª[5]byteç±»å‹ï¼Œä»–çš„å†…å­˜å°±æ˜¯5ä¸ªè¿ç»­çš„å­—èŠ‚, ä¸€ä¸ªæ•°ç»„çš„å®šä¹‰åŒæ—¶åŒ…æ‹¬äº†é•¿åº¦å’Œç±»å‹ã€‚ æ¯”å¦‚ï¼švar a [4]intï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºå£°æ˜äº†ä¸€ä¸ªç±»å‹æ˜¯æ•°ç»„ï¼Œå…ƒç´ ç±»å‹æ˜¯intï¼Œé•¿åº¦æ˜¯4ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯Goè¯­è¨€çš„æ•°ç»„å’ŒCè¯­è¨€çš„ä¸ä¸€æ ·ï¼ŒCè¯­è¨€çš„æ•°ç»„æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ•°ç»„çš„ä¸€ä¸ªå…ƒç´ ã€‚ä½†æ˜¯åœ¨Goè¯­è¨€é‡Œé¢æ•°ç»„å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å€¼ç±»å‹ã€‚è€Œä¸æ˜¯ä¸€ä¸ªæŒ‡å‘æ•°ç»„å†…å­˜èµ·å§‹ä½ç½®çš„æŒ‡é’ˆï¼Œä¹Ÿä¸èƒ½å’ŒåŒç±»å‹çš„æŒ‡é’ˆè¿›è¡Œè½¬åŒ–ã€‚
æ‰€ä»¥[4]intå’Œ[5]intè¡¨ç¤ºä¸¤ç§å®Œå…¨ä¸åŒçš„ç±»å‹ã€‚
åˆ‡ç‰‡ åœ¨ä¹‹å‰çš„ä¸€äº›golangåŸºç¡€é‡Œå·²ç»æœ‰ä¸€äº›åˆ‡ç‰‡ç±»å‹çš„ç®€å•ä½¿ç”¨æ–¹æ³•äº†ï¼Œè¿™é‡Œå°±æ¥æ¢ç©¶ä¸€ä¸‹åˆ‡ç‰‡çš„åº•å±‚æ•°æ®ç»“æ„å’Œå®ç°ã€‚</description>
      <content>&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;è¿™ç¯‡ç¬”è®°ä¸»è¦è®°å½•ä¸€ä¸‹å­¦ä¹ Goè§åˆ°çš„å„ç§æ•°æ®ç±»å‹ï¼Œä»æ•°æ®ç±»å‹åœ¨å†…å­˜çš„åˆ†å¸ƒä¸Šçœ‹äº†è§£å…¶ä¸­çš„åŸç†ï¼Œä¸»è¦åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸºæœ¬ç±»å‹ï¼ˆint, string, uint, int8, int16, byte, rune, unitptr, float32, float64, complex64, complex128, boolç­‰ï¼‰&lt;/li&gt;
&lt;li&gt;æ•°ç»„å’Œsliceçš„å†…å­˜æ¨¡å‹ï¼ˆstringæ˜¯ç‰¹æ®Šçš„sliceï¼‰&lt;/li&gt;
&lt;li&gt;æŒ‡é’ˆçš„å†…å­˜æ¨¡å‹åŠunitpträ¸unsafe.Pointerã€æ™®é€šæŒ‡é’ˆ *Tçš„åŒºåˆ«&lt;/li&gt;
&lt;li&gt;mapçš„å†…å­˜æ¨¡å‹&lt;/li&gt;
&lt;li&gt;structçš„å†…å­˜æ¨¡å‹å’Œå­—èŠ‚å¯¹é½&lt;/li&gt;
&lt;li&gt;channelã€goroutineçš„å†…å­˜æ¨¡å‹ä»¥åå•ç‹¬è®°å½•&lt;/li&gt;
&lt;li&gt;interfaceçš„å†…å­˜æ¨¡å‹å·²ç»åœ¨ç¬¬ä¸€ç¯‡ç¬”è®°é‡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Goçš„å†…å­˜æ¨¡å‹ä¸Cè¯­è¨€å¾ˆåƒï¼Œæ‰€ä»¥äº†è§£Cè¯­è¨€åº”è¯¥å¾ˆå®¹æ˜“ç†è§£Goçš„å†…å­˜æ¨¡å‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŸºæœ¬ç±»å‹çš„å†…å­˜æ¨¡å‹&#34;&gt;åŸºæœ¬ç±»å‹çš„å†…å­˜æ¨¡å‹&lt;/h3&gt;
&lt;p&gt;Goè¯­è¨€æœ‰18ç§åŸºæœ¬çš„æ•°æ®ç»“æ„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;rune&lt;/span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;byte&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;         &lt;span style=&#34;color:#66d9ef&#34;&gt;uint&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int8&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;int16&lt;/span&gt;     &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16&lt;/span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;int32&lt;/span&gt;       &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int64&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;float32&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;float64&lt;/span&gt;     &lt;span style=&#34;color:#66d9ef&#34;&gt;complex64&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;complex128&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­stringå’Œboolç±»å‹æ¯”è¾ƒç‰¹æ®Šï¼Œè¿™ä¸ªåé¢è®¨è®ºã€‚&lt;/p&gt;
&lt;p&gt;ç„¶å byte ç±»å‹æ˜¯uint8çš„åˆ«åï¼Œruneæ˜¯int32çš„åˆ«åã€‚&lt;/p&gt;
&lt;p&gt;å¹³å°ç›¸å…³çš„æ•°æ®ç±»å‹æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;uintï¼šint32 æˆ–è€…æ˜¯ int64ï¼Œçœ‹æœºå­ç±»å‹&lt;/li&gt;
&lt;li&gt;uintptrï¼šè¶³å¤Ÿè¡¨ç¤ºæŒ‡é’ˆå¤§å°çš„æ— ç¬¦å·æ•´æ•°ç±»å‹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›åŸºæœ¬ç±»å‹åœ¨å†…å­˜ä¸­çš„è¡¨ç¤ºå¦‚ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/9dc4c374gy1gaddk6zal0j205g02n0q0.jpg&#34; alt=&#34;1577585835.jpg&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ•°ç»„å’Œåˆ‡ç‰‡&#34;&gt;æ•°ç»„å’Œåˆ‡ç‰‡&lt;/h3&gt;
&lt;h4 id=&#34;æ•°ç»„&#34;&gt;æ•°ç»„&lt;/h4&gt;
&lt;p&gt;å¯¹äºæ•°ç»„æ¥è¯´ï¼Œå¦‚ï¼š&lt;code&gt;var arr = [5]byte{1,2,3,4,5}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/9dc4c374gy1gaddpwa2bvj208x02rwe9.jpg&#34; alt=&#34;1577586159(https://hindung.oss-cn-beijing.aliyuncs.com/img/9dc4c374gy1gaddpwa2bvj208x02rwe9.jpg).jpg&#34;&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºarrè¿™ä¸ª[5]byteç±»å‹ï¼Œä»–çš„å†…å­˜å°±æ˜¯5ä¸ªè¿ç»­çš„å­—èŠ‚, ä¸€ä¸ªæ•°ç»„çš„å®šä¹‰åŒæ—¶åŒ…æ‹¬äº†é•¿åº¦å’Œç±»å‹ã€‚
æ¯”å¦‚ï¼š&lt;code&gt;var a [4]int&lt;/code&gt;ï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºå£°æ˜äº†ä¸€ä¸ªç±»å‹æ˜¯æ•°ç»„ï¼Œå…ƒç´ ç±»å‹æ˜¯intï¼Œé•¿åº¦æ˜¯4ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯Goè¯­è¨€çš„æ•°ç»„å’ŒCè¯­è¨€çš„ä¸ä¸€æ ·ï¼ŒCè¯­è¨€çš„æ•°ç»„æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ•°ç»„çš„ä¸€ä¸ªå…ƒç´ ã€‚ä½†æ˜¯åœ¨Goè¯­è¨€é‡Œé¢æ•°ç»„å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å€¼ç±»å‹ã€‚è€Œä¸æ˜¯ä¸€ä¸ªæŒ‡å‘æ•°ç»„å†…å­˜èµ·å§‹ä½ç½®çš„æŒ‡é’ˆï¼Œä¹Ÿä¸èƒ½å’ŒåŒç±»å‹çš„æŒ‡é’ˆè¿›è¡Œè½¬åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥[4]intå’Œ[5]intè¡¨ç¤ºä¸¤ç§å®Œå…¨ä¸åŒçš„ç±»å‹ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åˆ‡ç‰‡&#34;&gt;åˆ‡ç‰‡&lt;/h4&gt;
&lt;p&gt;åœ¨ä¹‹å‰çš„ä¸€äº›&lt;a href=&#34;https://mangoqiqi.github.io/2018/09/09/golang/&#34;&gt;golangåŸºç¡€&lt;/a&gt;é‡Œå·²ç»æœ‰ä¸€äº›åˆ‡ç‰‡ç±»å‹çš„ç®€å•ä½¿ç”¨æ–¹æ³•äº†ï¼Œè¿™é‡Œå°±æ¥æ¢ç©¶ä¸€ä¸‹åˆ‡ç‰‡çš„åº•å±‚æ•°æ®ç»“æ„å’Œå®ç°ã€‚&lt;/p&gt;
&lt;p&gt;åˆ‡ç‰‡æ˜¯å¯¹æ•°ç»„ä¸­ä¸€æ®µæ•°æ®çš„å¼•ç”¨ã€‚åœ¨å†…å­˜ä¸­å®ƒæœ‰ä¸‰æ®µæ•°æ®ç»„æˆï¼šä¸€ä¸ªæŒ‡å‘æ•°æ®å¤´çš„æŒ‡é’ˆã€åˆ‡ç‰‡çš„é•¿åº¦ã€åˆ‡ç‰‡çš„å®¹é‡ã€‚é•¿åº¦æ˜¯ç´¢å¼•æ“ä½œçš„ä¸Šç•Œï¼Œå¦‚ï¼šx[i] ã€‚å®¹é‡æ˜¯åˆ‡ç‰‡æ“ä½œçš„ä¸Šç•Œï¼Œå¦‚ï¼šx[i:j]ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚æˆ‘é€šè¿‡s := make([]byte, 5)å½“å®¹é‡å‚æ•°è¢«å¿½ç•¥æ—¶ï¼Œå®ƒé»˜è®¤ä¸ºæŒ‡å®šçš„é•¿åº¦ï¼Œåˆ›å»ºçš„åˆ‡ç‰‡å†…å­˜å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/9dc4c374gy1gadealbq7nj208d02t741.jpg&#34; alt=&#34;1577587354(https://hindung.oss-cn-beijing.aliyuncs.com/img/9dc4c374gy1gadealbq7nj208d02t741.jpg).jpg&#34;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬é€šè¿‡ä¿®æ”¹åˆ‡ç‰‡å¼•ç”¨çš„æ•°æ®åŒºåŸŸå’Œå¤§å°ï¼Œs = s[2:4], é‚£ä¹ˆå°±å˜æˆäº†å¦‚ä¸‹çš„ç»“æ„&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/9dc4c374gy1gadee0257zj207x03pjr5.jpg&#34; alt=&#34;1577587559(https://hindung.oss-cn-beijing.aliyuncs.com/img/9dc4c374gy1gadee0257zj207x03pjr5.jpg).jpg&#34;&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„ä»£ç å¯ä»¥å¾ˆå¿«å¼„æ¸…æ¥šsliceçš„å†…å­˜æ¨¡å‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sliceA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;cap&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; [&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;byte&lt;/span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt;[:]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sliceA&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sliceA&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;è¾“å‡ºç»“æœå¦‚ä¸‹&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0xc042038448&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;0xc042038448&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;0xc04203844a&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;0xc04203844a - 0xc042038448 = 2ï¼Œ åˆšå¥½æ˜¯åç§»äº†ä¸¤ä¸ªbyteã€‚&lt;/p&gt;
&lt;p&gt;ä»ä¸Šé¢çš„å†…å­˜æ¨¡å‹æ¥çœ‹ï¼Œå¦‚æœä¸¤ä¸ªæ•°ç»„ç›¸äº’èµ‹å€¼ï¼Œé‚£ä¹ˆå°†ä¼šè§¦å‘æ•°ç»„å…¨é‡æ‹·è´çš„åŠ¨ä½œï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¼ é€’åˆ‡ç‰‡ï¼Œé‚£ä¹ˆå°†åªéœ€è¦æ°¸è¿œç”³è¯·å›ºå®šå¤§å°çš„åˆ‡ç‰‡å¯¹è±¡å°±å¯ä»¥äº†ï¼Œåº•å±‚çš„æ•°ç»„é€šè¿‡å¼•ç”¨ä¼ é€’ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åˆ‡ç‰‡çš„å†…å­˜å¢é•¿&#34;&gt;åˆ‡ç‰‡çš„å†…å­˜å¢é•¿&lt;/h4&gt;
&lt;p&gt;ä»å†…å­˜æ¨¡å‹æ¥çœ‹ï¼Œåˆ‡ç‰‡å°±æ˜¯å¼•ç”¨äº†ä¸€ä¸ªå›ºå®šçš„æ•°ç»„ï¼Œ ä¸€ä¸ªåˆ‡ç‰‡çš„å®¹é‡å—åˆ°èµ·å§‹ç´¢å¼•å’Œåº•å±‚æ•°ç»„å®¹é‡çš„é™åˆ¶ã€‚Goè¯­è¨€æä¾›äº†å†…ç½®çš„copyå’Œappendå‡½æ•°æ¥å¢é•¿åˆ‡ç‰‡çš„å®¹é‡ï¼Œé‚£ä¹ˆè°ƒç”¨è¿™äº›å‡½æ•°ä»¥ååˆ‡ç‰‡çš„å†…å­˜ä¼šå‘ç”Ÿä»€ä¹ˆå˜åŒ–å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;copyå’Œappendè¿™ä¸¤ä¸ªæ˜¯å†…ç½®å‡½æ•°ï¼Œæ˜¯çœ‹ä¸åˆ°goæºç å®ç°ï¼Œå¯èƒ½ä½¿ç”¨C/C++/æ±‡ç¼–å®ç°çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; copy(&lt;span style=&#34;color:#a6e22e&#34;&gt;dst&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt; []&lt;span style=&#34;color:#a6e22e&#34;&gt;Type&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; append(&lt;span style=&#34;color:#a6e22e&#34;&gt;slice&lt;/span&gt; []&lt;span style=&#34;color:#a6e22e&#34;&gt;Type&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;elems&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Type&lt;/span&gt;) []&lt;span style=&#34;color:#a6e22e&#34;&gt;Type&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;copyæ–¹æ³•&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;copyæ–¹æ³•å¹¶ä¸ä¼šä¿®æ”¹sliceçš„å†…å­˜æ¨¡å‹ï¼Œä»…ä»…æ˜¯å°†æŸä¸ªsliceçš„å†…å®¹æ‹·è´åˆ°å¦å¤–ä¸€ä¸ªsliceä¸­å»ã€‚åº•å±‚çš„å®ç°åœ¨runtime\slice.goä¸­ï¼Œè¿™ä¸ªæ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;slicecopy&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;to&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;fm&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;slice&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;width&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;appendæ–¹æ³•&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sliceA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;cap&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make([]&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sliceA&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// a == []int{0}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// a == []int{0, 1, 2, 3}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sliceA&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;è¾“å‡ºç»“æœæ˜¯&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;0xc04203a448&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;0xc0420369e0&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é‚£ä¹ˆä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œappendæ–¹æ³•å…¶å®é‡æ–°ç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œç„¶åè¿”å›çš„åˆ‡ç‰‡å¼•ç”¨äº†è¿™ä¸ªæ–°çš„æ•°ç»„ï¼Œé‚£æˆ‘ä»¬æ¥é‡ç‚¹çœ‹ä¸€ä¸‹appendæ–¹æ³•çš„å®ç°ï¼Œä¸ºäº†ç®€å•ç‚¹ï¼Œå†™å‡ºä¸‹é¢çš„ä»£ç ï¼Œç„¶åç”Ÿæˆæ±‡ç¼–ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;byte&lt;/span&gt;{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;a&amp;#39;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;b&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(string(&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt;), cap(&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt;))  &lt;span style=&#34;color:#75715e&#34;&gt;// output : ab 8
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»ä¸‹é¢çš„æ±‡ç¼–å¯ä»¥å¾—åˆ°ä¸¤ä¸ªä¿¡æ¯ï¼š
runtime.growsliceæ˜¯ç”¨æ¥å®ç°sliceå¢é•¿çš„å‡½æ•°
capå‡½æ•°çš„å®ç°ä»…ä»…æ˜¯è°ƒç”¨b.capè¿™ä¸ªæˆå‘˜&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;STEXT&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;=&lt;span style=&#34;color:#ae81ff&#34;&gt;348&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;args&lt;/span&gt;=&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;locals&lt;/span&gt;=&lt;span style=&#34;color:#ae81ff&#34;&gt;0x80&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0036&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00054&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;LEAQ&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt;.uint8(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x003d&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00061&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x003d&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00061&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, (&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0041&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00065&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0041&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00065&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;LEAQ&lt;/span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;..&lt;span style=&#34;color:#a6e22e&#34;&gt;autotmp_9&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;71&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0046&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00070&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0046&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00070&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x004b&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00075&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0054&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;000&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;84&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x005d&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;000&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;93&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;32&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0066&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00102&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;growslice&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)  &lt;span style=&#34;color:#75715e&#34;&gt;// å®ç°sliceå¢é•¿
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x006b&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00107&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x006b&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00107&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;40&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0070&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00112&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;48&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0075&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00117&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;56&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;DX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x007a&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00122&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;DX&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cap&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;72&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x007f&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00127&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVB&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;98&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0083&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00131&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, (&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x008b&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0013&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x008b&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0013&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0090&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00144&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;LEAQ&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0094&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0014&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0099&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00153&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;DX&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x009e&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0015&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;slicebytetostring&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00a3&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00163&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;40&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00a8&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0016&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00a8&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0016&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;32&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00ad&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00173&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00ad&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00173&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;, (&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00b1&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00177&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x00b6&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;001&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;82&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;goslice&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;convTstring&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;growsliceçš„å®ç°ï¼šsrc\runtime\slice.go&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;growslice&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;et&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;_type&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;slice&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;cap&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;slice&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;newcap&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;doublecap&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;newcap&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;newcap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cap&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;doublecap&lt;/span&gt; {                 &lt;span style=&#34;color:#75715e&#34;&gt;// å¦‚æœæ–°çš„å¤§å°æ˜¯å½“å‰å¤§å°2å€ä»¥ä¸Šï¼Œåˆ™å¤§å°å¢é•¿ä¸ºæ–°å¤§å°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;newcap&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;cap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1024&lt;/span&gt; {              &lt;span style=&#34;color:#75715e&#34;&gt;// å¦‚æœå½“å‰å¤§å°å°äº1024ï¼ŒæŒ‰æ¯æ¬¡2å€å¢é•¿
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;newcap&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;doublecap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {                         &lt;span style=&#34;color:#75715e&#34;&gt;// å¦åˆ™æ¯æ¬¡æŒ‰å½“å‰å¤§å°1/4å¢é•¿ï¼Œç›´åˆ°å¢é•¿çš„å¤§å°è¶…è¿‡æˆ–ç­‰äºæ–°å¤§å°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;newcap&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cap&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;newcap&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;newcap&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;......&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;et&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;kind&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kindNoPointers&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;mallocgc&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;capmem&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;memmove&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;lenmem&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// The append() that calls growslice is going to overwrite from old.len to cap (which will be the new length).
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// Only clear the part that will not be overwritten.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;memclrNoHeapPointers&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;newlenmem&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;capmem&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;newlenmem&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// Note: can&amp;#39;t use rawmem (which avoids zeroing of memory), because then GC can scan uninitialized memory.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;mallocgc&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;capmem&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;et&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;writeBarrier&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;enabled&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;memmove&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;lenmem&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; uintptr(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;); &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lenmem&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;et&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;typedmemmove&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;et&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;slice&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;old&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;newcap&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…·ä½“å®ç°çš„ä»£ç å°±ä¸è¯´äº†ï¼Œå…¶å®å°±æ˜¯åˆ¤æ–­capï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå°†oldçš„å…ƒç´ æ‹·è´åˆ°æ–°çš„sliceä¸­å»ã€‚
æ‰©å®¹è§„åˆ™ä¸Šé¢çš„ä»£ç å·²ç»è¯´æ˜äº†ï¼š&lt;/p&gt;
&lt;p&gt;å¦‚æœæ–°çš„å¤§å°æ˜¯å½“å‰å¤§å°2å€ä»¥ä¸Šï¼Œåˆ™å¤§å°å¢é•¿ä¸ºæ–°å¤§å°ï¼Œ
å¦åˆ™å¾ªç¯ä»¥ä¸‹æ“ä½œï¼šå¦‚æœå½“å‰å¤§å°å°äº1024ï¼ŒæŒ‰æ¯æ¬¡2å€å¢é•¿ï¼Œå¦åˆ™æ¯æ¬¡æŒ‰å½“å‰å¤§å°1/4å¢é•¿ã€‚ç›´åˆ°å¢é•¿çš„å¤§å°è¶…è¿‡æˆ–ç­‰äºæ–°å¤§å°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨runtime\slice.goä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;slice&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;cap&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªä¹Ÿæ˜¯Goè¯­è¨€å†…éƒ¨çš„sliceæ•°æ®ç»“æ„ï¼Œå’Œæˆ‘ä»¬å‰é¢å®šä¹‰çš„æ˜¯ä¸€è‡´çš„ï¼Œsliceçš„makeï¼Œcopyï¼Œgrowç­‰å‡½æ•°éƒ½åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å®ç°&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å­—ç¬¦ä¸²&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;å­—ç¬¦ä¸²åœ¨å†…å­˜ä¸­å…¶å®è¡¨ç¤ºæˆäº†è¿™ä¹ˆä¸€ä¸ªæ•°æ®ç»“æ„
è¿™ä¸ªå®šä¹‰æ˜¯åœ¨runtime\string.goä¸­å®šä¹‰çš„&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;stringStruct&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;str&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;stringStruct&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;[:&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;stringStruct&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;stringStruct&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»ä¸Šé¢çš„ä»£ç å¯ä»¥è¾“å‡ºå¦‚ä¸‹çš„ç»“æœï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;0x4b1cbe&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;0x4b1cbe&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;0x4b1cc0&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰€ä»¥è¯´ï¼Œå­—ç¬¦ä¸²ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„åˆ‡ç‰‡ï¼Œä½†æ˜¯æ˜¯æ²¡æœ‰å®¹é‡ï¼Œåªæœ‰é•¿åº¦å±æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;mapçš„å®ç°&#34;&gt;mapçš„å®ç°&lt;/h2&gt;
&lt;p&gt;Goè¯­è¨€çš„mapå¹¶ä¸æ˜¯åƒC++çš„mapä¸€æ ·ç”¨äºŒå‰æ ‘å®ç°çš„ï¼Œè€Œæ˜¯å…¸å‹Hashå®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;å®šä¹‰ä¸€ä¸ªmapï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Map&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// åªæ˜¯å®šä¹‰ï¼Œæ²¡æœ‰åˆ†é…ç©ºé—´ï¼Œä¸èƒ½ä½¿ç”¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Map&lt;/span&gt; = make(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;)    &lt;span style=&#34;color:#75715e&#34;&gt;// åˆ†é…ç©ºé—´
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;cMap&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;)  &lt;span style=&#34;color:#75715e&#34;&gt;// ä¹Ÿå¯ä»¥è¿™æ ·
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨src\runtime\map.goé‡Œé¢å¯ä»¥æ‰¾åˆ°å…·ä½“çš„å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;hmap&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;     &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;              &lt;span style=&#34;color:#75715e&#34;&gt;// count ç”¨äºè®°å½•å½“å‰å“ˆå¸Œè¡¨å…ƒç´ æ•°é‡ï¼Œè¿™ä¸ªå­—æ®µè®©æˆ‘ä»¬ä¸å†éœ€è¦å»éå†æ•´ä¸ªå“ˆå¸Œè¡¨æ¥è·å–é•¿åº¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;flags&lt;/span&gt;     &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;// 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;B&lt;/span&gt;         &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;// è¡¨ç¤ºäº†å½“å‰å“ˆå¸Œè¡¨æŒæœ‰çš„ buckets æ•°é‡ï¼Œä½†æ˜¯å› ä¸ºå“ˆå¸Œè¡¨çš„æ‰©å®¹æ˜¯ä»¥ 2 å€æ•°è¿›è¡Œçš„ï¼Œæ‰€ä»¥è¿™é‡Œä¼šä½¿ç”¨å¯¹æ•°æ¥å­˜å‚¨ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£æˆ len(buckets) == 2^B
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;noverflow&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16&lt;/span&gt;           &lt;span style=&#34;color:#75715e&#34;&gt;// 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;hash0&lt;/span&gt;     &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;           &lt;span style=&#34;color:#75715e&#34;&gt;// å“ˆå¸Œç§å­ï¼Œè¿™ä¸ªå€¼ä¼šåœ¨è°ƒç”¨å“ˆå¸Œå‡½æ•°çš„æ—¶å€™ä½œä¸ºå‚æ•°ä¼ è¿›å»ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸ºå“ˆå¸Œå‡½æ•°çš„ç»“æœå¼•å…¥ä¸€å®šçš„éšæœºæ€§
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;buckets&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;oldbuckets&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// å“ˆå¸Œåœ¨æ‰©å®¹æ—¶ç”¨äºä¿å­˜ä¹‹å‰ buckets çš„å­—æ®µï¼Œå®ƒçš„å¤§å°éƒ½æ˜¯å½“å‰ buckets çš„ä¸€åŠï¼›
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;nevacuate&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;         &lt;span style=&#34;color:#75715e&#34;&gt;// 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;extra&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mapextra&lt;/span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;// 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;goè¯­è¨€çš„mapå…¶å®å°±æ˜¯ä¸€ä¸ªbucketçš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„å¤§å°æ°¸è¿œæ˜¯2çš„æ¬¡å¹‚ã€‚
å…·ä½“çš„å®ç°å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ï¼š&lt;a href=&#34;https://draveness.me/golang/docs/part2-foundation/ch03-datastructure/golang-hashmap/&#34;&gt;https://draveness.me/golang/docs/part2-foundation/ch03-datastructure/golang-hashmap/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;structç»“æ„ä½“&#34;&gt;structç»“æ„ä½“&lt;/h2&gt;
&lt;p&gt;Goè¯­è¨€é‡Œé¢çš„ç»“æ„ä½“å†…å­˜æ¨¡å‹å’ŒCè¯­è¨€é‡Œé¢ä¸€æ ·çš„ï¼Œéƒ½æ˜¯è¿ç»­çš„å†…å­˜ï¼Œå¦‚æœæ˜¯æŒ‡é’ˆï¼Œé‚£ä¹ˆå°±é€šè¿‡æŒ‡é’ˆè·³è½¬&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-GO&#34; data-lang=&#34;GO&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Point&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;X&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;Y&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é‚£ä¹ˆå†…å­˜æ¨¡å‹å°±æ˜¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://hindung.oss-cn-beijing.aliyuncs.com/img/9dc4c374gy1gadflnr12fj203t039dfl.jpg&#34; alt=&#34;1577590070(https://hindung.oss-cn-beijing.aliyuncs.com/img/9dc4c374gy1gadflnr12fj203t039dfl.jpg).jpg&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;structçš„å­—èŠ‚å¯¹é½&#34;&gt;structçš„å­—èŠ‚å¯¹é½&lt;/h3&gt;
&lt;p&gt;åœ¨64ä½ç³»ç»Ÿä¸Šé¢ï¼ŒGoè¯­è¨€çš„å­—èŠ‚æ˜¯8ç›´æ¥å¯¹é½ï¼Œå¦‚æœä¸è¶³çš„ï¼Œå°±è¡¥å……paddingã€‚
è¿™é‡Œæœ‰è¯¦ç»†çš„æè¿°ï¼š&lt;a href=&#34;http://www.geeksforgeeks.org/structure-member-alignment-padding-and-data-packing/&#34;&gt;http://www.geeksforgeeks.org/structure-member-alignment-padding-and-data-packing/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Example&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;BoolValue&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;          &lt;span style=&#34;color:#75715e&#34;&gt;// 1 byte
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;IntValue&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int16&lt;/span&gt;          &lt;span style=&#34;color:#75715e&#34;&gt;// 2 byte
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;FloatValue&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;float32&lt;/span&gt;      &lt;span style=&#34;color:#75715e&#34;&gt;// 4 byte
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;example&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Example&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;BoolValue&lt;/span&gt;:  &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;IntValue&lt;/span&gt;:   &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;FloatValue&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;3.141592&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;alignmentBoundary&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Alignof&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;example&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;sizeBool&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sizeof&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;example&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;BoolValue&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;offsetBool&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Offsetof&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;example&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;BoolValue&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;sizeInt&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sizeof&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;example&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;IntValue&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;offsetInt&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Offsetof&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;example&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;IntValue&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;sizeFloat&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sizeof&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;example&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;FloatValue&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;offsetFloat&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Offsetof&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;example&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;FloatValue&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;size Example: %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sizeof&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;example&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Alignment Boundary: %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;alignmentBoundary&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;BoolValue = Size: %d Offset: %d Addr: %v\n&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;sizeBool&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;offsetBool&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;example&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;BoolValue&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;IntValue = Size: %d Offset: %d Addr: %v\n&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;sizeInt&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;offsetInt&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;example&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;IntValue&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;FloatValue = Size: %d Offset: %d Addr: %v\n&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;sizeFloat&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;offsetFloat&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;example&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;FloatValue&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Example&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Alignment&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Boundary&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;BoolValue&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;Size&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Offset&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Addr&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0xc04200a230&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;IntValue&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;Size&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Offset&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Addr&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0xc04200a232&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;FloatValue&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;Size&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Offset&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Addr&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0xc04200a234&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹å‡ºåœ¨64ä½æœºå™¨æ˜¯æŒ‰ç…§8å­—èŠ‚å¯¹é½çš„ï¼Œå¹¶ä¸”boolçš„åé¢å¢åŠ äº†ä¸€ä¸ªå­—èŠ‚çš„padding&lt;/p&gt;
&lt;h2 id=&#34;makeå’Œnew&#34;&gt;makeå’Œnew&lt;/h2&gt;
&lt;p&gt;åœ¨Goè¯­è¨€é‡Œé¢æœ‰ä¸¤ç§æ–¹å¼æ¥åˆ›å»ºæ•°æ®ç»“æ„ï¼šnewå’Œmake&lt;/p&gt;
&lt;p&gt;åˆ‡ç‰‡ã€mapå’Œé€šé“ï¼Œä½¿ç”¨makeï¼Œ
æ•°ç»„ã€ç»“æ„ä½“å’Œæ‰€æœ‰çš„å€¼ç±»å‹ï¼Œä½¿ç”¨newï¼Œ
å› ä¸ºnewä»…ä»…æ˜¯åˆ†é…å†…å­˜ï¼Œä½†æ˜¯makeè¿˜åŒ…æ‹¬äº†åˆå§‹åŒ–ï¼Œ
å› ä¸ºsliceï¼Œmapå’Œchannelåœ¨åº•å±‚å®ç°çš„æ—¶å€™å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„å€¼ï¼Œè€Œæ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°æ®ç»“æ„ä¸­è¦åˆå§‹åŒ–ä»¥åæ‰èƒ½ä½¿ç”¨ã€‚å¹¶ä¸”makeä¸æ˜¯è¿”å›æŒ‡é’ˆï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ª&lt;em&gt;ç±»å‹&lt;/em&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºåˆ‡ç‰‡ï¼Œä½¿ç”¨newå’Œmakeçš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sliceA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;cap&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; new([]&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sliceA&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;q&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make([]&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sliceA&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;q&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ptr&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ouput:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;{&amp;lt;&lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;0x5811b0&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹sliceçš„makeåšäº†å•¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;makeslice&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;et&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;_type&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;cap&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;mem&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;overflow&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;math&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;MulUintptr&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;et&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;, uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;cap&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;overflow&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mem&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;maxAlloc&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cap&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// NOTE: Produce a &amp;#39;len out of range&amp;#39; error instead of a
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// &amp;#39;cap out of range&amp;#39; error when someone does make([]T, bignumber).
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// &amp;#39;cap out of range&amp;#39; is true too, but since the cap is only being
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// supplied implicitly, saying len is clearer.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#75715e&#34;&gt;// See golang.org/issue/4085.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;mem&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;overflow&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;math&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;MulUintptr&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;et&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;, uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;overflow&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mem&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;maxAlloc&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;len&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;panicmakeslicelen&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;panicmakeslicecap&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mallocgc&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mem&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;et&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»ä¸Šé¢æ¥çœ‹ï¼Œæœ€é‡è¦å°±æ˜¯é€šè¿‡mallocgcæ¥ç”³è¯·äº†ä¸€ä¸ªæ•°ç»„ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡æŸ¥çœ‹æ±‡ç¼–ä»£ç å°±å¯ä»¥çœ‹å‡ºmakeåº•å±‚æ˜¯è°ƒç”¨å“ªä¸ªå‡½æ•°äº†:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;makemap&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;maptype&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;hint&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hmap&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;hmap&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;mem&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;overflow&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;math&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;MulUintptr&lt;/span&gt;(uintptr(&lt;span style=&#34;color:#a6e22e&#34;&gt;hint&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;bucket&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;overflow&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mem&lt;/span&gt; &amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;maxAlloc&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;hint&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// initialize Hmap
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; = new(&lt;span style=&#34;color:#a6e22e&#34;&gt;hmap&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;hash0&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;fastrand&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// Find the size parameter B which will hold the requested # of elements.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// For hint &amp;lt; 0 overLoadFactor returns false since hint &amp;lt; bucketCnt.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;B&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; uint8(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;overLoadFactor&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;hint&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;B&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;B&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;B&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// allocate initial hash table
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// if B == 0, the buckets field is allocated lazily later (in mapassign)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// If hint is large zeroing this memory could take a while.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;B&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;nextOverflow&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;bmap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;buckets&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;nextOverflow&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;makeBucketArray&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;B&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;nextOverflow&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;extra&lt;/span&gt; = new(&lt;span style=&#34;color:#a6e22e&#34;&gt;mapextra&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;extra&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;nextOverflow&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;nextOverflow&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»ä¸Šé¢çœ‹ï¼Œmapåˆå§‹åŒ–æœ€é‡è¦çš„å°±æ˜¯åˆ›å»ºbucketsã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æ•´ä½“æ¥è¯´ï¼ŒGoè¯­è¨€çš„å¯¹è±¡å†…å­˜æ¨¡å‹æ¯”C++è¦ç®€å•çš„å¤šå¹¶ä¸”ä¸Cå¾ˆåƒï¼Œæ¯•ç«Ÿæ²¡æœ‰ç»§æ‰¿ï¼Œè™šå‡½æ•°ï¼Œå¤šé‡ç»§æ‰¿ç­‰ç­‰ï¼Œäº†è§£è¿™äº›å†…å­˜æ¨¡å‹ï¼Œå¯¹äºå¹³æ—¶ä½¿ç”¨è¿™äº›ç±»å‹æ—¶å¯ä»¥å°‘è¸©å‘æ˜¯æœ‰å¸®åŠ©çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;å‚è€ƒé“¾æ¥ï¼š&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://skyao.io/learning-go/grammar/type/basic.html&#34;&gt;https://skyao.io/learning-go/grammar/type/basic.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://studygolang.com/articles/9169&#34;&gt;https://studygolang.com/articles/9169&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://juejin.im/post/5ceffeddf265da1bc8540df5&#34;&gt;ä½¿ç”¨mapå®ç°set&lt;/a&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>åˆæ¢Ginæ¡†æ¶</title>
      <link>http://hindung.cn/posts/3/</link>
      <pubDate>Sat, 25 Jul 2020 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/3/</guid>
      <description>å…¥é—¨ç®€ä»‹ Ginæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTP webæ¡†æ¶ï¼Œç”¨Goç¼–å†™ï¼Œç›®å‰æ‰˜ç®¡åœ¨GitHubä¸Šï¼šGin å®˜æ–¹æ–‡æ¡£ï¼šGin-doc ä¸­æ–‡ç‰ˆï¼šGin-doc Ginæ¡†æ¶çš„å‡ ä¸ªç‰¹æ€§ï¼š
 è·¯ç”±ï¼ˆRoutingï¼‰ï¼šå°†è¯·æ±‚æ˜ å°„åˆ°å‡½æ•°ï¼Œæ”¯æŒåŠ¨æ€è·¯ç”±ã€‚å¦‚/hello/:name é‰´æƒï¼šç»Ÿä¸€ã€åˆ†ç»„é‰´æƒèƒ½åŠ› æ¨¡æ¿ï¼šç»Ÿä¸€ç®€åŒ–çš„HTMLæœºåˆ¶ ä¸­é—´ä»¶ï¼šä¸€ä¸ªè¯·æ±‚ç»è¿‡å¤šä¸ªä¸­é—´ä»¶æ‹¦æˆªæœ€ååˆ°è¾¾DBï¼Œå¦‚logging .etc  å…¶ä¸­æ¯”è¾ƒå…³é”®çš„ç»„ä»¶æ˜¯routerè·¯ç”±ç»„ä»¶ï¼Œginä½¿ç”¨çš„ç®—æ³•æ˜¯radix æ ‘ï¼Œæ˜¯trie æ ‘ï¼ˆå‰ç¼€æ ‘ï¼‰çš„ä¸€ç§å‹ç¼©ç‰ˆæœ¬ï¼Œä»–ä»¬çš„åŒºåˆ«æ˜¯ï¼šå‡å¦‚å­˜åœ¨ä¸‰ä¸ªå•è¯ï¼šhello, hat, haveï¼Œtrie æ ‘å¾—åˆ°çš„æ•°æ®ç»“æ„æ˜¯ï¼š
 e - l - l - o  / h - a - t  \  v - e æ€»å…±9ä¸ªèŠ‚ç‚¹ã€‚è€Œradixæ ‘å¾—åˆ°çš„æ•°æ®ç»“æ„æ˜¯ï¼š
 *  /  (ello)  / * - h - * -(a) - * - (t) - *  \  (ve)  \  * åªéœ€è¦5ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥ï¼Œradixæ ‘ä½¿ç”¨æ›´å°çš„å†…å­˜ï¼Œä½†æ˜¯å¾ˆéš¾å®ç°ã€‚è¯¦æƒ…è¯·å‚è€ƒï¼šwhat-is-the-difference-between-trie-and-radix-trie-data-structures</description>
      <content>&lt;h2 id=&#34;å…¥é—¨ç®€ä»‹&#34;&gt;å…¥é—¨ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Gin&lt;/code&gt;æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„&lt;code&gt;HTTP web&lt;/code&gt;æ¡†æ¶ï¼Œç”¨Goç¼–å†™ï¼Œç›®å‰æ‰˜ç®¡åœ¨&lt;code&gt;GitHub&lt;/code&gt;ä¸Šï¼š&lt;a href=&#34;https://github.com/gin-gonic/gin&#34;&gt;Gin&lt;/a&gt;
å®˜æ–¹æ–‡æ¡£ï¼š&lt;a href=&#34;https://gin-gonic.com/docs/&#34;&gt;Gin-doc&lt;/a&gt;
ä¸­æ–‡ç‰ˆï¼š&lt;a href=&#34;https://learnku.com/docs/gin-gonic/2019/go-gin-document/6149&#34;&gt;Gin-doc&lt;/a&gt;
&lt;code&gt;Gin&lt;/code&gt;æ¡†æ¶çš„å‡ ä¸ªç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è·¯ç”±ï¼ˆ&lt;code&gt;Routing&lt;/code&gt;ï¼‰ï¼šå°†è¯·æ±‚æ˜ å°„åˆ°å‡½æ•°ï¼Œæ”¯æŒåŠ¨æ€è·¯ç”±ã€‚å¦‚&lt;code&gt;/hello/:name&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é‰´æƒï¼šç»Ÿä¸€ã€åˆ†ç»„é‰´æƒèƒ½åŠ›&lt;/li&gt;
&lt;li&gt;æ¨¡æ¿ï¼šç»Ÿä¸€ç®€åŒ–çš„&lt;code&gt;HTML&lt;/code&gt;æœºåˆ¶&lt;/li&gt;
&lt;li&gt;ä¸­é—´ä»¶ï¼šä¸€ä¸ªè¯·æ±‚ç»è¿‡å¤šä¸ªä¸­é—´ä»¶æ‹¦æˆªæœ€ååˆ°è¾¾DBï¼Œå¦‚&lt;code&gt;logging&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;.etc&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶ä¸­æ¯”è¾ƒå…³é”®çš„ç»„ä»¶æ˜¯&lt;code&gt;router&lt;/code&gt;è·¯ç”±ç»„ä»¶ï¼Œ&lt;code&gt;gin&lt;/code&gt;ä½¿ç”¨çš„ç®—æ³•æ˜¯&lt;code&gt;radix&lt;/code&gt; æ ‘ï¼Œæ˜¯&lt;code&gt;trie&lt;/code&gt; æ ‘ï¼ˆå‰ç¼€æ ‘ï¼‰çš„ä¸€ç§å‹ç¼©ç‰ˆæœ¬ï¼Œä»–ä»¬çš„åŒºåˆ«æ˜¯ï¼šå‡å¦‚å­˜åœ¨ä¸‰ä¸ªå•è¯ï¼š&lt;code&gt;hello, hat, have&lt;/code&gt;ï¼Œtrie æ ‘å¾—åˆ°çš„æ•°æ®ç»“æ„æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;o&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; \
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ€»å…±9ä¸ªèŠ‚ç‚¹ã€‚è€Œ&lt;code&gt;radix&lt;/code&gt;æ ‘å¾—åˆ°çš„æ•°æ®ç»“æ„æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  (&lt;span style=&#34;color:#a6e22e&#34;&gt;ello&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;h&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     \
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    (&lt;span style=&#34;color:#a6e22e&#34;&gt;ve&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      \
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åªéœ€è¦5ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥ï¼Œradixæ ‘ä½¿ç”¨æ›´å°çš„å†…å­˜ï¼Œä½†æ˜¯å¾ˆéš¾å®ç°ã€‚è¯¦æƒ…è¯·å‚è€ƒï¼š&lt;a href=&#34;https://stackoverflow.com/questions/14708134/what-is-the-difference-between-trie-and-radix-trie-data-structures&#34;&gt;what-is-the-difference-between-trie-and-radix-trie-data-structures&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ginä½¿ç”¨çš„radixç®—æ³•å®ç°æ˜¯ï¼š&lt;a href=&#34;https://github.com/julienschmidt/httprouter&#34;&gt;httprouter&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;åŸç†åŠç”¨æ³•&#34;&gt;åŸç†åŠç”¨æ³•&lt;/h2&gt;
&lt;h3 id=&#34;è·¯ç”±routing&#34;&gt;è·¯ç”±Routing&lt;/h3&gt;
&lt;p&gt;goè¯­è¨€æœ¬èº«å†…ç½®äº†&lt;code&gt;net/http&lt;/code&gt;åº“ï¼Œå°è£…äº†&lt;code&gt;HTTP&lt;/code&gt;ç½‘ç»œæ¥å£ï¼ŒGinå®ç°çš„webæ¡†æ¶ä¹Ÿæ˜¯åŸºäº&lt;code&gt;net/http&lt;/code&gt;åº“ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªåº“çš„ç®€å•ç”¨æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;log&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net/http&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;HandleFunc&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;indexHandler&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fatal&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ListenAndServe&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;:9999&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¤„ç†è¯·æ±‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;indexHandler&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ResponseWriter&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Request&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fprintf&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;URL.Path = %q\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;URL&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Path&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//$ curl http://localhost:9999/
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//URL.Path = &amp;#34;/&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;http.ListenAndServe(â€œ:9999â€, nil)&lt;/code&gt;è¿™ä¸ªå‡½æ•°è¡¨ç¤ºç›‘å¬æœ¬åœ°9999ç«¯å£ï¼Œnilä»£è¡¨ä½¿ç”¨æ ‡å‡†åº“ä¸­çš„å®ä¾‹å»å¤„ç†æ‰€æœ‰çš„HTTPè¯·æ±‚ï¼Œå‡å¦‚æˆ‘ä»¬è‡ªå·±å®ç°è¯¥å‚æ•°ç±»å‹ï¼Œå°±å¯ä»¥ä½¿ç”¨æˆ‘ä»¬è‡ªå·±è®¾è®¡çš„å®ä¾‹å»å¤„ç†æ‰€æœ‰HTTPè¯·æ±‚äº†ï¼ŒGinæ­£æ˜¯è¿™ä¹ˆåšçš„ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»€ä¹ˆç±»å‹å‘¢ï¼Ÿå¯ä»¥æŸ¥çœ‹&lt;code&gt;net/http&lt;/code&gt;çš„æºç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ListenAndServe&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Handler&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;server&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Server&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;Addr&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;Handler&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;server&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ListenAndServe&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ˜¯ä¸€ä¸ª&lt;code&gt;Handler&lt;/code&gt;ï¼Œé‚£ä¹ˆ&lt;code&gt;Handler&lt;/code&gt;æ˜¯ä»€ä¹ˆç±»å‹å‘¢ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Handler&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ServeHTTP&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ResponseWriter&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Request&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ˜¯ä¸€ä¸ªæ¥å£ï¼Œéœ€è¦å®ç°&lt;code&gt;ServeHTTP&lt;/code&gt;æ–¹æ³•å°±è¡Œï¼Œä¹Ÿå°±æ˜¯åªè¦ä¼ å…¥å®ç°äº†è¯¥æ¥å£çš„å®ä¾‹ï¼Œæ‰€æœ‰çš„HTTPè¯·æ±‚éƒ½èƒ½è¢«è¿™ä¸ªå®ä¾‹å¤„ç†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net/http&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// è·¯ç”±å¤„ç†å‡½æ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HandlerFunc&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ResponseWriter&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Request&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Engine å®ç° ServeHTTP æ¥å£ï¼Œä½¿ç”¨mapè¿›è¡Œé™æ€çš„è·¯ç”±åŒ¹é…
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Engine&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;router&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#a6e22e&#34;&gt;HandlerFunc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// New åˆ›å»ºEngine
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;New&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Engine&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Engine&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;router&lt;/span&gt;: make(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#a6e22e&#34;&gt;HandlerFunc&lt;/span&gt;)}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ·»åŠ è·¯ç”±
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Engine&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;addRoute&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;method&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;pattern&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HandlerFunc&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;method&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pattern&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;router&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// GET å®šä¹‰GETè·¯ç”±æ·»åŠ 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Engine&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;pattern&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HandlerFunc&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;addRoute&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GET&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;pattern&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Run å¯åŠ¨ http server
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Engine&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) (&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ListenAndServe&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;addr&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å®ç° ServrHTTP æ–¹æ³•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Engine&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;ServeHTTP&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ResponseWriter&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Request&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Method&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;URL&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Path&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;router&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;key&lt;/span&gt;]; &lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fprintf&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;404 NOT FOUND: %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;URL&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;New&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ResponseWriter&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Request&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fprintf&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;URL.Path = %q\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;URL&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Path&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;:9999&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//$ curl http://localhost:9999/
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//URL.Path = &amp;#34;/&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»¥ä¸Šæ˜¯ä¸€ä¸ªç®€å•çš„Engineçš„å®ç°æ–¹æ³•ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹Ginçš„å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ServeHTTP conforms to the http.Handler interface.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Engine&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;ServeHTTP&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ResponseWriter&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Request&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;pool&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;().(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;writermem&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;reset&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Request&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;reset&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;handleHTTPRequest&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;pool&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Put&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Ginçš„&lt;code&gt;Engine&lt;/code&gt;ç»“æ„æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥ä»–å®ç°çš„åŠŸèƒ½ç¹å¤šã€‚å¹¶ä¸”ä¹Ÿå®ç°åŠ¨æ€è·¯ç”±ï¼Œå¯ä»¥è¯•è¯•å¦‚ä½•ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;getæ–¹æ³•ï¼š&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net/http&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Default&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ping&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;JSON&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;H&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pong&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/user/:name&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Param&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StatusOK&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello %s !&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/file/*name&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Param&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StatusOK&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello %s !&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;æµ‹è¯•ä¸€ä¸‹:&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl http://localhost:8080/ping
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pong&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl http://localhost:8080/user/kid
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Hello kid !
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl http://localhost:8080/file/assert/static/js/do.js
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Hello /assert/static/js/do.js !
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl http://localhost:8080/user
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;404&lt;/span&gt; page not found
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;postæ–¹æ³•ï¼š&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;POST&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/post/value&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StatusOK&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ok!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;æµ‹è¯•ï¼š&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl -X POST http://localhost:8080/post/value
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ok!
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤å¤–è¿˜æœ‰ï¼š&lt;code&gt;PUTã€DELETEã€PATCHã€HEADã€OPTION&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;router&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/someGet&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;getting&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;router&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;POST&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/somePost&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;posting&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;router&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PUT&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/somePut&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;putting&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;router&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DELETE&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/someDelete&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;deleting&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;router&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PATCH&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/somePatch&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;patching&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;router&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;HEAD&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/someHead&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;head&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;router&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;OPTIONS&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/someOptions&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;options&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®ç°ä¸€ä¸ªé«˜çº§è·¯ç”±:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net/http&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Default&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/user/:name&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Param&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StatusOK&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hit /user/:name , %s !&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/user/:name/*action&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Param&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;action&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Param&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;action&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StatusOK&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hit /user/:name/*action ,  %s %s !&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;action&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;æµ‹è¯•ï¼š&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl http://localhost:8080/user/kid
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Hit /user/:name , kid !
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl http://localhost:8080/user/kid/
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Hit /user/:name/*action ,  kid / !
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl http://localhost:8080/user/kid/assert
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Hit /user/:name/*action ,  kid /assert !
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è·¯ç”±åˆ†ç»„&#34;&gt;è·¯ç”±åˆ†ç»„&lt;/h3&gt;
&lt;p&gt;åˆ†ç»„æ§åˆ¶æ˜¯&lt;code&gt;web&lt;/code&gt;æ¡†æ¶æ‰€å¿…é¡»çš„åŸºç¡€åŠŸèƒ½ä¹‹ä¸€ï¼Œè·¯ç”±åˆ†ç»„å°±æ˜¯ä»¥ç›¸åŒå‰ç¼€ä½œä¸ºåŒºåˆ†ä¸€ä¸ªè·¯ç”±çš„æµå‘ï¼Œå¹¶æ”¯æŒåˆ†ç»„åµŒå¥—ã€‚æ¯”å¦‚&lt;code&gt;/api&lt;/code&gt;æ˜¯ä¸€ä¸ªåˆ†ç»„ï¼Œ&lt;code&gt;/api/v1&lt;/code&gt; ï¼Œ&lt;code&gt;/api/v2&lt;/code&gt;å¯ä»¥æ˜¯è¯¥åˆ†ç»„ä¸‹çš„å­åˆ†ç»„ï¼Œä½œç”¨åœ¨&lt;code&gt;/api&lt;/code&gt;åˆ†ç»„ä¸Šçš„ä¸­é—´ä»¶ä¹Ÿä¼šä½œç”¨åœ¨å­åˆ†ç»„ä¸Šï¼Œå­åˆ†ç»„è¿˜å¯ä»¥æ‹¥æœ‰è‡ªå·±ç‰¹æœ‰çš„ä¸­é—´ä»¶ã€‚ä¾‹å¦‚&lt;code&gt;/admin&lt;/code&gt;çš„åˆ†ç»„ï¼Œå¯ä»¥åº”ç”¨é‰´æƒä¸­é—´ä»¶ï¼›/åˆ†ç»„åº”ç”¨æ—¥å¿—ä¸­é—´ä»¶ï¼Œ/æ˜¯é»˜è®¤çš„æœ€é¡¶å±‚çš„åˆ†ç»„ï¼Œä¹Ÿå°±æ„å‘³ç€ç»™æ‰€æœ‰çš„è·¯ç”±ï¼Œå³æ•´ä¸ªæ¡†æ¶å¢åŠ äº†è®°å½•æ—¥å¿—çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•ä½¿ç”¨:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Default&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;v1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Group&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;v1&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;v1&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/login&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hit %s&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;FullPath&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;v2&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Group&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;v2&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;v2&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/login&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hit %s &amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;FullPath&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;æµ‹è¯•ï¼š&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl http://localhost:8080/v1/login
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Hit /v1/login
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl http://localhost:8080/v2/login
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Hit /v2/login
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ä½¿ç”¨ä¸­é—´ä»¶&#34;&gt;ä½¿ç”¨ä¸­é—´ä»¶&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;Gin&lt;/code&gt;ä½¿ç”¨ä¸­é—´å¾ˆç®€å•ï¼Œåªéœ€ä¿®æ”¹&lt;code&gt;gin.Default()&lt;/code&gt;ä¸º&lt;code&gt;gin.New()&lt;/code&gt;ï¼Œ&lt;code&gt;default&lt;/code&gt;æ–¹æ³•ä½¿ç”¨äº†é»˜è®¤çš„&lt;code&gt;log&lt;/code&gt;ä¸­é—´ä»¶å’Œ&lt;code&gt;recover&lt;/code&gt;ä¸­é—´ä»¶ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Default returns an Engine instance with the Logger and Recovery middleware already attached.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Default&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Engine&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;debugPrintWARNINGDefault&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;New&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Use&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;Logger&lt;/span&gt;(), &lt;span style=&#34;color:#a6e22e&#34;&gt;Recovery&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;engine&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨ä¸­é—´ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// æ–°å»ºä¸€ä¸ªæ²¡æœ‰ä»»ä½•é»˜è®¤ä¸­é—´ä»¶çš„è·¯ç”±
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;New&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// å…¨å±€ä¸­é—´ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Logger ä¸­é—´ä»¶å°†æ—¥å¿—å†™å…¥ gin.DefaultWriterï¼Œå³ä½¿ä½ å°† GIN_MODE è®¾ç½®ä¸º releaseã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// By default gin.DefaultWriter = os.Stdout
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Use&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Logger&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Recovery ä¸­é—´ä»¶ä¼š recover ä»»ä½• panicã€‚å¦‚æœæœ‰ panic çš„è¯ï¼Œä¼šå†™å…¥ 500ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Use&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Recovery&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// ä½ å¯ä»¥ä¸ºæ¯ä¸ªè·¯ç”±æ·»åŠ ä»»æ„æ•°é‡çš„ä¸­é—´ä»¶ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/benchmark&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;MyBenchLogger&lt;/span&gt;(), &lt;span style=&#34;color:#a6e22e&#34;&gt;benchEndpoint&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// è®¤è¯è·¯ç”±ç»„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// authorized := r.Group(&amp;#34;/&amp;#34;, AuthRequired())
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// å’Œä½¿ç”¨ä»¥ä¸‹ä¸¤è¡Œä»£ç çš„æ•ˆæœå®Œå…¨ä¸€æ ·:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;authorized&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Group&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// è·¯ç”±ç»„ä¸­é—´ä»¶! åœ¨æ­¤ä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ &amp;#34;authorized&amp;#34; è·¯ç”±ç»„ä¸­ä½¿ç”¨è‡ªå®šä¹‰åˆ›å»ºçš„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// AuthRequired() ä¸­é—´ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;authorized&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Use&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;AuthRequired&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;authorized&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;POST&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/login&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;loginEndpoint&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;authorized&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;POST&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/submit&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;submitEndpoint&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;authorized&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;POST&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/read&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;readEndpoint&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// åµŒå¥—è·¯ç”±ç»„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;testing&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;authorized&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Group&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;testing&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;testing&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/analytics&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;analyticsEndpoint&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// ç›‘å¬å¹¶åœ¨ 0.0.0.0:8080 ä¸Šå¯åŠ¨æœåŠ¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;:8080&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…·ä½“ä¸­é—´ä»¶çš„å®ç°ä»£ç å¯ä»¥æŸ¥çœ‹æºç ã€‚ä¹Ÿå¯ä»¥å®ç°ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¹¶ä¸”ä½¿ç”¨&lt;code&gt;c.Next()&lt;/code&gt;æ–¹æ³•æ§åˆ¶è°ƒç”¨é€»è¾‘ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å®ç°æ–‡ä»¶ä¸Šä¼ &#34;&gt;å®ç°æ–‡ä»¶ä¸Šä¼ &lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;log&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;()  {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Default&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;POST&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/upload&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;file&lt;/span&gt; , &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;FormFile&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;file&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;file&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Filename&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s uploaded&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;file&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Filename&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;POST&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/uploads&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;from&lt;/span&gt; , &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;MultipartForm&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;files&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;from&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;File&lt;/span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;upload[]&amp;#34;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;file&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;files&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;file&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Filename&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%d files uploaded&amp;#34;&lt;/span&gt;, len(&lt;span style=&#34;color:#a6e22e&#34;&gt;files&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;æµ‹è¯•ï¼š&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl -X POST http://localhost:8080/upload -F &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;file=@./test.txt&amp;#34;&lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Content-Type: multipart/form-data&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;test.txt uploaded
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl -X POST http://localhost:8080/uploads -F &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;upload[]=@./test.txt&amp;#34;&lt;/span&gt; -F &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;upload[]=@./test.txt&amp;#34;&lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Content-Type: multipart/form-data&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; files uploaded
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å‚æ•°&#34;&gt;å‚æ•°&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨åŠ¨æ€è·¯ç”±æ—¶ï¼Œå¯ä»¥æŒ‡å®š&lt;code&gt;/:name&lt;/code&gt;æ¥å®ç°å¯¹å‚æ•°&lt;code&gt;name&lt;/code&gt;çš„åŠ¨æ€è§£æï¼Œå…·ä½“æ˜¯ç”¨&lt;code&gt;c.Param(&amp;quot;name&amp;quot;)&lt;/code&gt;æ¥è§£æã€‚ä½†æ˜¯å¦‚ä½•è§£æ&lt;code&gt;/welcome?firstname=Jane&amp;amp;lastname=Doe&lt;/code&gt;è¿™ç§&lt;code&gt;URL&lt;/code&gt;å‚æ•°å‘¢ï¼Ÿä½¿ç”¨&lt;code&gt;c.Query()&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net/http&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Default&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// GET
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Hit /welcome?firstName=Jane&amp;amp;lastName=Doe
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/welcome&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;firstName&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DefaultQuery&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;firstName&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Guest&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;lastName&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Query&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;lastName&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// æ˜¯ c.Request.URL.Query().Get(&amp;#34;lastName&amp;#34;) çš„ç®€å†™
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StatusOK&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello %s %s&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;firstName&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;lastName&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// POST
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Hit POST /form_post
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Content-Type: application/x-www-form-urlencoded
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// message=hello&amp;amp;nick=jon
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;POST&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/form_post&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PostForm&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;nick&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DefaultPostForm&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nick&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;anonymous&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// æ­¤æ–¹æ³•å¯ä»¥è®¾ç½®é»˜è®¤å€¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;JSON&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;H&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;status&amp;#34;&lt;/span&gt;:  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;posted&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nick&amp;#34;&lt;/span&gt;:    &lt;span style=&#34;color:#a6e22e&#34;&gt;nick&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;æµ‹è¯•:&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl http://localhost:8080/welcome
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Hello Guest
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;http://localhost:8080/welcome?firstName=h&amp;amp;lastName=xd&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Hello h xd
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl -X POST -d &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;message=hello&amp;amp;nick=jon&amp;#39;&lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Content-Type: application/x-www-form-urlencoded&amp;#34;&lt;/span&gt; http://localhost:8080/form_post
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nick&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jon&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;status&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;posted&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;GETå’ŒPOSTæ··åˆï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net/http&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Default&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// POST
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Hit /post?id=1234&amp;amp;page=1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Content-Type: application/x-www-form-urlencoded
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// name=hxd&amp;amp;message=hello
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;POST&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/post&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Query&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;page&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DefaultQuery&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;page&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PostForm&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PostForm&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;id: %s; page: %s; name: %s; message: %s&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;page&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;æµ‹è¯•ï¼š&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl -X POST -d &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;message=hello&amp;amp;name=jon&amp;#39;&lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Content-Type: application/x-www-form-urlencoded&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;http://localhost:8080/post?id=1&amp;amp;page=2&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;id: 1; page: 2; name: jon; message: hello
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è¾“å‡ºå“åº”&#34;&gt;è¾“å‡ºå“åº”&lt;/h3&gt;
&lt;p&gt;Ginæœ‰å¤šç§ç›¸åº”HTTPè¯·æ±‚çš„æ ¼å¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;JSON&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;code&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;obj&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;JSONP&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;code&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;obj&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;XML&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;code&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;obj&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;YAML&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;code&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;obj&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;code&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;format&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;values&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Redirect&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;code&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;location&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Data&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;code&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;contentType&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;byte&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;File&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;filepath&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;..&lt;span style=&#34;color:#a6e22e&#34;&gt;etc&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¯”å¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// gin.H æ˜¯ map[string]interface{} çš„ä¸€ç§å¿«æ·æ–¹å¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/someJSON&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;JSON&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StatusOK&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;H&lt;/span&gt;{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hey&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;status&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StatusOK&lt;/span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;å‚è€ƒé“¾æ¥ï¼š&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://gin-gonic.com/zh-cn/docs/examples&#34;&gt;Ginä¸­æ–‡æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://geektutu.com/post/gee.html&#34;&gt;7å¤©ç”¨Goä»é›¶å®ç°Webæ¡†æ¶Geeæ•™ç¨‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.kancloud.cn/shuangdeyu/gin_book/949433&#34;&gt;ä¸­æ–‡æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.cnblogs.com/shijingjing07/p/10302727.html&#34;&gt;Ginæ¡†æ¶ä½¿ç”¨è¯¦è§£&lt;/a&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>Dockeré•œåƒä¼˜åŒ–</title>
      <link>http://hindung.cn/posts/2/</link>
      <pubDate>Thu, 23 Jul 2020 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/2/</guid>
      <description>æ³¨ï¼šæœ¬æ–‡ç« åŸºäºdocker-ceç‰ˆæœ¬ï¼šClient 19.03.8ï¼ŒServer 19.03.8
Dockerfileç®€ä»‹ Dockerfileä¸»è¦æœ‰è¿™å‡ ä¸ªæŒ‡ä»¤ï¼Œæ¯ä¸ªæŒ‡ä»¤éƒ½ä¼šæ·»åŠ æ–°çš„å±‚ï¼Œä½†æ˜¯é•œåƒå¤§å°ä¸ä¸€å®šå¢é•¿ï¼š
   æŒ‡ä»¤ ç”¨é€” ç”¨æ³• ç®€å•ç¤ºä¾‹     FROM æŒ‡å®šåŸºç¡€é•œåƒ FROM &amp;lt;image&amp;gt; æˆ– FROM &amp;lt;image&amp;gt;:&amp;lt;tag&amp;gt; FROM ubuntu:16.04   MAINTAINER ç»´æŠ¤è€…ä¿¡æ¯ MAINTAINER &amp;lt;name&amp;gt; MAINTAINER HuangXianDong   ADD å¤åˆ¶æŒ‡å®šçš„æ–‡ä»¶åˆ°å®¹å™¨ä¸­åŒ…æ‹¬tarï¼ŒURLç­‰ ADD &amp;lt;src&amp;gt; &amp;lt;dest&amp;gt; ADD conf/jail.local /etc/fail2ban/jail.local   COPY å¤åˆ¶hostä¸Šä¸‹æ–‡ç¯å¢ƒçš„æ–‡ä»¶æˆ–è€…å‰ä¸€é˜¶æ®µé•œåƒçš„æ–‡ä»¶åˆ°å®¹å™¨ COPY &amp;lt;src&amp;gt; &amp;lt;dest&amp;gt;æœ‰ä¸¤ä¸ªæ ‡å¿— â€“from= â€“chown= COPY /usr/local/app /usr/local/app   USER æŒ‡å®šç”¨æˆ· USER &amp;lt;username&amp;gt; USER root   WORKDIR æŒ‡å®šå·¥ä½œç›®å½• WORKDIR /path/to/workdir WORKDIR /root   RUN ç»ˆç«¯æ‰§è¡Œshæˆ–è€…å¯æ‰§è¡Œç¨‹åº RUN &amp;lt;command&amp;gt; æˆ– RUN [â€œexecutableâ€, â€œparam1â€, â€œparam2â€] RUN apt-get update   ENV æŒ‡å®šä¸€ä¸ªç¯å¢ƒå˜é‡ ENV &amp;lt;key&amp;gt; &amp;lt;value&amp;gt;æˆ–ENV &amp;lt;key&amp;gt;=&amp;lt;value&amp;gt; ENV TZ=Asia/Shanghai   ONBUILD é…ç½®å½“æ‰€åˆ›å»ºçš„é•œåƒä½œä¸ºå…¶å®ƒæ–°åˆ›å»ºé•œåƒçš„åŸºç¡€é•œåƒæ—¶ï¼Œæ‰€æ‰§è¡Œçš„æ“ä½œæŒ‡ä»¤ ONBUILD [INSTRUCTION] ONBUILD ADD .</description>
      <content>&lt;p&gt;&lt;em&gt;&lt;strong&gt;æ³¨ï¼šæœ¬æ–‡ç« åŸºäºdocker-ceç‰ˆæœ¬ï¼šClient 19.03.8ï¼ŒServer 19.03.8&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&#34;dockerfileç®€ä»‹&#34;&gt;Dockerfileç®€ä»‹&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Dockerfile&lt;/code&gt;ä¸»è¦æœ‰è¿™å‡ ä¸ªæŒ‡ä»¤ï¼Œæ¯ä¸ªæŒ‡ä»¤éƒ½ä¼šæ·»åŠ æ–°çš„å±‚ï¼Œä½†æ˜¯é•œåƒå¤§å°ä¸ä¸€å®šå¢é•¿ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŒ‡ä»¤&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;ç”¨é€”&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;ç”¨æ³•&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;ç®€å•ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;FROM&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;æŒ‡å®šåŸºç¡€é•œåƒ&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;FROM &amp;lt;image&amp;gt;&lt;/code&gt; æˆ– &lt;code&gt;FROM &amp;lt;image&amp;gt;:&amp;lt;tag&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;FROM ubuntu:16.04&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;MAINTAINER&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;ç»´æŠ¤è€…ä¿¡æ¯&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;MAINTAINER &amp;lt;name&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;MAINTAINER HuangXianDong&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ADD&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;å¤åˆ¶æŒ‡å®šçš„æ–‡ä»¶åˆ°å®¹å™¨ä¸­åŒ…æ‹¬tarï¼ŒURLç­‰&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;ADD &amp;lt;src&amp;gt; &amp;lt;dest&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;ADD conf/jail.local /etc/fail2ban/jail.local&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;COPY&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;å¤åˆ¶hostä¸Šä¸‹æ–‡ç¯å¢ƒçš„æ–‡ä»¶æˆ–è€…å‰ä¸€é˜¶æ®µé•œåƒçš„æ–‡ä»¶åˆ°å®¹å™¨&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;COPY &amp;lt;src&amp;gt; &amp;lt;dest&amp;gt;&lt;/code&gt;æœ‰ä¸¤ä¸ªæ ‡å¿— &lt;code&gt;â€“from= â€“chown=&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;COPY /usr/local/app /usr/local/app&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;USER&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;æŒ‡å®šç”¨æˆ·&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;USER &amp;lt;username&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;USER root&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;WORKDIR&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;æŒ‡å®šå·¥ä½œç›®å½•&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;WORKDIR /path/to/workdir&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;WORKDIR /root&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RUN&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;ç»ˆç«¯æ‰§è¡Œshæˆ–è€…å¯æ‰§è¡Œç¨‹åº&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;RUN &amp;lt;command&amp;gt;&lt;/code&gt; æˆ– &lt;code&gt;RUN [â€œexecutableâ€, â€œparam1â€, â€œparam2â€]&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;RUN apt-get update&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ENV&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;æŒ‡å®šä¸€ä¸ªç¯å¢ƒå˜é‡&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;ENV &amp;lt;key&amp;gt; &amp;lt;value&amp;gt;&lt;/code&gt;æˆ–&lt;code&gt;ENV &amp;lt;key&amp;gt;=&amp;lt;value&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;ENV TZ=Asia/Shanghai&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ONBUILD&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;é…ç½®å½“æ‰€åˆ›å»ºçš„é•œåƒä½œä¸ºå…¶å®ƒæ–°åˆ›å»ºé•œåƒçš„åŸºç¡€é•œåƒæ—¶ï¼Œæ‰€æ‰§è¡Œçš„æ“ä½œæŒ‡ä»¤&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;ONBUILD [INSTRUCTION]&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;ONBUILD ADD . /app/src&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;VOLUME&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;åˆ›å»ºä¸€ä¸ªæŒ‚è½½ç‚¹&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;VOLUME [â€œ/dataâ€] &lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;VOLUME [â€œ/dataâ€]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;EXPOSE&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;æ‰“ç®—æš´éœ²çš„ç«¯å£å·&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;EXPOSE &amp;lt;port&amp;gt; [&amp;lt;port&amp;gt;â€¦]&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;EXPOSE 5060/tcp 5060/udp&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ENTRYPOINT&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;å®¹å™¨å…¥å£ç‚¹ï¼Œä¸å¯è¢«&lt;code&gt;docker run&lt;/code&gt;è¦†ç›–&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;ENTRYPOIN&lt;/code&gt;T [â€œexecutableâ€, â€œparam1â€, â€œparam2â€]æˆ–&lt;code&gt;ENTRYPOINT command param1 param2&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;ENTRYPOINT entrypoint.sh&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CMD&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;æŒ‡å®šå¯åŠ¨å®¹å™¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¢«&lt;code&gt;docker run&lt;/code&gt;è¦†ç›–&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;CMD [â€œexecutableâ€,â€param1â€³,â€param2â€³]&lt;/code&gt;æˆ–&lt;code&gt;CMD command param1 param2&lt;/code&gt;æˆ–&lt;code&gt;CMD [â€œparam1â€³,â€param2â€]&lt;/code&gt;æä¾›ç»™ &lt;code&gt;ENTRYPOINT&lt;/code&gt; çš„é»˜è®¤å‚æ•°&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;CMD python /app/app.py&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;å¸¸ç”¨é•œåƒç¼©å°æ–¹æ³•&#34;&gt;å¸¸ç”¨é•œåƒç¼©å°æ–¹æ³•&lt;/h2&gt;
&lt;h3 id=&#34;åœ¨å“ªå±‚å¼•å…¥å°±åœ¨å“ªå±‚æ¸…ç†&#34;&gt;åœ¨å“ªå±‚å¼•å…¥ï¼Œå°±åœ¨å“ªå±‚æ¸…ç†&lt;/h3&gt;
&lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼Œ&lt;code&gt;Dockerfile&lt;/code&gt;æ¯ä¸ªæŒ‡ä»¤éƒ½ä¼šå åŠ æ–°çš„ä¸€å±‚æ–‡ä»¶ç³»ç»Ÿï¼Œç”±äº&lt;code&gt;docker&lt;/code&gt;é•œåƒè¿™ç§å åŠ çš„æ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ„å»ºé•œåƒæ—¶ï¼Œå‰é¢ä¸€å±‚çš„æ–‡ä»¶å¯¹äºæœ¬å±‚æ¥è¯´æ˜¯åªè¯»çš„ï¼Œä»è€Œä¸èƒ½å¤Ÿåœ¨æœ¬å±‚æ–‡ä»¶ç³»ç»Ÿå»æ¸…ç†ä¸Šä¸€å±‚å¼•å…¥çš„æ–‡ä»¶ï¼Œè™½ç„¶å¯ä»¥åˆ é™¤æ‰å¯¹åº”çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œä½†æ˜¯é•œåƒä½“ç§¯å¹¶æ²¡æœ‰å‡å°‘ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Dockerfile&#34; data-lang=&#34;Dockerfile&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;WORKDIR&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; /usr/src&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; git clone http://xxx.git &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; cd ./xxx &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ./bootstrap.sh &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ./configure --enable-core-pgsql-support &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make install      &lt;span style=&#34;color:#75715e&#34;&gt;#è¿™ä¸€å±‚å¼•å…¥æ–‡ä»¶&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; rm -rf /usr/src/*      &lt;span style=&#34;color:#75715e&#34;&gt;#åœ¨è¿™ä¸€å±‚æ¸…ç†ï¼Œè¾¾ä¸åˆ°ä½“ç§¯å‡å°çš„ç›®çš„ï¼Œåè€Œå¢åŠ å±‚æ•°&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åº”è¯¥è¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Dockerfile&#34; data-lang=&#34;Dockerfile&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;WORKDIR&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; /usr/src&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; git clone http://xxx.git &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; cd ./xxx &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ./bootstrap.sh &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ./configure --enable-core-pgsql-support &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make install &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt;     &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm -rf /usr/src/*      &lt;span style=&#34;color:#75715e&#34;&gt;# åœ¨å“ªå±‚å¼•å…¥ï¼Œå°±åœ¨å“ªå±‚æ¸…ç†&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤å¤–ï¼Œå¦‚æœåœ¨&lt;code&gt;ADD&lt;/code&gt;ï¼Œ&lt;code&gt;COPY&lt;/code&gt;æŒ‡ä»¤ä¸­æ·»åŠ äº†å¤šä½™çš„æ–‡ä»¶ï¼Œæ­¤ååœ¨å…¶ä»–å±‚åˆ é™¤æ‰æ”¹æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è™½ç„¶æ–‡ä»¶åˆ é™¤äº†ï¼Œä½†æ˜¯é•œåƒå¤§å°æ˜¯ä¸å˜æˆ–å¢åŠ çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Dockerfile&#34; data-lang=&#34;Dockerfile&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;FROM&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; busybox&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;ADD&lt;/span&gt; . /root        &lt;span style=&#34;color:#75715e&#34;&gt;# busytest0 157MB&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; rm -rf /root   &lt;span style=&#34;color:#75715e&#34;&gt;# busytest1 157MB&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦å¤–ï¼Œåœ¨ä½¿ç”¨åŒ…ç®¡ç†å·¥å…·çš„æ—¶å€™ç»å¸¸è¦å®‰è£…å„ç§å·¥å…·ï¼Œå®‰è£…æ—¶åº”è¯¥å°†æ‰€æœ‰è¦å®‰è£…çš„å·¥å…·å†™åœ¨ä¸€èµ·å¹¶ä¸”åŠ ä»¥æ¸…ç†ï¼Œç”šè‡³å¯ä»¥å¸è½½æ‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Dockerfile&#34; data-lang=&#34;Dockerfile&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; apt-get update &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y autoconf automake bison &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    build-essential fail2ban gawk git-core groff groff-base &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get autoclean &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm -rf /var/lib/apt/lists/*&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;åˆå¹¶runä¸­çš„å‘½ä»¤&#34;&gt;åˆå¹¶RUNä¸­çš„å‘½ä»¤&lt;/h3&gt;
&lt;p&gt;å¤šä¸ª&lt;code&gt;RUN&lt;/code&gt;æŒ‡ä»¤ä¼šå¢åŠ å¾ˆå¤šå±‚é•œåƒï¼Œåº”è¯¥å°½é‡æŠŠèƒ½åˆåœ¨ä¸€èµ·å†™çš„&lt;code&gt;shell&lt;/code&gt;å†™åœ¨åŒä¸€ä¸ª&lt;code&gt;RUN&lt;/code&gt;æŒ‡ä»¤é‡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Dockerfile&#34; data-lang=&#34;Dockerfile&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; apt-get update &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; echo $TZ &amp;gt; /etc/timezone &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install tzdata &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get clean &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get autoclean &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è€Œä¸æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Dockerfile&#34; data-lang=&#34;Dockerfile&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; apt-get update &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; echo $TZ &amp;gt; /etc/timezone &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; apt-get install tzdata &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; apt-get clean &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; apt-get autoclean&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;åˆ†é˜¶æ®µæ„å»º&#34;&gt;åˆ†é˜¶æ®µæ„å»º&lt;/h3&gt;
&lt;p&gt;æœ‰äº›åº”ç”¨ï¼Œå¦‚&lt;code&gt;go&lt;/code&gt;æ„å»ºçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥ä¸éœ€è¦ä¾èµ–æ„å»ºä»–çš„ç³»ç»Ÿè€Œè¿è¡Œçš„ç¨‹åºï¼Œå°±é€‚åˆè¿›è¡Œåˆ†æ­¥æ„å»ºï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªé˜¶æ®µç¼–è¯‘ï¼Œä¸€ä¸ªé˜¶æ®µç”¨äºæ‰§è¡Œç¨‹åºã€‚åˆ†æ­¥æ„å»ºå¾ˆå¤§ç¨‹åº¦ä¸Šèƒ½å‡å°‘é•œåƒçš„ä½“ç§¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Dockerfile&#34; data-lang=&#34;Dockerfile&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;FROM&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; golang&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;COPY&lt;/span&gt; hello.go .&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; go build hello.go&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;FROM&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; scratch&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;COPY&lt;/span&gt; --from&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; /go/hello .&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CMD&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;./hello&amp;#34;&lt;/span&gt;]&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åˆ†é˜¶æ®µæ„å»ºæœ‰æ—¶å€™å¯¹ä¸€äº›&lt;code&gt;C&lt;/code&gt;ç¨‹åºå’Œå¤§å‹çš„&lt;code&gt;Go&lt;/code&gt;ç¨‹åºæ¥è¯´ï¼Œå‡¡æ˜¯æœ‰ä¾èµ–åŠ¨æ€è¿è¡Œåº“çš„ç¨‹åºè¿›è¡Œåˆ†é˜¶æ®µæ„å»ºå°±å¾ˆå¤´ç–¼ï¼Œå› ä¸ºå¤åˆ¶è¿‡æ¥çš„å¯æ‰§è¡Œæ–‡ä»¶å¯èƒ½éœ€è¦æŸä¸ªåŠ¨æ€åº“çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;ä¸ä¹‹ç›¸å¯¹çš„è§£å†³åŠæ³•æ˜¯ï¼šé™æ€ç¼–è¯‘æˆ–è€…å¤åˆ¶åŠ¨æ€åº“ã€‚&lt;/p&gt;
&lt;p&gt;é™æ€ç¼–è¯‘æ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹æ³•ï¼Œä½†æ˜¯å¦‚æœæŸç§åŸå› ä¸é€‚åˆé™æ€ç¼–è¯‘ï¼Œæ¯”å¦‚åˆ†é˜¶æ®µç¼–è¯‘ç­‰ç­‰ï¼Œè¿™å°±éœ€è¦æ‹·è´åº“æ–‡ä»¶äº†ã€‚&lt;/p&gt;
&lt;p&gt;å°±åƒæŸäº›ç¨‹åºï¼Œç¼–è¯‘å‡ºæ¥çš„å¯æ‰§è¡Œæ–‡ä»¶åªæœ‰åå‡ &lt;code&gt;kb&lt;/code&gt;ï¼Œå…¶ä»–çš„éƒ½æ˜¯ä»¥åŠ¨æ€åº“çš„å½¢åŠ¿å­˜åœ¨ï¼Œé‚£ä¹ˆæ€ä¹ˆå¯»æ‰¾åº”ç”¨å¯¹åº”çš„ä¾èµ–åº“å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;ldd&lt;/code&gt;å‘½ä»¤ï¼Œè¯¥å‘½ä»¤å¯ä»¥æŸ¥è¯¢å¯¹åº”çš„åº“æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ldd /usr/local/freeswitch/bin/freeswitch&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        linux-vdso.so.1 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;gt;  &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0x00007ffd0bb61000&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        libfreeswitch.so.1 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;gt; /usr/local/freeswitch/lib/libfreeswitch.so.1 &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0x00007f0fa2a1d000&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        libpthread.so.0 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;gt; /lib/x86_64-linux-gnu/libpthread.so.0 &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0x00007f0fa27f3000&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        libc.so.6 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;gt; /lib/x86_64-linux-gnu/libc.so.6 &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0x00007f0fa2429000&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        libuuid.so.1 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;gt; /lib/x86_64-linux-gnu/libuuid.so.1 &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0x00007f0fa2223000&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å°†è¿™äº›å¯¹åº”çš„åº“æ–‡ä»¶å¤åˆ¶åˆ°é•œåƒä¹‹åéœ€è¦æ‰§è¡Œ&lt;code&gt;ldconfig&lt;/code&gt;å‘½ä»¤ï¼Œä»»ä½•æ”¹åŠ¨åº“æ–‡ä»¶çš„æ“ä½œéƒ½åº”è¯¥æ‰§è¡Œè¯¥å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;å¤åˆ¶åŠ¨æ€åº“æ–‡ä»¶å¯èƒ½ä¼šå¯¼è‡´åç»­ç»´æŠ¤å˜å¾—å›°éš¾ï¼Œå¹¶ä¸”å¯èƒ½å­˜åœ¨æœªçŸ¥çš„éšæ‚£ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åˆ¶ä½œåŸºç¡€é•œåƒåŒ…&#34;&gt;åˆ¶ä½œåŸºç¡€é•œåƒåŒ…&lt;/h3&gt;
&lt;p&gt;æ„å»ºé•œåƒæ—¶æœ‰äº›ä¸»è¦æ˜¯ä¸‹è½½ä¾èµ–åŒ…å¯¼è‡´çš„æ—¶é—´å˜é•¿ï¼Œå¯ä»¥è€ƒè™‘ä¸“é—¨åšä¸€ä¸ªç¯å¢ƒç¼–è¯‘çš„åŸºç¡€é•œåƒï¼Œåç»­ç¼–è¯‘å°±å¯ä»¥åŸºäºè¯¥é•œåƒç¼–è¯‘ï¼Œå¤§å¤§å‡å°‘æ„å»ºæ—¶é—´ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸€äº›å®¹æ˜“å¢å¤§é•œåƒä½“ç§¯çš„æ“ä½œ&#34;&gt;ä¸€äº›å®¹æ˜“å¢å¤§é•œåƒä½“ç§¯çš„æ“ä½œ&lt;/h3&gt;
&lt;p&gt;æ…ç”¨&lt;code&gt;chown&lt;/code&gt;å‘½ä»¤ï¼š&lt;code&gt;chown&lt;/code&gt;å‘½ä»¤åœ¨æœ‰äº›æ–‡ä»¶ç³»ç»Ÿåœ¨å®ç°å¤šå±‚è”åˆæ–‡ä»¶ç³»ç»Ÿçš„åŸç†ä¸åŒï¼Œå¯èƒ½ä¼šå¯¼è‡´æ— ç«¯å¢åŠ æ–‡ä»¶å¤¹çš„ä½“ç§¯ã€‚&lt;/p&gt;
&lt;p&gt;åŸå› æ˜¯åœ¨&lt;code&gt;docker&lt;/code&gt;å®ç°çš„æŸäº›æ–‡ä»¶ç³»ç»Ÿå¦‚&lt;code&gt;overlayfs2&lt;/code&gt;ï¼Œ&lt;code&gt;chown&lt;/code&gt; åªæ›´æ”¹ &lt;code&gt;metadata&lt;/code&gt; æ•°æ®, è€Œ &lt;code&gt;metadata&lt;/code&gt; æ˜¯ä½œç”¨åœ¨ &lt;code&gt;inode&lt;/code&gt; èŠ‚ç‚¹ä¸Šçš„, ä¸€ä¸ªç¡¬é“¾æ¥æ–‡ä»¶çš„å±æ€§è¢«ä¿®æ”¹, åŒæ­¥çš„, æ‰€æœ‰æŒ‡å‘è¿™ä¸ª &lt;code&gt;inode&lt;/code&gt;èŠ‚ç‚¹çš„æ–‡ä»¶çš„å±æ€§éƒ½ä¼šå˜åŒ–ï¼Œè€Œ&lt;code&gt;overlayfs2&lt;/code&gt;æ¯å±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå³ä½¿æ–‡ä»¶å±æ€§çš„å˜åŒ–ï¼Œä¹Ÿä¼šå¯¼è‡´æ•´ä¸ªæ–‡ä»¶è¢«æ‹·è´, æ‰€ä»¥åœ¨ &lt;code&gt;overlayfs2&lt;/code&gt; ä¸‹, ä¼šäº§ç”Ÿå¤šä½™çš„ç©ºé—´æµªè´¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¸¸ç”¨çš„å·¥å…·&#34;&gt;å¸¸ç”¨çš„å·¥å…·&lt;/h2&gt;
&lt;h3 id=&#34;docker-historyå‘½ä»¤&#34;&gt;docker historyå‘½ä»¤&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;docker&lt;/code&gt;è‡ªå¸¦äº†ç®€å•çš„é•œåƒåˆ†æå‘½ä»¤ï¼Œç›´æ¥æ‰§è¡Œ&lt;code&gt;docker history &amp;lt;IMAGE ID&amp;gt;&lt;/code&gt; æˆ–è€… &lt;code&gt;docker history REPOSITORY:TAG&lt;/code&gt;å°±è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;root@RqInternTest3 freeswitch-container&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# docker history dda43e8b9e21&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;dda43e8b9e21        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop)  CMD [&amp;#34;/usr/local/freeswitâ€¦   0B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;76f11898568d        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop)  EXPOSE 64535-65535/udp       0B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;124e52a5fdb8        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop)  EXPOSE 8021/tcp              0B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;d05fa7854fa3        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop)  EXPOSE 5066/tcp 7443/tcp     0B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;fae9a2737d1b        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop)  EXPOSE 5060/tcp 5060/udp â€¦   0B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;d817769a9e83        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c ldconfig                             81.5kB
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;e4347f4a3f7f        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop) ADD file:305fb1821e6c9f4f7â€¦   19.5kB&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;7fa9aac435b0        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop) ADD file:ef5aa87255557ffc9â€¦   340B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;2872fc32f715        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop) ADD file:aa24cd419ee5ea6caâ€¦   249B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;681ea1a83b9b        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c chmod +x /etc/init.d/freeswitch  â€¦   7.28kB
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;b3af584e7595        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop) ADD file:e450d50f8d60a1861â€¦   5.76kB&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;8c2e2a5f2de4        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop) COPY dir:8ecfbdecc9f674459â€¦   417MB&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;9a2938106462        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop) COPY dir:1ddadc455338c149fâ€¦   112MB&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;d03606f65563        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop) COPY dir:cd305b7f15031b530â€¦   20.4MB&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;3e21911eea87        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop) COPY --chown=freeswitch:daâ€¦   410MB&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;6ce315566979        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c useradd -r -g daemon freeswitch      329kB
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;b7c170867677        &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; hours ago         /bin/sh -c apt-get update     &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ln -snf /usâ€¦   2.76MB
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;9a800e72f239        &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; hours ago        /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop)  ENV TZ=Asia/Shanghai         0B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;77be327e4b63        &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt; weeks ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop)  CMD [&amp;#34;/bin/bash&amp;#34;]            0B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;           &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt; weeks ago         /bin/sh -c mkdir -p /run/systemd &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;doâ€¦   7B
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;missing&amp;gt;           4 weeks ago         /bin/sh -c set -xe   &amp;amp;&amp;amp; echo &amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#!/bin/sh&amp;#39; &amp;gt; /â€¦   745B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;           &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt; weeks ago         /bin/sh -c rm -rf /var/lib/apt/lists/*          0B
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;           &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt; weeks ago         /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop) ADD file:1f70668251e2e58ceâ€¦   124MB&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;diveåˆ†æé•œåƒå·¥å…·&#34;&gt;diveåˆ†æé•œåƒå·¥å…·&lt;/h3&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºæ¯ä¸€å±‚æ‰€æ·»åŠ çš„å¤§å°ï¼Œå¹¶é’ˆå¯¹å¤§çš„å±‚è¿›è¡Œä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;åˆ†æé•œåƒè¿˜æœ‰ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å·¥å…·&lt;code&gt;dive&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;p&gt;ä¸‹è½½å®‰è£…&lt;code&gt;dive&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# wget https://github.com/wagoodman/dive/releases/download/v0.9.2/dive_0.9.2_linux_amd64.tar.gz&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# tar -zvxf dive_0.9.2_linux_amd64.tar.gz&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# cp dive /usr/bin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨ï¼š&lt;code&gt;dive &amp;lt;IMAGE ID&amp;gt;&lt;/code&gt; æˆ–è€… &lt;code&gt;dive REPOSITORY:TAG&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;â”ƒ â— Layers â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚ Current Layer Contents â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Cmp   Size  Command                                          Permission     UID:GID       Size  Filetree
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    5.2 MB  FROM d970df9dd8bab4b                             drwxr-xr-x         0:0     1.0 MB  â”œâ”€â”€ bin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                             -rwxr-xr-x         0:0     1.0 MB  â”‚   â”œâ”€â”€ &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;â”‚ Layer Details â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ &lt;span style=&#34;color:#f92672&#34;&gt;[[&lt;/span&gt; â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                             -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ acpid â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Tags:   &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;unavailable&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;                                        -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ add-shell â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Id:     d970df9dd8bab4b7a604d73763aee9e732d107cf3b02000ca193 -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ addgroup â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;712fe48a460f                                                 -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ adduser â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Digest: sha256:8a9aa5c55905476e9412fcf0e18942123b239333aafc4 -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ adjtimex â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;d7b3656faf67b980b41                                          -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ ar â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Command:                                                     -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ arch â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#(nop) ADD file:d5fc1686f667af49c2cb01970701b62eeb9c818d2d4e -rwxr-xr-x         0:0        0 B  â”‚   â”œâ”€â”€ arp â†’ bin/[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;8f967993dab1de737f28 in /                                    -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ arping â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                             -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ ash â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;â”‚ Image Details â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ awk â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                             -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ base64 â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                             -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ basename â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Total Image size: 5.2 MB                                     -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ bc â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Potential wasted space: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B                                  -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ beep â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Image efficiency score: &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt; %                                -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ blkdiscard â†’ bin/
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                             -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ blkid â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Count   Total Space  Path                                    -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ blockdev â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                             -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ bootchartd â†’ bin/
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                             -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ brctl â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                             -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ bunzip2 â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                             -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ busybox â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                             -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ bzcat â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                             -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ bzip2 â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                             -rwxr-xr-x         0:0        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; B  â”‚   â”œâ”€â”€ cal â†’ bin/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥éå¸¸æ¸…æ™°çš„çœ‹åˆ°æ¯ä¸€å±‚æ·»åŠ çš„é•œåƒå¤§å°ä»¥åŠæ–‡ä»¶çš„å˜åŒ–ï¼Œé€šè¿‡å³è¾¹çš„&lt;code&gt;Content&lt;/code&gt;å¯ä»¥è§‚å¯Ÿåˆ°æ–‡ä»¶å¤¹çš„å˜åŒ–ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å„ç§åŸºç¡€é•œåƒçš„æ„å»º&#34;&gt;å„ç§åŸºç¡€é•œåƒçš„æ„å»º&lt;/h2&gt;
&lt;h3 id=&#34;å„ç±»åŸºç¡€é•œåƒåˆ†æ&#34;&gt;å„ç±»åŸºç¡€é•œåƒåˆ†æ&lt;/h3&gt;
&lt;p&gt;å¸¸ç”¨çš„åŸºç¡€é•œåƒ&lt;code&gt;CentOSï¼ŒDebianï¼ŒFedoraï¼ŒUbuntuï¼ŒAlpine&lt;/code&gt;é•œåƒï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»åˆ«&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;ç‰ˆæœ¬&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;é•œåƒå¤§å°(MB)&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;æè¿°&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;åŒ…ç®¡ç†&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CentOS&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;latest&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;69.84&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;é€‚ç”¨äºæ­£å¼çš„ç”Ÿäº§ç¯å¢ƒé•œåƒåˆ¶ä½œï¼Œä½†æ˜¯æ„å»ºå‡ºæ¥çš„é•œåƒå¤§å°ä¼šå¾ˆå¤§ï¼Œå¯ä»¥æ¥è€ƒè™‘åˆ†æ­¥æ„å»º&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;yumï¼Œrpm&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;centos8&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;69.84&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;centos7&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;72.15&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;centos6&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;66.83&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Debian&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;buster-slim&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;26.46&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;å½“å‰ç¨³å®šç‰ˆæœ¬çš„ä½“ç§¯æ›´å°ç‰ˆæœ¬ï¼ˆslimï¼‰&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;apt-get, dpkg&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;stretch&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;43.69&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;æ—§çš„ç¨³å®šç‰ˆ&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;jessie&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;52.08&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;æµ‹è¯•ç‰ˆæœ¬&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;stable&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;48.78&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ç¨³å®šç‰ˆæœ¬&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;sid&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;50.54&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ä¸ç¨³å®šç‰ˆæœ¬&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;wheezy&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;38.66&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Debian 7,è¢«æ·˜æ±°çš„ç¨³å®šç‰ˆ&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Fedora&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;33&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;67.21&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ç¨³å®šç‰ˆæœ¬&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;dpkg/aptï¼Œpacman&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;rawhide&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;67.21&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;æ°¸è¿œä¸ä¼šè¢«å†»ç»“, ä¹Ÿæ°¸è¿œä¸ä¼šè¢«æ­£å¼å‘å¸ƒ. å¯¹ç¨³å®šæ€§æ²¡æœ‰ä»»ä½•ä¿è¯. ä¸»è¦ç”¨äºæœ€æ–°ä»£ç çš„åˆæ­¥æµ‹è¯•&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Ubuntu&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;latest&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;25.9&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;é€‚ç”¨äºæ­£å¼çš„ç”Ÿäº§ç¯å¢ƒé•œåƒåˆ¶ä½œï¼Œä½†æ˜¯æ„å»ºå‡ºæ¥çš„é•œåƒå¤§å°ä¼šå¾ˆå¤§ï¼Œå¯ä»¥æ¥è€ƒè™‘åˆ†æ­¥æ„å»º&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;apt-get&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;18.04&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;25.9&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;16.04&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;42.13&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Alpine&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;latest&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;2.68&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;é¢å‘å®‰å…¨çš„ã€è½»é‡çº§çš„Linuxç³»ç»Ÿï¼ŒåŸºäºmusl libcå’Œbusyboxï¼Œä½¿ç”¨glibcåº“çš„å¤§å‹cè¯­è¨€å¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šå‘&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;apk, lbu&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;busybox&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;latest&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;åŒ…å«äº†åŸºæœ¬çš„linuxå‘½ä»¤&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;apk&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;glibc&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;5&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;GNU C libraryç‰ˆæœ¬&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;scratch&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;latest&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ç©ºç™½é•œåƒï¼Œshå·¥å…·ä¹Ÿæ²¡æœ‰&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;æ— &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥ä½¿ç”¨ç¼–ç¨‹è¯­è¨€å¯¹åº”çš„åŸºç¡€é•œåƒï¼Œé€‚åˆåˆ†æ­¥æ„å»ºå®Œæˆä¹‹ååœ¨å…¶ä¸Šè¿è¡Œæˆ–è€…åœ¨å¯¹åº”çš„åŸºç¡€é•œåƒä¸­ç¼–è¯‘ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å„ä¸ªåŸºç¡€é•œåƒæ¢æº&#34;&gt;å„ä¸ªåŸºç¡€é•œåƒæ¢æº&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;CentOS yumæº&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;Ubuntu aptæº&lt;/strong&gt;&lt;/em&gt;
æ¸…åæºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sed -i &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;s http://.*.ubuntu.com http://mirrors.tuna.tsinghua.edu.cn g&amp;#39;&lt;/span&gt; /etc/apt/sources.list
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é˜¿é‡Œäº‘æºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sed -i &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;s http://.*.ubuntu.com http://mirrors.aliyun.com g&amp;#39;&lt;/span&gt; /etc/apt/sources.list
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;Debian aptæº&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sed -i &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;s http://.*.debian.org http://mirrors.aliyun.com g&amp;#39;&lt;/span&gt; /etc/apt/sources.list
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;Alphine apkæº&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;é˜¿é‡Œæºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sed -i &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&amp;#39;&lt;/span&gt; /etc/apk/repositories
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç§‘å¤§æºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sed -i &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;s/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g&amp;#39;&lt;/span&gt; /etc/apk/repositories
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å„ä¸ªåŸºç¡€é•œåƒè®¾ç½®æ—¶åŒºæ–¹æ³•&#34;&gt;å„ä¸ªåŸºç¡€é•œåƒè®¾ç½®æ—¶åŒºæ–¹æ³•&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Ubuntu&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Dockerfile&#34; data-lang=&#34;Dockerfile&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;FROM&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; ubuntu:16.04&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;ENV&lt;/span&gt; TZ&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;Asia/Shanghai&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; apt-get update &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; echo $TZ &amp;gt; /etc/timezone &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install tzdata &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get clean &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get autoclean &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;CentOS&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ENV TimeZone&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;Asia/Shanghai   
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;RUN ln -snf /usr/share/zoneinfo/$TimeZone /etc/localtime &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; echo $TimeZone &amp;gt; /etc/timezone
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;Debian&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ENV TZ&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;Asia/Shanghai
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; echo $TZ &amp;gt; /etc/timezone
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;Alphine&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;RUN apk add tzdata &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Asia/Shanghai&amp;#34;&lt;/span&gt; &amp;gt; /etc/timezone &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apk del tzdata
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æŠŠæ—¥å¿—æ–‡ä»¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºæµ&#34;&gt;æŠŠæ—¥å¿—æ–‡ä»¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºæµ&lt;/h3&gt;
&lt;p&gt;æœ‰æ—¶å€™æˆ‘ä»¬å†™çš„ç¨‹åºä¸æ˜¯ä»¥æ ‡å‡†è¾“å‡ºåˆ°æ§åˆ¶å°çš„æ–¹å¼æ¥æ‰“å°æ—¥å¿—ï¼Œè€Œæ˜¯å­˜åœ¨æŸä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œè¿™å°±é€ æˆå®¹å™¨è·‘èµ·æ¥ä¹‹å&lt;code&gt;docker logs&lt;/code&gt;å‘½ä»¤æŸ¥çœ‹ä¸åˆ°æ—¥å¿—ï¼Œè¿™æ˜¯å› ä¸º&lt;code&gt;docker&lt;/code&gt;å®¹å™¨åªæ¥ç®¡æ ‡å‡†è¾“å‡ºæµå’Œæ ‡å‡†é”™è¯¯æµï¼Œå› æ­¤è¿˜éœ€è¦é‡å®šå‘åˆ°&lt;code&gt;stdout&lt;/code&gt;å’Œ&lt;code&gt;stderr&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;RUN ln -sf /dev/stdout /var/log/nginx/access.log &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ln -sf /dev/stderr /var/log/nginx/error.log
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content>
    </item>
    
    <item>
      <title>Golang-interfaceçš„åº•å±‚åŸç†æµ…æ</title>
      <link>http://hindung.cn/posts/1/</link>
      <pubDate>Thu, 23 Jul 2020 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/1/</guid>
      <description>å‰è¨€ Goè¯­è¨€åœ¨è¯­æ³•ä¸Šç›¸å¯¹C/C++æ¥è¯´ï¼Œæ˜¯æ¯”è¾ƒç®€å•çš„ï¼ŒåŸºæœ¬è¯­æ³•å¤šåˆ·åˆ·é¢˜ç›®ï¼Œç„¶åå·¥ç¨‹çš„æ¶æ„ã€ç›®å½•è§„åˆ™ç­‰å¤šçœ‹çœ‹å…¶ä»–å¼€æºé¡¹ç›®ï¼Œå°±åº”è¯¥èƒ½æ¯”è¾ƒç†Ÿæ‚‰äº†ã€‚Goè¯­è¨€æ¯”è¾ƒæ ¸å¿ƒçš„è®¾è®¡ åŒ…æ‹¬interfaceã€å†…å­˜æ¨¡å‹ã€deferæœºåˆ¶ã€goroutineå®ç°ä¸è°ƒåº¦ã€cgoã€æ•°ç»„ä¸åˆ‡ç‰‡ã€Goç¼–è¯‘å™¨å’Œè¿æ¥å™¨ã€GCå®ç°è¿™å‡ å¤§å—ã€‚
æ³¨ï¼šæ‰€æœ‰æºç åŸºäº go version go1.13.5 windows/amd64
æœ¬ç¯‡ç¬”è®°ç›®çš„æ˜¯äº†è§£interfaceçš„ç‰¹æ€§ï¼Œå¹¶çŸ¥é“å¦‚ä½•ç”¨å¥½å®ƒã€‚
Interfaceå®šä¹‰  æ˜¯ä¸€ç§ç±»å‹ å¯ä»¥å®šä¹‰0ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ï¼ˆä¸€ç»„è¡Œä¸ºï¼‰ å¯ä»¥åµŒå…¥å…¶ä»–æ¥å£ï¼ˆç›®æ ‡ç±»å‹æ–¹æ³•é›†ä¸­å¿…é¡»æ‹¥æœ‰åŒ…å«åµŒå…¥æ¥å£æ–¹æ³•åœ¨å†…çš„å…¨éƒ¨æ–¹æ³•æ‰ç®—å®ç°äº†è¯¥æ¥å£ï¼‰  å¦‚ï¼š
type Notifier interface { ã€€notify() } è¿™å°±å®šä¹‰äº†ä¸€ä¸ªåä¸ºNotifierçš„interfaceï¼Œå®ç°è¿™ä¸ªinterfaceå¾ˆç®€å•ï¼Œå®ç°notifyæ–¹æ³•å³å¯ï¼š
type User struct { ã€€nameã€€string }  func (u *User) notify() { ã€€fmt.Printf(&amp;#34;Notify user name %s\n&amp;#34;, u.name) } å…¶ä»–ç»“æ„ä½“ä¹Ÿå¯ä»¥å®ç°è¿™ä¸ªinterfaceï¼š
type Admin struct { ã€€nameã€€string }  func (a *Admin) notify() { ã€€fmt.Printf(&amp;#34;Sending admin name %s\n&amp;#34;, a.name) } è¿™ç§å®ç°æ˜¯DuckTypeï¼šç±»å‹ä¸éœ€è¦æ˜¾å¼å£°æ˜å®ƒå®ç°äº†æŸä¸ªæ¥å£ï¼šæ¥å£è¢«éšå¼åœ°å®ç°ã€‚å¤šä¸ªç±»å‹å¯ä»¥å®ç°åŒä¸€ä¸ªæ¥ã€‚
åœ¨è°ƒç”¨notifyçš„åœ°æ–¹å®ç°å¦‚ä¸‹æ–¹æ³•ï¼Œå³å¯å®ç°å¤šæ€æ€§ï¼Œå³é¢å‘æ¥å£ç¼–ç¨‹ï¼š
func sendNotify(n Notifier) {  n.</description>
      <content>&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Go&lt;/code&gt;è¯­è¨€åœ¨è¯­æ³•ä¸Šç›¸å¯¹&lt;code&gt;C/C++&lt;/code&gt;æ¥è¯´ï¼Œæ˜¯æ¯”è¾ƒç®€å•çš„ï¼ŒåŸºæœ¬è¯­æ³•å¤šåˆ·åˆ·é¢˜ç›®ï¼Œç„¶åå·¥ç¨‹çš„æ¶æ„ã€ç›®å½•è§„åˆ™ç­‰å¤šçœ‹çœ‹å…¶ä»–å¼€æºé¡¹ç›®ï¼Œå°±åº”è¯¥èƒ½æ¯”è¾ƒç†Ÿæ‚‰äº†ã€‚&lt;code&gt;Go&lt;/code&gt;è¯­è¨€æ¯”è¾ƒæ ¸å¿ƒçš„è®¾è®¡ åŒ…æ‹¬&lt;code&gt;interface&lt;/code&gt;ã€å†…å­˜æ¨¡å‹ã€&lt;code&gt;defer&lt;/code&gt;æœºåˆ¶ã€&lt;code&gt;goroutine&lt;/code&gt;å®ç°ä¸è°ƒåº¦ã€&lt;code&gt;cgo&lt;/code&gt;ã€æ•°ç»„ä¸åˆ‡ç‰‡ã€&lt;code&gt;Go&lt;/code&gt;ç¼–è¯‘å™¨å’Œè¿æ¥å™¨ã€&lt;code&gt;GC&lt;/code&gt;å®ç°è¿™å‡ å¤§å—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨ï¼šæ‰€æœ‰æºç åŸºäº go version go1.13.5 windows/amd64&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡ç¬”è®°ç›®çš„æ˜¯äº†è§£&lt;code&gt;interface&lt;/code&gt;çš„ç‰¹æ€§ï¼Œå¹¶çŸ¥é“å¦‚ä½•ç”¨å¥½å®ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;interfaceå®šä¹‰&#34;&gt;Interfaceå®šä¹‰&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æ˜¯ä¸€ç§ç±»å‹&lt;/li&gt;
&lt;li&gt;å¯ä»¥å®šä¹‰0ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ï¼ˆä¸€ç»„è¡Œä¸ºï¼‰&lt;/li&gt;
&lt;li&gt;å¯ä»¥åµŒå…¥å…¶ä»–æ¥å£ï¼ˆç›®æ ‡ç±»å‹æ–¹æ³•é›†ä¸­å¿…é¡»æ‹¥æœ‰åŒ…å«åµŒå…¥æ¥å£æ–¹æ³•åœ¨å†…çš„å…¨éƒ¨æ–¹æ³•æ‰ç®—å®ç°äº†è¯¥æ¥å£ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Notifier&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ã€€ &lt;span style=&#34;color:#a6e22e&#34;&gt;notify&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™å°±å®šä¹‰äº†ä¸€ä¸ªåä¸º&lt;code&gt;Notifier&lt;/code&gt;çš„&lt;code&gt;interface&lt;/code&gt;ï¼Œå®ç°è¿™ä¸ª&lt;code&gt;interface&lt;/code&gt;å¾ˆç®€å•ï¼Œå®ç°&lt;code&gt;notify&lt;/code&gt;æ–¹æ³•å³å¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ã€€ &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;ã€€&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;u&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;notify&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ã€€ &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Notify user name %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;u&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…¶ä»–ç»“æ„ä½“ä¹Ÿå¯ä»¥å®ç°è¿™ä¸ª&lt;code&gt;interface&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Admin&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ã€€ &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;ã€€&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Admin&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;notify&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ã€€ &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Sending admin name %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ç§å®ç°æ˜¯&lt;code&gt;DuckType&lt;/code&gt;ï¼šç±»å‹ä¸éœ€è¦æ˜¾å¼å£°æ˜å®ƒå®ç°äº†æŸä¸ªæ¥å£ï¼šæ¥å£è¢«éšå¼åœ°å®ç°ã€‚å¤šä¸ªç±»å‹å¯ä»¥å®ç°åŒä¸€ä¸ªæ¥ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è°ƒç”¨&lt;code&gt;notify&lt;/code&gt;çš„åœ°æ–¹å®ç°å¦‚ä¸‹æ–¹æ³•ï¼Œå³å¯å®ç°å¤šæ€æ€§ï¼Œå³é¢å‘æ¥å£ç¼–ç¨‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sendNotify&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Notifier&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;notify&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‡½æ•°&lt;code&gt;sendNotify&lt;/code&gt;æ¥å—ä¸€ä¸ªå®ç°äº†&lt;code&gt;Notifier&lt;/code&gt;æ¥å£çš„å€¼ä½œä¸ºå‚æ•°ã€‚ æ—¢ç„¶ä»»æ„ä¸€ä¸ªå®ä½“ç±»å‹éƒ½èƒ½å®ç°è¯¥æ¥å£ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å¯ä»¥é’ˆå¯¹ä»»æ„å®ä½“ç±»å‹çš„å€¼æ¥æ‰§è¡Œnotifyæ–¹æ³•ï¼Œè°ƒç”¨&lt;code&gt;notify&lt;/code&gt;æ—¶ï¼Œ ä¼šæ ¹æ®å¯¹è±¡çš„å®é™…å®šä¹‰æ¥å®ç°ä¸åŒçš„è¡Œä¸ºï¼Œä»è€Œå®ç°å¤šæ€è¡Œä¸ºã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œ&lt;code&gt;Notifier&lt;/code&gt;æ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”&lt;code&gt;*Admin&lt;/code&gt; å’Œ &lt;code&gt;*User&lt;/code&gt;ç±»å‹éƒ½å®ç°äº†&lt;code&gt;notify&lt;/code&gt;æ–¹æ³•ï¼Œè¿™å°±è¯´æ˜&lt;code&gt;*Admin&lt;/code&gt;å’Œ&lt;code&gt;*User&lt;/code&gt;ç±»å‹å®ç°äº†&lt;code&gt;Notifier&lt;/code&gt;æ¥å£ã€‚å¦‚æœ&lt;code&gt;Notifier&lt;/code&gt;æœ‰å¤šä¸ªæ–¹æ³•æ—¶ï¼Œæƒ…å†µå¯èƒ½å°±ä¼šä¸ä¸€æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Person&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {   
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;growUp&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Student&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;age&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Student&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;() {              &lt;span style=&#34;color:#75715e&#34;&gt;// Studentç±»å‹å®ç°äº†jobæ–¹æ³•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;I am a student.&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Student&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;growUp&lt;/span&gt;() {          &lt;span style=&#34;color:#75715e&#34;&gt;// *Studentç±»å‹å®ç°äº†growUpæ–¹æ³•ï¼ˆæ³¨æ„è¿™é‡Œçš„åŒºåˆ«ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;age&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Programmer&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {              
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;age&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Programmer&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;() {           &lt;span style=&#34;color:#75715e&#34;&gt;// Programmerç±»å‹å®ç°äº†jobæ–¹æ³•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;I am a programmer.&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Programmer&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;growUp&lt;/span&gt;() {        &lt;span style=&#34;color:#75715e&#34;&gt;// Programmerç±»å‹å®ç°äº†growUpæ–¹æ³•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;age&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;*Student&lt;/code&gt;å’Œ&lt;code&gt;Programmer&lt;/code&gt;ç±»å‹å®ç°äº†&lt;code&gt;Person&lt;/code&gt;æ¥å£ï¼Œä½†æ˜¯&lt;code&gt;Student&lt;/code&gt;ç±»å‹å´æ²¡ç”¨ï¼Œå› ä¸º&lt;code&gt;Student&lt;/code&gt;ç±»å‹æ²¡æœ‰å®ç°&lt;code&gt;Person&lt;/code&gt;æ¥å£ï¼Œæ‰§è¡Œä»¥ä¸‹ç¨‹åºæ—¶å°±ä¼šæŠ¥é”™ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Person&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;Student&lt;/span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;} &lt;span style=&#34;color:#75715e&#34;&gt;// æŠ¥é”™
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;growUp&lt;/span&gt;()   
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ”¹æˆå¦‚ä¸‹ä¼šæˆåŠŸ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Person&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Student&lt;/span&gt;{&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;growUp&lt;/span&gt;()  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;*Student&lt;/code&gt;ç±»å‹ä¸ºä»€ä¹ˆä¼šå®ç°äº†&lt;code&gt;Person&lt;/code&gt;æ¥å£å‘¢ï¼Ÿæ˜¯å› ä¸º&lt;code&gt;Student&lt;/code&gt;ç±»å‹å®ç°äº†&lt;code&gt;job&lt;/code&gt;æ–¹æ³•ï¼Œæ‰€ä»¥è®© &lt;code&gt;*Student&lt;/code&gt;ç±»å‹è‡ªåŠ¨æ‹¥æœ‰äº†&lt;code&gt;job&lt;/code&gt;æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯ï¼šå®ç°äº†æ¥æ”¶è€…æ˜¯å€¼ç±»å‹çš„æ–¹æ³•ï¼Œç›¸å½“äºè‡ªåŠ¨å®ç°äº†æ¥æ”¶è€…æ˜¯æŒ‡é’ˆç±»å‹çš„æ–¹æ³•ï¼›è€Œå®ç°äº†æ¥æ”¶è€…æ˜¯æŒ‡é’ˆç±»å‹çš„æ–¹æ³•ï¼Œä¸ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”æ¥æ”¶è€…æ˜¯å€¼ç±»å‹çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç©ºinterface&#34;&gt;ç©ºinterface&lt;/h2&gt;
&lt;p&gt;åœ¨&lt;code&gt;Go&lt;/code&gt;ä¸­ï¼Œæœ‰ç§ç©ºçš„&lt;code&gt;interface&lt;/code&gt;ç±»å‹ï¼Œå³æ²¡æœ‰ä»»ä½•æ–¹æ³•çš„&lt;code&gt;interface&lt;/code&gt;ï¼š&lt;code&gt;interface{}&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Any&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯¹ç©ºæ¥å£ç±»å‹æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»æ„ä¸€ç§ç±»å‹çš„å€¼èµ‹å€¼ç»™ç©ºæ¥å£ç±»å‹ï¼ˆå°±å¥½æ¯”&lt;code&gt;java&lt;/code&gt;çš„æœ€é«˜çº§çˆ¶ç±»ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt; = &lt;span style=&#34;color:#ae81ff&#34;&gt;14.5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt; = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç±»å‹æ–­è¨€&#34;&gt;ç±»å‹æ–­è¨€&lt;/h2&gt;
&lt;p&gt;åœ¨ä¸Šé¢çš„å¤šæ€å‡½æ•°çš„å®ç°ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•å»åˆ¤æ–­ä¼ è¿›æ¥çš„&lt;code&gt;n&lt;/code&gt;æ˜¯&lt;code&gt;User&lt;/code&gt;è¿˜æ˜¯&lt;code&gt;Admin&lt;/code&gt;å‘¢ï¼Ÿä½¿ç”¨ç±»å‹æ–­è¨€å¯ä»¥è§£å†³ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sendNotify&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Notifier&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;notify&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.(&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;//is User role
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Admin&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;//is Admin role
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;don&amp;#39;t know the type&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;interfaceçš„å®ç°&#34;&gt;Interfaceçš„å®ç°&lt;/h2&gt;
&lt;p&gt;ä»»ä½•&lt;code&gt;interface&lt;/code&gt;ç±»å‹ï¼Œåœ¨å†…å­˜ä¸­éƒ½æ˜¯2ä¸ªå­—é•¿ï¼Œ32ä½æœºå™¨ä¸Šæ˜¯8&lt;code&gt;Byte&lt;/code&gt;ï¼Œ64ä½æœºå™¨ä¸Šæ˜¯16&lt;code&gt;Byte&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç©º&lt;code&gt;interface&lt;/code&gt;çš„æºç (src\runtime\runtime2.go line 197å·¦å³)ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;eface&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;_type&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;_type&lt;/span&gt;          &lt;span style=&#34;color:#75715e&#34;&gt;// ç±»å‹æŒ‡é’ˆ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// æ•°æ®åŒºåŸŸæŒ‡é’ˆ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é‡Œé¢å°±ä¸¤ä¸ªæŒ‡é’ˆï¼Œ&lt;code&gt;_type&lt;/code&gt;ç±»å‹è¡¨ç¤ºäº†ç±»å‹çš„åŸºæœ¬ä¿¡æ¯ï¼Œç±»å‹å¤§å°ï¼Œå¯¹é½ä¿¡æ¯ï¼Œç±»å‹ç¼–å·ç­‰ï¼Œæºç å¦‚ä¸‹(src\runtime\type.go line 28å·¦å³)ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_type&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;       &lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;   &lt;span style=&#34;color:#75715e&#34;&gt;// ç±»å‹å¤§å°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ptrdata&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;   &lt;span style=&#34;color:#75715e&#34;&gt;// size of memory prefix holding all pointers
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;hash&lt;/span&gt;       &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// å“ˆå¸Œå€¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;tflag&lt;/span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;tflag&lt;/span&gt;     &lt;span style=&#34;color:#75715e&#34;&gt;// ç±»å‹çš„flagï¼Œä¸åå°„ç›¸å…³
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;align&lt;/span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt;     &lt;span style=&#34;color:#75715e&#34;&gt;// å†…å­˜å¯¹é½ç›¸å…³
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fieldalign&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt;     &lt;span style=&#34;color:#75715e&#34;&gt;// å†…å­˜å¯¹é½ç›¸å…³
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;kind&lt;/span&gt;       &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt;     &lt;span style=&#34;color:#75715e&#34;&gt;// ç±»å‹çš„ç¼–å·
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;alg&lt;/span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;typeAlg&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// ç±»å‹çš„ç¼–å·ç›¸å…³
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// gcdata stores the GC type data for the garbage collector.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// If the KindGCProg bit is set in kind, gcdata is a GC program.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// Otherwise it is a ptrmask bitmap. See mbitmap.go for details.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;gcdata&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;byte&lt;/span&gt;      &lt;span style=&#34;color:#75715e&#34;&gt;// ä»¥ä¸‹å°±æ˜¯gcç›¸å…³
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;str&lt;/span&gt;       &lt;span style=&#34;color:#a6e22e&#34;&gt;nameOff&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ptrToThis&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;typeOff&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;Go&lt;/code&gt;è¯­è¨€å„ç§æ•°æ®ç±»å‹éƒ½æ˜¯åœ¨ &lt;code&gt;_type&lt;/code&gt; å­—æ®µçš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€äº›é¢å¤–çš„å­—æ®µæ¥è¿›è¡Œç®¡ç†çš„ã€‚&lt;/p&gt;
&lt;p&gt;éç©º&lt;code&gt;interface&lt;/code&gt;çš„å®ç°(src\runtime\runtime2.go line 192å·¦å³):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;iface&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;tab&lt;/span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;itab&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unsafe&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Pointer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;itab&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;inter&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;interfacetype&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;_type&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;_type&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;hash&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;     &lt;span style=&#34;color:#75715e&#34;&gt;// copy of _type.hash. Used for type switches.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;     [&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;byte&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fun&lt;/span&gt;   [&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// variable sized. fun[0]==0 means _type does not implement inter.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç¬¬ä¸€ä¸ª&lt;code&gt;itab&lt;/code&gt;ä¸­å­˜æ”¾äº†ç±»å‹ä¿¡æ¯ï¼Œè¿˜æœ‰ä¸€ä¸ª&lt;code&gt;fun&lt;/code&gt;è¡¨ç¤ºæ–¹æ³•è¡¨ã€‚&lt;code&gt;fun&lt;/code&gt; æ•°ç»„çš„å¤§å°ä¸º 1ï¼Œè¿™é‡Œå­˜å‚¨çš„æ˜¯ç¬¬ä¸€ä¸ªæ–¹æ³•çš„å‡½æ•°æŒ‡é’ˆï¼Œ å¦‚æœæœ‰æ›´å¤šçš„æ–¹æ³•ï¼Œåœ¨å®ƒä¹‹åçš„å†…å­˜ç©ºé—´é‡Œç»§ç»­å­˜å‚¨ã€‚ ä»æ±‡ç¼–è§’åº¦æ¥çœ‹ï¼Œé€šè¿‡å¢åŠ åœ°å€å°±èƒ½è·å–åˆ°è¿™äº›å‡½æ•°æŒ‡é’ˆï¼Œæ²¡ä»€ä¹ˆå½±å“ã€‚é¡ºä¾¿æä¸€å¥ï¼Œè¿™äº›æ–¹æ³•æ˜¯æŒ‰ç…§å‡½æ•°åç§°çš„å­—å…¸åºè¿›è¡Œæ’åˆ—çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;interfacetype&lt;/code&gt;ç±»å‹ï¼Œsrc\runtime\type.go line 390å·¦å³ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;interfacetype&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;typ&lt;/span&gt;     &lt;span style=&#34;color:#a6e22e&#34;&gt;_type&lt;/span&gt;       &lt;span style=&#34;color:#75715e&#34;&gt;// åŒ…è£…äº† _type ç±»å‹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;pkgpath&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// æ¥å£æ‰€å®šä¹‰çš„å‡½æ•°åˆ—è¡¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;mhdr&lt;/span&gt;    []&lt;span style=&#34;color:#a6e22e&#34;&gt;imethod&lt;/span&gt;   &lt;span style=&#34;color:#75715e&#34;&gt;// è®°å½•å®šä¹‰äº†æ¥å£çš„åŒ…å
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;interfaceçš„æ„é€ è¿‡ç¨‹&#34;&gt;Interfaceçš„æ„é€ è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;å…ˆæ¥çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼ˆæ–¹ä¾¿è§‚å¯ŸåŠ ä¸Šäº†è¡Œå·ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;     &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;strconv&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;     &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt; )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Stringer&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;     &lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Binary&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Binary&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;     &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;strconv&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;FormatUint&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;(), &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;17&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;18&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Binary&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;uint64&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;19&lt;/span&gt;     &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; uint64(&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;23&lt;/span&gt;     &lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Binary&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;     &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Stringer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;     &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;())  &lt;span style=&#34;color:#75715e&#34;&gt;// è¾“å‡º11001000
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰§è¡Œå‘½ä»¤ï¼š &lt;code&gt;go tool compile -S gotest.go &amp;gt; main.txt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ä¸€æ®µ&lt;code&gt;main&lt;/code&gt;å‡½æ•°çš„æ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;STEXT&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;=&lt;span style=&#34;color:#ae81ff&#34;&gt;210&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;args&lt;/span&gt;=&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;locals&lt;/span&gt;=&lt;span style=&#34;color:#ae81ff&#34;&gt;0x58&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0000&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00000&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;TEXT&lt;/span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;ABIInternal&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;88&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0000&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00000&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;TLS&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0009&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0000&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	(&lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;)(&lt;span style=&#34;color:#a6e22e&#34;&gt;TLS&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0010&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00016&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;CMPQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0014&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00020&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;JLS&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x001a&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00026&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;SUBQ&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;88&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x001e&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00030&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;BP&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;80&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0023&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00035&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;LEAQ&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;80&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;BP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0028&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00040&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;FUNCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;gclocals&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;Â·&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;69&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c1753bd5f81501d95132d08af04464&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0028&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00040&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;FUNCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;gclocals&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;Â·&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;568470801006e5&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c0dc3947ea998fe279&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0028&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00040&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;FUNCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;gclocals&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;Â·&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;bfec7e55b3f043d1941c093912808913&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0028&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00040&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;FUNCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;stkobj&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0028&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00040&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0028&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00040&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0028&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00040&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;, (&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0030&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0004&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;convT64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)                      &lt;span style=&#34;color:#75715e&#34;&gt;// é¦–å…ˆå°†200è½¬æ¢ä¸ºint64ç±»å‹ï¼Œè¿™é‡Œä¼šæ„é€ å‡ºä¸€ä¸ªinteface
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0035&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00053&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0035&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00053&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;LEAQ&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;itab&lt;/span&gt;.&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Binary&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Stringer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x003c&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00060&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x003c&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00060&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;TESTB&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;AL&lt;/span&gt;, (&lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x003e&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00062&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x003e&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00062&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0043&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00067&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;itab&lt;/span&gt;.&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Binary&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Stringer&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// å°†Stringer.Stringå‡½æ•°åœ°å€æ”¾è¿› CX
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x004a&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00074&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x004a&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00074&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, (&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x004e&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0007&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;                                       &lt;span style=&#34;color:#75715e&#34;&gt;// è°ƒç”¨Stringer.String
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0050&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;000&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;80&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0050&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;000&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;80&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0055&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;000&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;85&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x005a&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;000&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;90&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x005a&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;000&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;90&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, (&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x005e&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;000&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;94&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0063&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;000&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;99&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;CALL&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;runtime&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;convTstring&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;)                  &lt;span style=&#34;color:#75715e&#34;&gt;// å‡½æ•°strconv.FormatUintå†…éƒ¨çš„è½¬æ¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0068&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00104&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0068&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00104&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x006d&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0010&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x006d&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0010&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;XORPS&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;X0&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;X0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0070&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00112&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVUPS&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;X0&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;..&lt;span style=&#34;color:#a6e22e&#34;&gt;autotmp_16&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0075&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00117&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0075&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00117&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;LEAQ&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt;.string(&lt;span style=&#34;color:#a6e22e&#34;&gt;SB&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x007c&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00124&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x007c&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00124&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;CX&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;..&lt;span style=&#34;color:#a6e22e&#34;&gt;autotmp_16&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;64&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0081&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0012&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;PCDATA&lt;/span&gt;	&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0081&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0012&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;gotest&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;)	&lt;span style=&#34;color:#a6e22e&#34;&gt;MOVQ&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;AX&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;..&lt;span style=&#34;color:#a6e22e&#34;&gt;autotmp_16&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;72&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SP&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æŸ¥çœ‹&lt;code&gt;go.itab.â€â€.Binary,â€â€.Stringer(SB)&lt;/code&gt;è¿™ä¸ªåœ°æ–¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;itab&lt;/span&gt;.&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Binary&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Stringer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SRODATA&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dupok&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;size&lt;/span&gt;=&lt;span style=&#34;color:#ae81ff&#34;&gt;32&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0000&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;...............&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;0x0010&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;72&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;44&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;00&lt;/span&gt;  ;=&lt;span style=&#34;color:#a6e22e&#34;&gt;rD&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;............&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;rel&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;=&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt;.&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Stringer&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;rel&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;=&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt;.&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Binary&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;rel&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;=&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Binary&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;size&lt;/code&gt;å¤§å°ä¸º32&lt;code&gt;Byte&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;itab&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;inter&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;interfacetype&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// 8 Byte (64ä½æœºå­ï¼ŒæŒ‡é’ˆ)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;_type&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;_type&lt;/span&gt;          &lt;span style=&#34;color:#75715e&#34;&gt;// 8 Byte (64ä½æœºå­ï¼ŒæŒ‡é’ˆ)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;hash&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;          &lt;span style=&#34;color:#75715e&#34;&gt;// 4 Byte
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;     [&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;byte&lt;/span&gt;         &lt;span style=&#34;color:#75715e&#34;&gt;// 4 Byte
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fun&lt;/span&gt;   [&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;uintptr&lt;/span&gt;      &lt;span style=&#34;color:#75715e&#34;&gt;// 8 Byte
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¯ä¸ªå­—æ®µç›¸åŠ ï¼Œå°±æ˜¯&lt;code&gt;itab&lt;/code&gt;ç»“æ„ä½“çš„å¤§å°32å­—èŠ‚ï¼Œé‚£ä¸²æ•°å­—æ˜¯&lt;code&gt;itab&lt;/code&gt;åºåˆ—åŒ–åçš„å†…å®¹ï¼Œå¯ä»¥å¯¹åº”æ‰¾å‡º&lt;code&gt;hash&lt;/code&gt;å€¼ï¼Œåœ¨åˆ¤æ–­ä¸¤ä¸ªç±»å‹æ˜¯å¦ç›¸åŒçš„æ—¶å€™ä¼šç”¨è¿™ä¸ªå€¼æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äº&lt;code&gt;Binary&lt;/code&gt;ï¼Œä½œä¸ºä¸€ä¸ª64ä½æ•´æ•°ï¼Œå¯ä»¥è¿™ä¹ˆè¡¨ç¤º:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Binary&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#f92672&#34;&gt;+==========+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;   &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;              &lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#f92672&#34;&gt;+==========+&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;int64&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯¹äº&lt;code&gt;s := Stringer(b)&lt;/code&gt;ï¼Œå¯ä»¥å¦‚ä¸‹è¡¨ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s :&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Stringer&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;b&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+&lt;span style=&#34;color:#f92672&#34;&gt;========&lt;/span&gt;+           itab
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;| tab    | ----&amp;gt;  +&lt;span style=&#34;color:#f92672&#34;&gt;=======&lt;/span&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+&lt;span style=&#34;color:#f92672&#34;&gt;========&lt;/span&gt;+        | inter | 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;| data   |---&amp;gt;200 +&lt;span style=&#34;color:#f92672&#34;&gt;=======&lt;/span&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+&lt;span style=&#34;color:#f92672&#34;&gt;========&lt;/span&gt;+        |  type | ---&amp;gt; Stringer.Binary
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                 +&lt;span style=&#34;color:#f92672&#34;&gt;=======&lt;/span&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                 | hash  |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                 +&lt;span style=&#34;color:#f92672&#34;&gt;=======&lt;/span&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                 |  fun  | ---&amp;gt; *Binary.String
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                 +&lt;span style=&#34;color:#f92672&#34;&gt;=======&lt;/span&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é‚£ä¹ˆå¯¹äº&lt;code&gt;s&lt;/code&gt;æ¥è¯´ &lt;code&gt;itab&lt;/code&gt;ä¸­çš„&lt;code&gt;inter&lt;/code&gt;è¡¨ç¤ºçš„æ˜¯&lt;code&gt;Stringer&lt;/code&gt;è¿™ä¸ªæ¥å£ï¼Œ&lt;code&gt;type&lt;/code&gt;è¡¨ç¤ºçš„æ˜¯&lt;code&gt;Binary&lt;/code&gt;è¿™ä¸ªåŠ¨æ€ç±»å‹ï¼Œ&lt;code&gt;fun&lt;/code&gt;å‡½æ•°è¡¨ä¸­å­˜æ”¾çš„å°±æ˜¯&lt;code&gt;Binary&lt;/code&gt;ä¸­å®ç°äº†&lt;code&gt;String&lt;/code&gt;è€Œæ¥å£çš„æ–¹æ³•åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæ¥å£çš„&lt;code&gt;type-switch&lt;/code&gt;ï¼Œè¿”å›çš„å°±æ˜¯é™æ€ç±»å‹ å¯¹äºåå°„é‡Œé¢çš„&lt;code&gt;TypeOf&lt;/code&gt;ï¼Œè¿”å›çš„æ˜¯åŠ¨æ€ç±»å‹ï¼Œä¹Ÿå°±æ˜¯æ•°æ®çœŸå®çš„ç±»å‹&lt;/p&gt;
&lt;p&gt;å¯¹äºè°ƒç”¨&lt;code&gt;s.String()&lt;/code&gt;æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯ &lt;code&gt;s.itab-&amp;gt;fun[0]&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå°±å¼•å‡ºä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼šï¼Œ&lt;code&gt;var a interface{}&lt;/code&gt; è¿™ä¸ªåœ°æ–¹ç”¨&lt;code&gt;if a == nil&lt;/code&gt;æ˜¯å¯ä»¥åˆ¤æ–­çš„ï¼Œ ä½†æ˜¯å¦‚æœä½¿ç”¨å…¶ä»–ç±»å‹çš„&lt;code&gt;nil&lt;/code&gt;æŒ‡é’ˆèµ‹ç»™&lt;code&gt;interface&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Binary&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{} = &lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ—¶å€™&lt;code&gt;if a == nil&lt;/code&gt;å°±ä¸ä¼šæˆç«‹çš„ï¼Œå³ä½¿&lt;code&gt;b&lt;/code&gt;ä¸º&lt;code&gt;nil&lt;/code&gt;ï¼Œè¿™æ˜¯å› ä¸ºè¿™ä¸ªæ—¶å€™&lt;code&gt;a&lt;/code&gt;çš„ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   a
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+========&lt;/span&gt;+               itab
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;| tab    | -------&amp;gt;   +&lt;span style=&#34;color:#f92672&#34;&gt;========&lt;/span&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+&lt;span style=&#34;color:#f92672&#34;&gt;========&lt;/span&gt;+            |inter   | 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;| data   | ---&amp;gt; nil   &lt;span style=&#34;color:#f92672&#34;&gt;+========&lt;/span&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+&lt;span style=&#34;color:#f92672&#34;&gt;========&lt;/span&gt;+            | type   |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                      +&lt;span style=&#34;color:#f92672&#34;&gt;========&lt;/span&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                      |   ...  |
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰€ä»¥è¿™ä¸ªæ—¶å€™ä½ æŠŠä¸€ä¸ªå…¶ä»–ç±»å‹çš„&lt;code&gt;nil&lt;/code&gt;æŒ‡é’ˆèµ‹å€¼ç»™&lt;code&gt;interface{}&lt;/code&gt;çš„æ—¶å€™ï¼Œ&lt;code&gt;interface&lt;/code&gt;å¹¶ä¸æ˜¯ç©ºï¼Œè€Œæ˜¯å¯¹&lt;code&gt;interface&lt;/code&gt;è¿›è¡Œäº†åˆå§‹åŒ–ï¼Œåªä¸è¿‡&lt;code&gt;data&lt;/code&gt;æ˜¯&lt;code&gt;nil&lt;/code&gt;è€Œå·²ã€‚æ‰€æœ‰å¦‚æœä¸€ä¸ªå‚æ•°çš„è¿”å›å€¼æ˜¯&lt;code&gt;interface{}&lt;/code&gt;æˆ–è€…å…¶ä»–æœ‰æ–¹æ³•çš„&lt;code&gt;interface&lt;/code&gt;ï¼Œæ¯”å¦‚&lt;code&gt;error&lt;/code&gt;ç­‰ï¼Œæ‰€ä»¥ä¸€æ—¦å‡½æ•°è¿”å›çš„æ˜¯æŸç§&lt;code&gt;interface&lt;/code&gt;çš„æ—¶å€™ï¼Œå°±éœ€è¦æ³¨æ„ï¼Œä¸è¦ç›´æ¥è¿”å›æŸç§ç±»å‹çš„ç©ºæŒ‡é’ˆï¼Œéœ€è¦è½¬æ¢æˆç›´æ¥çš„&lt;code&gt;nil&lt;/code&gt;è¿›è¡Œèµ‹å€¼ã€‚å¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;doSomething&lt;/span&gt;() (&lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Binary&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;//do something
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// è¿™è¾¹åº”è¯¥åˆ¤æ–­aæ˜¯nilç„¶åç›´æ¥è¿”å›nil
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æœ¬ç‰‡ç¬”è®°ä¸»è¦è®°å½•ä¸€äº›&lt;code&gt;interface&lt;/code&gt;çš„åŸç†ï¼Œè‹¥æœ‰ä»€ä¹ˆä¸å¯¹çš„åœ°æ–¹æ¬¢è¿æŒ‡æ­£ã€‚ &lt;code&gt;iface&lt;/code&gt;ä¸&lt;code&gt;eface&lt;/code&gt;çš„åŒºåˆ«ä»¥åŠ&lt;code&gt;convT2I&lt;/code&gt;ã€&lt;code&gt;convT2E&lt;/code&gt;å‡½æ•°çš„æºç ä¹Ÿæ²¡æ·±å…¥å»äº†è§£ï¼Œå¸Œæœ›ä»¥åæœ‰æ—¶é—´å¯ä»¥çœ‹ä¸€çœ‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;å‚è€ƒï¼š&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.cnblogs.com/qcrao-2018/p/10766091.html&#34;&gt;æ·±åº¦è§£å¯†Goè¯­è¨€ä¹‹å…³äº interface çš„10ä¸ªé—®é¢˜&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://shanks.leanote.com/post/interface%E8%AF%A6%E8%A7%A3&#34;&gt;æ·±åº¦å‰–æinterface &lt;/a&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>éƒ¨è½æ ¼ä¿®æ”¹è®°å½•</title>
      <link>http://hindung.cn/posts/0/</link>
      <pubDate>Mon, 20 Jul 2020 00:00:00 +0000</pubDate>
      
      <guid>http://hindung.cn/posts/0/</guid>
      <description>TODO List  éƒ¨è½æ ¼-ä¾§è¾¹æ  ä¸‹æ‹‰å›ºå®š å·²å®ŒæˆğŸ‘Œ 2020.08.22 ğŸ“… ğŸ‰ å¤§æµ· å¢åŠ æœç´¢åŠŸèƒ½ ä¿®æ”¹åç«¯è¯»å–Markdownæ ¼å¼ å·²å®ŒæˆğŸ‘Œ 2020.08.16 ğŸ“… ğŸ‰ ä¿®å¤å‰ç«¯ç‚¹å‡»å›é€€æ—¶Panicçš„bug å·²å®ŒæˆğŸ‘Œ 2020.08.15ğŸ“… ğŸ˜ğŸ‰ æ·»åŠ æ–‡ç« TOCåŠŸèƒ½ å·²å®Œæˆ 2020.09.20ğŸ“… ä½¿ç”¨GithubFlowså®ç°CICD å·²å®Œæˆ 2020.10.02ğŸ“… ğŸ‰ ä½¿ç”¨å¯¹è±¡å­˜å‚¨ï¼Œå®ç°åª’ä½“å†…å®¹åˆ†ç¦»ï¼Œæå‡ç½‘ç«™åŠ è½½é€Ÿåº¦ ğŸš®ğŸš®åºŸå¼ƒï¼Œç”±äºæ–‡ç« ç›®å‰å¾ˆå°‘é‡‡ç”¨å›¾ç‰‡çš„å½¢å¼ï¼Œåç»­å‡å¦‚æœ‰éœ€æ±‚å¦‚â€œæ·»åŠ ç…§ç‰‡å¢™â€æˆ–æ·»åŠ ä¸ªæ€§é¡µé¢ï¼Œç±»Tumblrç­‰å†é‡å¯è¯¥éœ€æ±‚ã€‚ æ·±å…¥äº†è§£Goå†…å­˜æ¨¡å—ï¼Œè¾“å‡ºåšå®¢ æ·±å…¥äº†è§£Goroutineï¼Œè¾“å‡ºåšå®¢ äº†è§£å¸¸ç”¨çš„Goå†…ç½®åŒ…ï¼Œæ€»ç»“è¾“å‡ºåšå®¢ æ·±å…¥äº†è§£Goçš„contextï¼Œå¹¶åŒºåˆ†channelçš„ä½¿ç”¨åœºæ™¯ï¼Œè¾“å‡ºåšå®¢ æ·±å…¥äº†è§£é”ï¼Œå¹¶å‘ç­‰ï¼Œè¾“å‡ºåšå®¢ æ·±å…¥äº†è§£golang runtimeæœºåˆ¶ æ·±å…¥äº†è§£éƒ¨åˆ†K8sç»„ä»¶æºç ï¼Œäº†è§£informeræœºåˆ¶ï¼Œwatch syncè®¾è®¡å“²å­¦ï¼Œè¾“å‡ºåšå®¢ å¤‡è€ƒCKAï¼Œæ€»ç»“è¾“å‡ºåšå®¢ è®¡åˆ’5æœˆ22å·å‰è€ƒè¯•å®Œæˆ å·²è·å¾—CKAè¯ä¹¦ğŸ‰ğŸ‰ 2021.04.09ğŸ“… å¤‡è€ƒè½¯è€ƒé«˜çº§ï¼Œæ€»ç»“è¾“å‡ºåšå®¢ æš‚æ—¶æ”¾å¼ƒğŸš® å¤ä¹ ç½‘ç»œçŸ¥è¯†ï¼Œè¾“å‡ºåšå®¢ ä¿æŒåˆ·é¢˜ï¼Œæœ‰å¿…è¦è¾“å‡ºé¢˜è§£ä»¥åŠå½¢æˆç±»ä¼¼äºç­”é¢˜æ¨¡æ¿çš„ä»£ç ç‰‡æ®µï¼Œè®°å½•åšå®¢ ğŸ’ªğŸ’ªæŒç»­è¿›è¡Œã€‚ã€‚ã€‚ æ–‡ç« TOCåŠŸèƒ½ä¼˜åŒ–ï¼Œç±»ä¼¼æ˜é‡‘å¹³å°ä¸€æ ·çš„æ•ˆæœ å·²å®ŒæˆğŸ‘Œ 2021.04.09ğŸ“…ğŸ‰ Kube Source Code Plan ï¼ˆdockerå’Œk8sæºä»£ç é˜…è¯»è®¡åˆ’ï¼‰ æ–‡ç« æ•°æ®æŒä¹…åŒ–ï¼Œä¾‹å¦‚æ–‡ç« é˜…è¯»é‡ã€ç‚¹èµé‡ã€æœ‰ç”¨ç»Ÿè®¡ç­‰ç­‰ï¼Œåˆæ­¥æ–¹æ¡ˆæ˜¯gorm+sqlite3å®ç° eBPFç›¸å…³çŸ¥è¯†çš„ç ”ç©¶ ã€‚ã€‚ã€‚ã€‚  Change List 2020.07.20  æ¡†æ¶å½¢æˆ å‘å¸ƒç¬¬ä¸€ç¯‡Blog  2020.07.23  ä¿®æ”¹äº†ä¸€äº›å‰ç«¯æ ·å¼ å¢åŠ åšæ–‡  2020.</description>
      <content>&lt;hr&gt;
&lt;h2 id=&#34;todo-list&#34;&gt;TODO List&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;del&gt;éƒ¨è½æ ¼-ä¾§è¾¹æ  ä¸‹æ‹‰å›ºå®š&lt;/del&gt;   å·²å®ŒæˆğŸ‘Œ  2020.08.22 ğŸ“…  ğŸ‰&lt;/li&gt;
&lt;li&gt;å¤§æµ· å¢åŠ æœç´¢åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;&lt;del&gt;ä¿®æ”¹åç«¯è¯»å–&lt;code&gt;Markdown&lt;/code&gt;æ ¼å¼&lt;/del&gt; å·²å®ŒæˆğŸ‘Œ  2020.08.16 ğŸ“…  ğŸ‰&lt;/li&gt;
&lt;li&gt;&lt;del&gt;ä¿®å¤å‰ç«¯ç‚¹å‡»å›é€€æ—¶&lt;code&gt;Panic&lt;/code&gt;çš„bug&lt;/del&gt; å·²å®ŒæˆğŸ‘Œ 2020.08.15ğŸ“… ğŸ˜ğŸ‰&lt;/li&gt;
&lt;li&gt;&lt;del&gt;æ·»åŠ æ–‡ç« &lt;code&gt;TOC&lt;/code&gt;åŠŸèƒ½&lt;/del&gt;   å·²å®Œæˆ 2020.09.20ğŸ“…&lt;/li&gt;
&lt;li&gt;&lt;del&gt;ä½¿ç”¨&lt;code&gt;GithubFlows&lt;/code&gt;å®ç°CICD&lt;/del&gt;  å·²å®Œæˆ 2020.10.02ğŸ“… ğŸ‰&lt;/li&gt;
&lt;li&gt;&lt;del&gt;ä½¿ç”¨å¯¹è±¡å­˜å‚¨ï¼Œå®ç°åª’ä½“å†…å®¹åˆ†ç¦»ï¼Œæå‡ç½‘ç«™åŠ è½½é€Ÿåº¦&lt;/del&gt;  ğŸš®ğŸš®åºŸå¼ƒï¼Œç”±äºæ–‡ç« ç›®å‰å¾ˆå°‘é‡‡ç”¨å›¾ç‰‡çš„å½¢å¼ï¼Œåç»­å‡å¦‚æœ‰éœ€æ±‚å¦‚â€œæ·»åŠ ç…§ç‰‡å¢™â€æˆ–æ·»åŠ ä¸ªæ€§é¡µé¢ï¼Œç±»&lt;code&gt;Tumblr&lt;/code&gt;ç­‰å†é‡å¯è¯¥éœ€æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;æ·±å…¥äº†è§£&lt;code&gt;Go&lt;/code&gt;å†…å­˜æ¨¡å—ï¼Œè¾“å‡ºåšå®¢&lt;/li&gt;
&lt;li&gt;æ·±å…¥äº†è§£&lt;code&gt;Goroutine&lt;/code&gt;ï¼Œè¾“å‡ºåšå®¢&lt;/li&gt;
&lt;li&gt;äº†è§£å¸¸ç”¨çš„&lt;code&gt;Go&lt;/code&gt;å†…ç½®åŒ…ï¼Œæ€»ç»“è¾“å‡ºåšå®¢&lt;/li&gt;
&lt;li&gt;æ·±å…¥äº†è§£&lt;code&gt;Go&lt;/code&gt;çš„&lt;code&gt;context&lt;/code&gt;ï¼Œå¹¶åŒºåˆ†&lt;code&gt;channel&lt;/code&gt;çš„ä½¿ç”¨åœºæ™¯ï¼Œè¾“å‡ºåšå®¢&lt;/li&gt;
&lt;li&gt;æ·±å…¥äº†è§£é”ï¼Œå¹¶å‘ç­‰ï¼Œè¾“å‡ºåšå®¢&lt;/li&gt;
&lt;li&gt;æ·±å…¥äº†è§£&lt;code&gt;golang runtime&lt;/code&gt;æœºåˆ¶&lt;/li&gt;
&lt;li&gt;æ·±å…¥äº†è§£éƒ¨åˆ†&lt;code&gt;K8s&lt;/code&gt;ç»„ä»¶æºç ï¼Œäº†è§£&lt;code&gt;informer&lt;/code&gt;æœºåˆ¶ï¼Œ&lt;code&gt;watch sync&lt;/code&gt;è®¾è®¡å“²å­¦ï¼Œè¾“å‡ºåšå®¢&lt;/li&gt;
&lt;li&gt;&lt;del&gt;å¤‡è€ƒ&lt;code&gt;CKA&lt;/code&gt;ï¼Œæ€»ç»“è¾“å‡ºåšå®¢ è®¡åˆ’5æœˆ22å·å‰è€ƒè¯•å®Œæˆ&lt;/del&gt; å·²è·å¾—&lt;code&gt;CKA&lt;/code&gt;è¯ä¹¦ğŸ‰ğŸ‰ 2021.04.09ğŸ“…&lt;/li&gt;
&lt;li&gt;&lt;del&gt;å¤‡è€ƒè½¯è€ƒé«˜çº§ï¼Œæ€»ç»“è¾“å‡ºåšå®¢&lt;/del&gt; æš‚æ—¶æ”¾å¼ƒğŸš®&lt;/li&gt;
&lt;li&gt;å¤ä¹ ç½‘ç»œçŸ¥è¯†ï¼Œè¾“å‡ºåšå®¢&lt;/li&gt;
&lt;li&gt;ä¿æŒåˆ·é¢˜ï¼Œæœ‰å¿…è¦è¾“å‡ºé¢˜è§£ä»¥åŠå½¢æˆç±»ä¼¼äºç­”é¢˜æ¨¡æ¿çš„ä»£ç ç‰‡æ®µï¼Œè®°å½•åšå®¢  ğŸ’ªğŸ’ªæŒç»­è¿›è¡Œã€‚ã€‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;del&gt;æ–‡ç« &lt;code&gt;TOC&lt;/code&gt;åŠŸèƒ½ä¼˜åŒ–ï¼Œç±»ä¼¼æ˜é‡‘å¹³å°ä¸€æ ·çš„æ•ˆæœ&lt;/del&gt; å·²å®ŒæˆğŸ‘Œ 2021.04.09ğŸ“…ğŸ‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Kube Source Code Plan&lt;/code&gt; ï¼ˆdockerå’Œk8sæºä»£ç é˜…è¯»è®¡åˆ’ï¼‰&lt;/li&gt;
&lt;li&gt;æ–‡ç« æ•°æ®æŒä¹…åŒ–ï¼Œä¾‹å¦‚æ–‡ç« é˜…è¯»é‡ã€ç‚¹èµé‡ã€æœ‰ç”¨ç»Ÿè®¡ç­‰ç­‰ï¼Œåˆæ­¥æ–¹æ¡ˆæ˜¯&lt;code&gt;gorm+sqlite3&lt;/code&gt;å®ç°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;eBPF&lt;/code&gt;ç›¸å…³çŸ¥è¯†çš„ç ”ç©¶&lt;/li&gt;
&lt;li&gt;ã€‚ã€‚ã€‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;change-list&#34;&gt;Change List&lt;/h2&gt;
&lt;h3 id=&#34;20200720&#34;&gt;2020.07.20&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ¡†æ¶å½¢æˆ&lt;/li&gt;
&lt;li&gt;å‘å¸ƒç¬¬ä¸€ç¯‡Blog&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;20200723&#34;&gt;2020.07.23&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¿®æ”¹äº†ä¸€äº›å‰ç«¯æ ·å¼&lt;/li&gt;
&lt;li&gt;å¢åŠ åšæ–‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;20200807&#34;&gt;2020.08.07&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ·»åŠ SSLè¯ä¹¦ï¼Œå¯ç”¨https&lt;/li&gt;
&lt;li&gt;éƒ¨ç½²æ–¹å¼æ”¹æˆdockers-compose&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;20200808&#34;&gt;2020.08.08&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¯ç”¨hindung.cnåŸŸå&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹å‰ç«¯æ ·å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;20200815&#34;&gt;2020.08.15&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¿®æ”¹å‰ç«¯é€€å›Panic&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;20200816&#34;&gt;2020.08.16&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨viperåŒ…è¯»å–markdownè‡ªå®šä¹‰é…ç½®&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;20200819&#34;&gt;2020.08.19&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¿®æ”¹ä»£ç æ˜¾ç¤ºçš„æ ¼å¼ï¼Œå˜»å˜»æ›´å¥½çœ‹äº†å‘¢ğŸ˜„&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;20200822&#34;&gt;2020.08.22&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å·¦ä¾§æ ‡ç­¾æ ä¸‹æ‹‰æ—¶å›ºå®š&lt;/li&gt;
&lt;li&gt;æ·»åŠ ä¸¤ç¯‡åšæ–‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;20200920&#34;&gt;2020.09.20&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡ç« TOCç®€å•å®ç°&lt;/li&gt;
&lt;li&gt;æ·»åŠ è‹¥å¹²ç¯‡åšæ–‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;20201002&#34;&gt;2020.10.02&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;GithubFlowså®ç°CICDåŠŸèƒ½&lt;/li&gt;
&lt;/ul&gt;
</content>
    </item>
    
  </channel>
</rss>
