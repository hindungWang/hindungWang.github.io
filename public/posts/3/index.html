<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Gin框架学习笔记"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:title" content="初探Gin框架"><meta property="og:description" content="Gin框架学习笔记"><meta property="og:type" content="article"><meta property="og:url" content="http://hindung.cn/posts/3/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-07-25T00:00:00+00:00"><meta property="article:modified_time" content="2020-07-25T00:00:00+00:00"><title>初探Gin框架 | Hindung Blogs</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=stylesheet href=/book.scss integrity crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.babd2f636c40f8c2a90eb07eec05db5d5b170c6461306029c9a468cc2daf879d.js integrity="sha256-ur0vY2xA+MKpDrB+7AXbXVsXDGRhMGApyaRozC2vh50=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Hindung Blogs</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>初探Gin框架</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#入门简介>入门简介</a></li><li><a href=#原理及用法>原理及用法</a><ul><li><a href=#路由routing>路由Routing</a></li><li><a href=#路由分组>路由分组</a></li><li><a href=#使用中间件>使用中间件</a></li><li><a href=#实现文件上传>实现文件上传</a></li><li><a href=#参数>参数</a></li><li><a href=#输出响应>输出响应</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1><a href=/posts/3/>初探Gin框架</a></h1><h5>July 25, 2020</h5><div><a href=/tags/go/>Go</a>,
<a href=/tags/gin/>Gin</a></div><h2 id=入门简介>入门简介
<a class=anchor href=#%e5%85%a5%e9%97%a8%e7%ae%80%e4%bb%8b>#</a></h2><p><code>Gin</code>是一个高性能的<code>HTTP web</code>框架，用Go编写，目前托管在<code>GitHub</code>上：<a href=https://github.com/gin-gonic/gin>Gin</a>
官方文档：<a href=https://gin-gonic.com/docs/>Gin-doc</a>
中文版：<a href=https://learnku.com/docs/gin-gonic/2019/go-gin-document/6149>Gin-doc</a>
<code>Gin</code>框架的几个特性：</p><ul><li>路由（<code>Routing</code>）：将请求映射到函数，支持动态路由。如<code>/hello/:name</code></li><li>鉴权：统一、分组鉴权能力</li><li>模板：统一简化的<code>HTML</code>机制</li><li>中间件：一个请求经过多个中间件拦截最后到达DB，如<code>logging</code></li><li>.etc</li></ul><p>其中比较关键的组件是<code>router</code>路由组件，<code>gin</code>使用的算法是<code>radix</code> 树，是<code>trie</code> 树（前缀树）的一种压缩版本，他们的区别是：假如存在三个单词：<code>hello, hat, have</code>，trie 树得到的数据结构是：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>  <span style=color:#a6e22e>e</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>l</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>l</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>o</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>/</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>h</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>t</span>
</span></span><span style=display:flex><span> \
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>v</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>e</span>
</span></span></code></pre></div><p>总共9个节点。而<code>radix</code>树得到的数据结构是：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>       <span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>ello</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>/</span>
</span></span><span style=display:flex><span><span style=color:#f92672>*</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>h</span> <span style=color:#f92672>-</span> <span style=color:#f92672>*</span> <span style=color:#f92672>-</span>(<span style=color:#a6e22e>a</span>) <span style=color:#f92672>-</span> <span style=color:#f92672>*</span> <span style=color:#f92672>-</span> (<span style=color:#a6e22e>t</span>) <span style=color:#f92672>-</span> <span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>     \
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>ve</span>)
</span></span><span style=display:flex><span>      \
</span></span><span style=display:flex><span>       <span style=color:#f92672>*</span>
</span></span></code></pre></div><p>只需要5个节点，所以，radix树使用更小的内存，但是很难实现。详情请参考：<a href=https://stackoverflow.com/questions/14708134/what-is-the-difference-between-trie-and-radix-trie-data-structures>what-is-the-difference-between-trie-and-radix-trie-data-structures</a></p><p>Gin使用的radix算法实现是：<a href=https://github.com/julienschmidt/httprouter>httprouter</a></p><h2 id=原理及用法>原理及用法
<a class=anchor href=#%e5%8e%9f%e7%90%86%e5%8f%8a%e7%94%a8%e6%b3%95>#</a></h2><h3 id=路由routing>路由Routing
<a class=anchor href=#%e8%b7%af%e7%94%b1routing>#</a></h3><p>go语言本身内置了<code>net/http</code>库，封装了<code>HTTP</code>网络接口，Gin实现的web框架也是基于<code>net/http</code>库。</p><p>这个库的简单用法：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;log&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#a6e22e>indexHandler</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#e6db74>&#34;:9999&#34;</span>, <span style=color:#66d9ef>nil</span>))
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#75715e>// 处理请求
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>indexHandler</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintf</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;URL.Path = %q\n&#34;</span>, <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>URL</span>.<span style=color:#a6e22e>Path</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>//$ curl http://localhost:9999/
</span></span></span><span style=display:flex><span><span style=color:#75715e>//URL.Path = &#34;/&#34;
</span></span></span></code></pre></div><p><code>http.ListenAndServe(“:9999”, nil)</code>这个函数表示监听本地9999端口，nil代表使用标准库中的实例去处理所有的HTTP请求，假如我们自己实现该参数类型，就可以使用我们自己设计的实例去处理所有HTTP请求了，Gin正是这么做的。</p><p>那么第二个参数是什么类型呢？可以查看<code>net/http</code>的源码：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#a6e22e>addr</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>handler</span> <span style=color:#a6e22e>Handler</span>) <span style=color:#66d9ef>error</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>server</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Server</span>{<span style=color:#a6e22e>Addr</span>: <span style=color:#a6e22e>addr</span>, <span style=color:#a6e22e>Handler</span>: <span style=color:#a6e22e>handler</span>}
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>server</span>.<span style=color:#a6e22e>ListenAndServe</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>是一个<code>Handler</code>，那么<code>Handler</code>是什么类型呢：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Handler</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ServeHTTP</span>(<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#f92672>*</span><span style=color:#a6e22e>Request</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>是一个接口，需要实现<code>ServeHTTP</code>方法就行，也就是只要传入实现了该接口的实例，所有的HTTP请求都能被这个实例处理：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#75715e>// 路由处理函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>HandlerFunc</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#75715e>// Engine 实现 ServeHTTP 接口，使用map进行静态的路由匹配
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Engine</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>router</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#a6e22e>HandlerFunc</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#75715e>// New 创建Engine
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>New</span>() <span style=color:#f92672>*</span><span style=color:#a6e22e>Engine</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Engine</span>{<span style=color:#a6e22e>router</span>: make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#a6e22e>HandlerFunc</span>)}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#75715e>// 添加路由
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>engine</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Engine</span>) <span style=color:#a6e22e>addRoute</span>(<span style=color:#a6e22e>method</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>pattern</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>handler</span> <span style=color:#a6e22e>HandlerFunc</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>key</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>method</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;-&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>pattern</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>engine</span>.<span style=color:#a6e22e>router</span>[<span style=color:#a6e22e>key</span>] = <span style=color:#a6e22e>handler</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#75715e>// GET 定义GET路由添加
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>engine</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Engine</span>) <span style=color:#a6e22e>GET</span>(<span style=color:#a6e22e>pattern</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>handler</span> <span style=color:#a6e22e>HandlerFunc</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>engine</span>.<span style=color:#a6e22e>addRoute</span>(<span style=color:#e6db74>&#34;GET&#34;</span>, <span style=color:#a6e22e>pattern</span>, <span style=color:#a6e22e>handler</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#75715e>// Run 启动 http server
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>engine</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Engine</span>) <span style=color:#a6e22e>Run</span>(<span style=color:#a6e22e>addr</span> <span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#a6e22e>addr</span>, <span style=color:#a6e22e>engine</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>// 实现 ServrHTTP 方法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>engine</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Engine</span>) <span style=color:#a6e22e>ServeHTTP</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>key</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>Method</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;-&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>URL</span>.<span style=color:#a6e22e>Path</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>handler</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>engine</span>.<span style=color:#a6e22e>router</span>[<span style=color:#a6e22e>key</span>]; <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>handler</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>req</span>)
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintf</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;404 NOT FOUND: %s\n&#34;</span>, <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>URL</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>New</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintf</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;URL.Path = %q\n&#34;</span>, <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>URL</span>.<span style=color:#a6e22e>Path</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;:9999&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>//$ curl http://localhost:9999/
</span></span></span><span style=display:flex><span><span style=color:#75715e>//URL.Path = &#34;/&#34;
</span></span></span></code></pre></div><p>以上是一个简单的Engine的实现方法，现在我们来看Gin的实现：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// ServeHTTP conforms to the http.Handler interface.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>engine</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Engine</span>) <span style=color:#a6e22e>ServeHTTP</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>c</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>engine</span>.<span style=color:#a6e22e>pool</span>.<span style=color:#a6e22e>Get</span>().(<span style=color:#f92672>*</span><span style=color:#a6e22e>Context</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>writermem</span>.<span style=color:#a6e22e>reset</span>(<span style=color:#a6e22e>w</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Request</span> = <span style=color:#a6e22e>req</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>reset</span>()
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>engine</span>.<span style=color:#a6e22e>handleHTTPRequest</span>(<span style=color:#a6e22e>c</span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>engine</span>.<span style=color:#a6e22e>pool</span>.<span style=color:#a6e22e>Put</span>(<span style=color:#a6e22e>c</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Gin的<code>Engine</code>结构比较复杂，所以他实现的功能繁多。并且也实现动态路由，可以试试如何使用：</p><p><em><strong>get方法：</strong></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Default</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;ping&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>JSON</span>(<span style=color:#ae81ff>200</span>, <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>H</span>{
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;message&#34;</span>:<span style=color:#e6db74>&#34;pong&#34;</span>,
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/user/:name&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>name</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Param</span>(<span style=color:#e6db74>&#34;name&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>, <span style=color:#e6db74>&#34;Hello %s !&#34;</span>, <span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/file/*name&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>name</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Param</span>(<span style=color:#e6db74>&#34;name&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>, <span style=color:#e6db74>&#34;Hello %s !&#34;</span>, <span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Run</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><em><strong>测试一下:</strong></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ curl http://localhost:8080/ping
</span></span><span style=display:flex><span><span style=color:#f92672>{</span><span style=color:#e6db74>&#34;message&#34;</span>:<span style=color:#e6db74>&#34;pong&#34;</span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>$ curl http://localhost:8080/user/kid
</span></span><span style=display:flex><span>Hello kid !
</span></span><span style=display:flex><span>$ curl http://localhost:8080/file/assert/static/js/do.js
</span></span><span style=display:flex><span>Hello /assert/static/js/do.js !
</span></span><span style=display:flex><span>$ curl http://localhost:8080/user
</span></span><span style=display:flex><span><span style=color:#ae81ff>404</span> page not found
</span></span></code></pre></div><p><em><strong>post方法：</strong></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>POST</span>(<span style=color:#e6db74>&#34;/post/value&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>, <span style=color:#e6db74>&#34;ok!&#34;</span>)
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p><em><strong>测试：</strong></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ curl -X POST http://localhost:8080/post/value
</span></span><span style=display:flex><span>ok!
</span></span></code></pre></div><p>此外还有：<code>PUT、DELETE、PATCH、HEAD、OPTION</code>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/someGet&#34;</span>, <span style=color:#a6e22e>getting</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>POST</span>(<span style=color:#e6db74>&#34;/somePost&#34;</span>, <span style=color:#a6e22e>posting</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>PUT</span>(<span style=color:#e6db74>&#34;/somePut&#34;</span>, <span style=color:#a6e22e>putting</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>DELETE</span>(<span style=color:#e6db74>&#34;/someDelete&#34;</span>, <span style=color:#a6e22e>deleting</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>PATCH</span>(<span style=color:#e6db74>&#34;/somePatch&#34;</span>, <span style=color:#a6e22e>patching</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>HEAD</span>(<span style=color:#e6db74>&#34;/someHead&#34;</span>, <span style=color:#a6e22e>head</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>OPTIONS</span>(<span style=color:#e6db74>&#34;/someOptions&#34;</span>, <span style=color:#a6e22e>options</span>)
</span></span></code></pre></div><p>实现一个高级路由:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Default</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/user/:name&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>name</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Param</span>(<span style=color:#e6db74>&#34;name&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>, <span style=color:#e6db74>&#34;Hit /user/:name , %s !&#34;</span>, <span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>     
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/user/:name/*action&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>name</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Param</span>(<span style=color:#e6db74>&#34;name&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>action</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Param</span>(<span style=color:#e6db74>&#34;action&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>, <span style=color:#e6db74>&#34;Hit /user/:name/*action ,  %s %s !&#34;</span>, <span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>action</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Run</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><em><strong>测试：</strong></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ curl http://localhost:8080/user/kid
</span></span><span style=display:flex><span>Hit /user/:name , kid !
</span></span><span style=display:flex><span>$ curl http://localhost:8080/user/kid/
</span></span><span style=display:flex><span>Hit /user/:name/*action ,  kid / !
</span></span><span style=display:flex><span>$ curl http://localhost:8080/user/kid/assert
</span></span><span style=display:flex><span>Hit /user/:name/*action ,  kid /assert !
</span></span></code></pre></div><h3 id=路由分组>路由分组
<a class=anchor href=#%e8%b7%af%e7%94%b1%e5%88%86%e7%bb%84>#</a></h3><p>分组控制是<code>web</code>框架所必须的基础功能之一，路由分组就是以相同前缀作为区分一个路由的流向，并支持分组嵌套。比如<code>/api</code>是一个分组，<code>/api/v1</code> ，<code>/api/v2</code>可以是该分组下的子分组，作用在<code>/api</code>分组上的中间件也会作用在子分组上，子分组还可以拥有自己特有的中间件。例如<code>/admin</code>的分组，可以应用鉴权中间件；/分组应用日志中间件，/是默认的最顶层的分组，也就意味着给所有的路由，即整个框架增加了记录日志的能力。</p><p>简单使用:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Default</span>()
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>v1</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Group</span>(<span style=color:#e6db74>&#34;v1&#34;</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>v1</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/login&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#ae81ff>200</span>, <span style=color:#e6db74>&#34;Hit %s&#34;</span>, <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>FullPath</span>())
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>v2</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Group</span>(<span style=color:#e6db74>&#34;v2&#34;</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>v2</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/login&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#ae81ff>200</span>, <span style=color:#e6db74>&#34;Hit %s &#34;</span>, <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>FullPath</span>())
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Run</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><em><strong>测试：</strong></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ curl http://localhost:8080/v1/login
</span></span><span style=display:flex><span>Hit /v1/login
</span></span><span style=display:flex><span>$ curl http://localhost:8080/v2/login
</span></span><span style=display:flex><span>Hit /v2/login
</span></span></code></pre></div><h3 id=使用中间件>使用中间件
<a class=anchor href=#%e4%bd%bf%e7%94%a8%e4%b8%ad%e9%97%b4%e4%bb%b6>#</a></h3><p><code>Gin</code>使用中间很简单，只需修改<code>gin.Default()</code>为<code>gin.New()</code>，<code>default</code>方法使用了默认的<code>log</code>中间件和<code>recover</code>中间件。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// Default returns an Engine instance with the Logger and Recovery middleware already attached.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Default</span>() <span style=color:#f92672>*</span><span style=color:#a6e22e>Engine</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>debugPrintWARNINGDefault</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>engine</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>New</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>engine</span>.<span style=color:#a6e22e>Use</span>(<span style=color:#a6e22e>Logger</span>(), <span style=color:#a6e22e>Recovery</span>())
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>engine</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>使用中间件：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 新建一个没有任何默认中间件的路由
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>r</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>New</span>()
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 全局中间件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Logger 中间件将日志写入 gin.DefaultWriter，即使你将 GIN_MODE 设置为 release。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// By default gin.DefaultWriter = os.Stdout
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Use</span>(<span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Logger</span>())
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Recovery 中间件会 recover 任何 panic。如果有 panic 的话，会写入 500。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Use</span>(<span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Recovery</span>())
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 你可以为每个路由添加任意数量的中间件。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/benchmark&#34;</span>, <span style=color:#a6e22e>MyBenchLogger</span>(), <span style=color:#a6e22e>benchEndpoint</span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 认证路由组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// authorized := r.Group(&#34;/&#34;, AuthRequired())
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// 和使用以下两行代码的效果完全一样:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>authorized</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Group</span>(<span style=color:#e6db74>&#34;/&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 路由组中间件! 在此例中，我们在 &#34;authorized&#34; 路由组中使用自定义创建的
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// AuthRequired() 中间件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>authorized</span>.<span style=color:#a6e22e>Use</span>(<span style=color:#a6e22e>AuthRequired</span>())
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>authorized</span>.<span style=color:#a6e22e>POST</span>(<span style=color:#e6db74>&#34;/login&#34;</span>, <span style=color:#a6e22e>loginEndpoint</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>authorized</span>.<span style=color:#a6e22e>POST</span>(<span style=color:#e6db74>&#34;/submit&#34;</span>, <span style=color:#a6e22e>submitEndpoint</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>authorized</span>.<span style=color:#a6e22e>POST</span>(<span style=color:#e6db74>&#34;/read&#34;</span>, <span style=color:#a6e22e>readEndpoint</span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 嵌套路由组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>testing</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>authorized</span>.<span style=color:#a6e22e>Group</span>(<span style=color:#e6db74>&#34;testing&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/analytics&#34;</span>, <span style=color:#a6e22e>analyticsEndpoint</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 监听并在 0.0.0.0:8080 上启动服务
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;:8080&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>具体中间件的实现代码可以查看源码。也可以实现一个中间件，并且使用<code>c.Next()</code>方法控制调用逻辑。</p><h3 id=实现文件上传>实现文件上传
<a class=anchor href=#%e5%ae%9e%e7%8e%b0%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;log&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>()  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Default</span>()
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>POST</span>(<span style=color:#e6db74>&#34;/upload&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>file</span> , <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>FormFile</span>(<span style=color:#e6db74>&#34;file&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>Filename</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#ae81ff>200</span>, <span style=color:#e6db74>&#34;%s uploaded&#34;</span>, <span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>Filename</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>     
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>POST</span>(<span style=color:#e6db74>&#34;/uploads&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>from</span> , <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>MultipartForm</span>()
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>files</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>from</span>.<span style=color:#a6e22e>File</span>[<span style=color:#e6db74>&#34;upload[]&#34;</span>]
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>file</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>files</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>Filename</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#ae81ff>200</span>, <span style=color:#e6db74>&#34;%d files uploaded&#34;</span>, len(<span style=color:#a6e22e>files</span>))
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Run</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><em><strong>测试：</strong></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ curl -X POST http://localhost:8080/upload -F <span style=color:#e6db74>&#34;file=@./test.txt&#34;</span> -H <span style=color:#e6db74>&#34;Content-Type: multipart/form-data&#34;</span>
</span></span><span style=display:flex><span>test.txt uploaded
</span></span><span style=display:flex><span>$ curl -X POST http://localhost:8080/uploads -F <span style=color:#e6db74>&#34;upload[]=@./test.txt&#34;</span> -F <span style=color:#e6db74>&#34;upload[]=@./test.txt&#34;</span> -H <span style=color:#e6db74>&#34;Content-Type: multipart/form-data&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span> files uploaded
</span></span></code></pre></div><h3 id=参数>参数
<a class=anchor href=#%e5%8f%82%e6%95%b0>#</a></h3><p>使用动态路由时，可以指定<code>/:name</code>来实现对参数<code>name</code>的动态解析，具体是用<code>c.Param("name")</code>来解析。但是如何解析<code>/welcome?firstname=Jane&amp;lastname=Doe</code>这种<code>URL</code>参数呢？使用<code>c.Query()</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Default</span>()
</span></span><span style=display:flex><span>    <span style=color:#75715e>// GET
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Hit /welcome?firstName=Jane&amp;lastName=Doe
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/welcome&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>firstName</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>DefaultQuery</span>(<span style=color:#e6db74>&#34;firstName&#34;</span>, <span style=color:#e6db74>&#34;Guest&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>lastName</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Query</span>(<span style=color:#e6db74>&#34;lastName&#34;</span>) <span style=color:#75715e>// 是 c.Request.URL.Query().Get(&#34;lastName&#34;) 的简写
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>, <span style=color:#e6db74>&#34;Hello %s %s&#34;</span>, <span style=color:#a6e22e>firstName</span>, <span style=color:#a6e22e>lastName</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>     
</span></span><span style=display:flex><span>    <span style=color:#75715e>// POST
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Hit POST /form_post
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Content-Type: application/x-www-form-urlencoded
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// message=hello&amp;nick=jon
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>POST</span>(<span style=color:#e6db74>&#34;/form_post&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>message</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>PostForm</span>(<span style=color:#e6db74>&#34;message&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>nick</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>DefaultPostForm</span>(<span style=color:#e6db74>&#34;nick&#34;</span>, <span style=color:#e6db74>&#34;anonymous&#34;</span>) <span style=color:#75715e>// 此方法可以设置默认值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> 
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>JSON</span>(<span style=color:#ae81ff>200</span>, <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>H</span>{
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;status&#34;</span>:  <span style=color:#e6db74>&#34;posted&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;message&#34;</span>: <span style=color:#a6e22e>message</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;nick&#34;</span>:    <span style=color:#a6e22e>nick</span>,
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Run</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><em><strong>测试:</strong></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ curl http://localhost:8080/welcome
</span></span><span style=display:flex><span>Hello Guest
</span></span><span style=display:flex><span>$ curl <span style=color:#e6db74>&#39;http://localhost:8080/welcome?firstName=h&amp;lastName=xd&#39;</span>
</span></span><span style=display:flex><span>Hello h xd
</span></span><span style=display:flex><span>$ curl -X POST -d <span style=color:#e6db74>&#39;message=hello&amp;nick=jon&#39;</span> -H <span style=color:#e6db74>&#34;Content-Type: application/x-www-form-urlencoded&#34;</span> http://localhost:8080/form_post
</span></span><span style=display:flex><span><span style=color:#f92672>{</span><span style=color:#e6db74>&#34;message&#34;</span>:<span style=color:#e6db74>&#34;hello&#34;</span>,<span style=color:#e6db74>&#34;nick&#34;</span>:<span style=color:#e6db74>&#34;jon&#34;</span>,<span style=color:#e6db74>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;posted&#34;</span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>GET和POST混合：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Default</span>()
</span></span><span style=display:flex><span>    <span style=color:#75715e>// POST
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Hit /post?id=1234&amp;page=1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Content-Type: application/x-www-form-urlencoded
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// name=hxd&amp;message=hello
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>POST</span>(<span style=color:#e6db74>&#34;/post&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>id</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Query</span>(<span style=color:#e6db74>&#34;id&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>page</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>DefaultQuery</span>(<span style=color:#e6db74>&#34;page&#34;</span>, <span style=color:#e6db74>&#34;0&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>name</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>PostForm</span>(<span style=color:#e6db74>&#34;name&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>message</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>PostForm</span>(<span style=color:#e6db74>&#34;message&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#ae81ff>200</span>, <span style=color:#e6db74>&#34;id: %s; page: %s; name: %s; message: %s&#34;</span>, <span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>page</span>, <span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>message</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Run</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><em><strong>测试：</strong></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ curl -X POST -d <span style=color:#e6db74>&#39;message=hello&amp;name=jon&#39;</span> -H <span style=color:#e6db74>&#34;Content-Type: application/x-www-form-urlencoded&#34;</span> <span style=color:#e6db74>&#39;http://localhost:8080/post?id=1&amp;page=2&#39;</span>
</span></span><span style=display:flex><span>id: 1; page: 2; name: jon; message: hello
</span></span></code></pre></div><h3 id=输出响应>输出响应
<a class=anchor href=#%e8%be%93%e5%87%ba%e5%93%8d%e5%ba%94>#</a></h3><p>Gin有多种相应HTTP请求的格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>JSON</span>(<span style=color:#a6e22e>code</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>obj</span> <span style=color:#66d9ef>interface</span>{})
</span></span><span style=display:flex><span><span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>JSONP</span>(<span style=color:#a6e22e>code</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>obj</span> <span style=color:#66d9ef>interface</span>{})
</span></span><span style=display:flex><span><span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>XML</span>(<span style=color:#a6e22e>code</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>obj</span> <span style=color:#66d9ef>interface</span>{})
</span></span><span style=display:flex><span><span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>YAML</span>(<span style=color:#a6e22e>code</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>obj</span> <span style=color:#66d9ef>interface</span>{})
</span></span><span style=display:flex><span><span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>code</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>format</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>values</span> <span style=color:#f92672>...</span><span style=color:#66d9ef>interface</span>{})
</span></span><span style=display:flex><span><span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Redirect</span>(<span style=color:#a6e22e>code</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>location</span> <span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Data</span>(<span style=color:#a6e22e>code</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>contentType</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>data</span> []<span style=color:#66d9ef>byte</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>File</span>(<span style=color:#a6e22e>filepath</span> <span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span>..<span style=color:#a6e22e>etc</span>.
</span></span></code></pre></div><p>比如：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// gin.H 是 map[string]interface{} 的一种快捷方式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/someJSON&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>JSON</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>, <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>H</span>{<span style=color:#e6db74>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;hey&#34;</span>, <span style=color:#e6db74>&#34;status&#34;</span>: <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>})
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p><em><strong>参考链接：</strong></em></p><p><a href=https://gin-gonic.com/zh-cn/docs/examples>Gin中文文档</a></p><p><a href=https://geektutu.com/post/gee.html>7天用Go从零实现Web框架Gee教程</a></p><p><a href=https://www.kancloud.cn/shuangdeyu/gin_book/949433>中文文档</a></p><p><a href=https://www.cnblogs.com/shijingjing07/p/10302727.html>Gin框架使用详解</a></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#入门简介>入门简介</a></li><li><a href=#原理及用法>原理及用法</a><ul><li><a href=#路由routing>路由Routing</a></li><li><a href=#路由分组>路由分组</a></li><li><a href=#使用中间件>使用中间件</a></li><li><a href=#实现文件上传>实现文件上传</a></li><li><a href=#参数>参数</a></li><li><a href=#输出响应>输出响应</a></li></ul></li></ul></nav></div></aside></main></body></html>