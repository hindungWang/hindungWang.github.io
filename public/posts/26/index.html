<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>K8s client-goåˆå§‹åŒ–çš„å‡ ç§æ–¹æ³• :: Hindung Blogs</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="ç»å¸¸ç”¨åˆ°çš„é›†ä¸­k8s clientçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œè¿™é‡Œæ€»ç»“å¤‡å¿˜ğŸ“ä¸€ä¸‹" />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="http://hindung.cn/posts/26/" />




<link rel="stylesheet" href="http://hindung.cn/assets/style.css">

  <link rel="stylesheet" href="http://hindung.cn/assets/green.css">






<link rel="apple-touch-icon" href="http://hindung.cn/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="http://hindung.cn/img/favicon/green.png">



<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="K8s client-goåˆå§‹åŒ–çš„å‡ ç§æ–¹æ³•">
<meta property="og:description" content="ç»å¸¸ç”¨åˆ°çš„é›†ä¸­k8s clientçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œè¿™é‡Œæ€»ç»“å¤‡å¿˜ğŸ“ä¸€ä¸‹" />
<meta property="og:url" content="http://hindung.cn/posts/26/" />
<meta property="og:site_name" content="Hindung Blogs" />

  
    <meta property="og:image" content="http://hindung.cn/img/favicon/green.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2022-07-19 00:00:00 &#43;0000 UTC" />












</head>
<body class="green">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Hindung
  </div>
</a>

    </div>
    
      <div class="menu-trigger">menu</div>
    
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/posts">Post</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/posts">Post</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="http://hindung.cn/posts/26/">K8s client-goåˆå§‹åŒ–çš„å‡ ç§æ–¹æ³•</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2022-07-19
        
      </span>
    
    
    
      <span class="post-reading-time">:: 1 min read (159 words)</span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="http://hindung.cn/tags/kubernetes/">Kubernetes</a>&nbsp;
    
    #<a href="http://hindung.cn/tags/go/">Go</a>&nbsp;
    
  </span>
  
  


  
    <div class="table-of-contents">
      <h2>
        Table of Contents
      </h2>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#ç®€ä»‹">ç®€ä»‹</a>
      <ul>
        <li><a href="#restclient">RESTClient</a></li>
        <li><a href="#clientset">ClientSet</a></li>
        <li><a href="#dynamicclient">DynamicClient</a></li>
        <li><a href="#discoveryclient">DiscoveryClient</a></li>
      </ul>
    </li>
    <li><a href="#restconfigåˆå§‹åŒ–">rest.Configåˆå§‹åŒ–</a>
      <ul>
        <li><a href="#é›†ç¾¤å¤–é€šè¿‡kubeconfigåˆå§‹åŒ–">é›†ç¾¤å¤–é€šè¿‡kubeconfigåˆå§‹åŒ–</a></li>
        <li><a href="#å†…å­˜ä¸­é€šè¿‡kubeconfigå­—ç¬¦ä¸²æˆ–è€…byteæ•°ç»„åˆå§‹åŒ–">å†…å­˜ä¸­é€šè¿‡kubeconfigå­—ç¬¦ä¸²æˆ–è€…byteæ•°ç»„åˆå§‹åŒ–</a></li>
        <li><a href="#é›†ç¾¤ä¸­é€šè¿‡serviceacountåˆå§‹åŒ–">é›†ç¾¤ä¸­é€šè¿‡ServiceAcountåˆå§‹åŒ–</a></li>
        <li><a href="#operator-sdkä¸­åˆå§‹åŒ–config">operator-sdkä¸­åˆå§‹åŒ–config</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
  

  <div class="post-content"><div>
        <h2 id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>client-goæ˜¯k8sçš„ä¸€ä¸ªåŸºç¡€ç»„ä»¶åº“ï¼Œæ˜¯ç”¨äºä¸API-Serveräº¤äº’çš„httpå®¢æˆ·ç«¯ã€‚K8sä¸­å¤§éƒ¨åˆ†ç»„ä»¶éƒ½ä½¿ç”¨äº†è¿™ä¸ªåº“å®ç°ä¸API-Serverçš„é€šä¿¡åŠŸèƒ½ã€‚é™¤äº†èƒ½å¤Ÿå¯¹èµ„æºå¯¹è±¡çš„å¢åˆ æ”¹æŸ¥ï¼Œè¿˜å¯Watchä¸€ä¸ªå¯¹è±¡ã€å‡çº§æˆwebsocketé“¾æ¥ç­‰ç­‰åŠŸèƒ½ã€‚</p>
<p>client-goæ”¯æŒå››ç§å®¢æˆ·ç«¯ï¼š<code>RESTClient</code>ã€<code>ClientSet</code>ã€<code>DynamicClient</code>ã€<code>DiscoveryClient</code>ã€‚è¿™å‡ ä¸ªclientå¯ä»¥ç›¸äº’è½¬æ¢ã€‚</p>
<h3 id="restclient">RESTClient<a href="#restclient" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>RESTClientæ˜¯æœ€åŸºç¡€çš„å®¢æˆ·ç«¯ï¼Œç›¸å½“äºæœ€åº•å±‚çš„åŸºç¡€ç»“æ„ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡RESTClientæä¾›çš„RESTfulæ–¹æ³•å¦‚Get()ã€Put()ã€Post()ã€Delete()è¿›è¡Œäº¤äº’ã€‚</p>
<p>ä¸€èˆ¬è€Œè¨€ï¼Œä¸ºäº†æ›´ä¸ºä¼˜é›…çš„å¤„ç†ï¼Œéœ€è¦è¿›ä¸€æ­¥å°è£…ï¼Œé€šè¿‡Clientsetå°è£…RESTClientï¼Œç„¶åå†å¯¹å¤–æä¾›æ¥å£å’ŒæœåŠ¡ã€‚</p>
<p>å¯ä»¥é€šè¿‡ClientSetå®¢æˆ·ç«¯è·å¾—ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">client</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">cli</span>.<span style="color:#a6e22e">CoreV1</span>().<span style="color:#a6e22e">RESTClient</span>().(<span style="color:#f92672">*</span><span style="color:#a6e22e">rest</span>.<span style="color:#a6e22e">RESTClient</span>)
</span></span></code></pre></div><h3 id="clientset">ClientSet<a href="#clientset" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>Clientsetæ˜¯è°ƒç”¨Kubernetesèµ„æºå¯¹è±¡æœ€å¸¸ç”¨çš„clientï¼Œå¯ä»¥æ“ä½œæ‰€æœ‰çš„èµ„æºå¯¹è±¡ï¼ŒåŒ…å«RESTClientã€‚éœ€è¦åˆ¶å®šGroupã€Versionï¼Œç„¶åæ ¹æ®Resourceè·å–ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">clientset</span>,<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">kubernetes</span>.<span style="color:#a6e22e">NewForConfig</span>(<span style="color:#a6e22e">config</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">sa</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">clientset</span>.<span style="color:#a6e22e">CoreV1</span>().<span style="color:#a6e22e">ServiceAccounts</span>(<span style="color:#e6db74">&#34;kube-system&#34;</span>).<span style="color:#a6e22e">Get</span>(<span style="color:#e6db74">&#34;kube-shell-admin&#34;</span>, <span style="color:#a6e22e">metav1</span>.<span style="color:#a6e22e">GetOptions</span>{})
</span></span></code></pre></div><h3 id="dynamicclient">DynamicClient<a href="#dynamicclient" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>Dynamic clientæ˜¯ä¸€ç§åŠ¨æ€çš„clientï¼Œå®ƒèƒ½å¤„ç†kubernetesæ‰€æœ‰çš„èµ„æºã€‚ä¸åŒäºclientsetï¼Œdynamic clientè¿”å›çš„å¯¹è±¡æ˜¯ä¸€ä¸ª<code>map[string]interface{}</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">dynamicClient</span>,<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">dynamic</span>.<span style="color:#a6e22e">NewForConfig</span>(<span style="color:#a6e22e">config</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">gvr</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">schema</span>.<span style="color:#a6e22e">GroupVersionResource</span>{<span style="color:#a6e22e">Version</span>: <span style="color:#e6db74">&#34;v1&#34;</span>,<span style="color:#a6e22e">Resource</span>: <span style="color:#e6db74">&#34;pods&#34;</span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">unstructObjList</span>,<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">dynamicClient</span>.<span style="color:#a6e22e">Resource</span>(<span style="color:#a6e22e">gvr</span>).<span style="color:#a6e22e">Namespace</span>(<span style="color:#e6db74">&#34;dev&#34;</span>).<span style="color:#a6e22e">List</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">TODO</span>(),<span style="color:#a6e22e">metav1</span>.<span style="color:#a6e22e">ListOptions</span>{<span style="color:#a6e22e">Limit</span>: <span style="color:#ae81ff">100</span>})
</span></span></code></pre></div><h3 id="discoveryclient">DiscoveryClient<a href="#discoveryclient" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>DiscoveryClientæ˜¯å‘ç°å®¢æˆ·ç«¯ï¼Œä¸»è¦ç”¨äºå‘ç°kubernetes API Serveræ‰€æ”¯æŒçš„èµ„æºç»„ã€èµ„æºç‰ˆæœ¬ã€èµ„æºä¿¡æ¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å°†è¿™äº›ä¿¡æ¯å­˜å‚¨åˆ°æœ¬åœ°ï¼Œç”¨æˆ·æœ¬åœ°ç¼“å­˜ï¼Œä»¥å‡è½»å¯¹Kubernetes API Serverè®¿é—®çš„å‹åŠ›ã€‚ kubectlçš„api-versionså’Œapi-resourceså‘½ä»¤è¾“å‡ºä¹Ÿæ˜¯é€šè¿‡DisconversyClientå®ç°çš„ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">discoveryClient</span>,<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">discovery</span>.<span style="color:#a6e22e">NewDiscoveryClientForConfig</span>(<span style="color:#a6e22e">config</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">APIGroup</span>,<span style="color:#a6e22e">APIResourceListSlice</span>,<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">discoveryClient</span>.<span style="color:#a6e22e">ServerGroupsAndResources</span>()
</span></span></code></pre></div><p>è¿™å‡ ç§å®¢æˆ·ç«¯çš„åˆå§‹åŒ–éƒ½æ¶‰åŠåˆ°äº†å…¥å‚configï¼Œå³<code>*rest.Config</code>ï¼Œè¿™ä¸ªæ˜¯ç”¨äºåˆå§‹åŒ–å®¢æˆ·ç«¯çš„æ‰€æœ‰é…ç½®ä¿¡æ¯ã€‚</p>
<h2 id="restconfigåˆå§‹åŒ–">rest.Configåˆå§‹åŒ–<a href="#restconfigåˆå§‹åŒ–" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>åˆ›å»ºclientå‰ï¼Œéœ€è¦å…ˆä»åˆå§‹åŒ–<code>*rest.Config</code>ï¼Œè¿™ä¸ª<code>*rest.Config</code>å¯ä»¥ä»é›†ç¾¤å¤–çš„kubeconfigæ–‡ä»¶æˆ–è€…é›†ç¾¤å†…éƒ¨çš„ tokenFile å’Œ CAFileåˆå§‹åŒ–ï¼ˆé€šè¿‡ServiceAcountè‡ªåŠ¨æŒ‚è½½ï¼‰ã€‚æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š</p>
<h3 id="é›†ç¾¤å¤–é€šè¿‡kubeconfigåˆå§‹åŒ–">é›†ç¾¤å¤–é€šè¿‡kubeconfigåˆå§‹åŒ–<a href="#é›†ç¾¤å¤–é€šè¿‡kubeconfigåˆå§‹åŒ–" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>BuildConfigFromFlagsæ–¹æ³•ä»ç»™å®šçš„urlæˆ–è€…kubeconfigæ–‡ä»¶çš„æ–‡ä»¶å¤¹è·¯å¾„å»åˆå§‹åŒ–configï¼Œå¦‚æœä¸æˆåŠŸåˆ™ä¼šä½¿ç”¨é›†ç¾¤å†…éƒ¨æ–¹æ³•åˆå§‹åŒ–configï¼Œå¦‚æœä¸æˆåŠŸåˆ™è¿”å›ä¸€ä¸ªé»˜è®¤çš„configã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// &#34;k8s.io/client-go/tools/clientcmd&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">config</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">clientcmd</span>.<span style="color:#a6e22e">BuildConfigFromFlags</span>(<span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">kubeconfig</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>   panic(<span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">Error</span>())
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å†…å­˜ä¸­é€šè¿‡kubeconfigå­—ç¬¦ä¸²æˆ–è€…byteæ•°ç»„åˆå§‹åŒ–">å†…å­˜ä¸­é€šè¿‡kubeconfigå­—ç¬¦ä¸²æˆ–è€…byteæ•°ç»„åˆå§‹åŒ–<a href="#å†…å­˜ä¸­é€šè¿‡kubeconfigå­—ç¬¦ä¸²æˆ–è€…byteæ•°ç»„åˆå§‹åŒ–" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>é€šè¿‡è¯»å–kubeconfigæ–‡ä»¶å†…å®¹è¿›è¡Œåˆå§‹åŒ–ä¸€ä¸ªconfigï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">config</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">clientcmd</span>.<span style="color:#a6e22e">NewClientConfigFromBytes</span>([]byte(string(<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;kubeConfig&#34;</span>])))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">restConfig</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">ClientConfig</span>()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="é›†ç¾¤ä¸­é€šè¿‡serviceacountåˆå§‹åŒ–">é›†ç¾¤ä¸­é€šè¿‡ServiceAcountåˆå§‹åŒ–<a href="#é›†ç¾¤ä¸­é€šè¿‡serviceacountåˆå§‹åŒ–" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>é€šè¿‡é›†ç¾¤å†…éƒ¨é…ç½®åˆ›å»º k8s é…ç½®ä¿¡æ¯ï¼Œé€šè¿‡ KUBERNETES_SERVICE_HOST å’Œ KUBERNETES_SERVICE_PORT ç¯å¢ƒå˜é‡æ–¹å¼è·å–ã€‚</p>
<p>è‹¥é›†ç¾¤ä½¿ç”¨ TLS è®¤è¯æ–¹å¼ï¼Œåˆ™é»˜è®¤è¯»å–é›†ç¾¤å†…éƒ¨ tokenFile å’Œ CAFileï¼š</p>
<p><code>tokenFile = &quot;/var/run/secrets/kubernetes.io/serviceaccount/token&quot;</code></p>
<p><code>rootCAFile = &quot;/var/run/secrets/kubernetes.io/serviceaccount/ca.crt&quot;</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// &#34;k8s.io/client-go/rest&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">config</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">rest</span>.<span style="color:#a6e22e">InClusterConfig</span>()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>   panic(<span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">Error</span>())
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="operator-sdkä¸­åˆå§‹åŒ–config">operator-sdkä¸­åˆå§‹åŒ–config<a href="#operator-sdkä¸­åˆå§‹åŒ–config" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨operator-sdkå¼€å‘CRDséƒ½ä¼šç”¨åˆ°åœ¨æœ¬åœ°è°ƒè¯•æˆ–è€…åœ¨é›†ç¾¤ä¸­è°ƒè¯•çš„æ–¹æ³•ï¼Œåœ¨ä½ç‰ˆæœ¬operator-sdkä¸­å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// &#34;sigs.k8s.io/controller-runtime/pkg/client/config&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">cfg</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">GetConfig</span>()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Error</span>(<span style="color:#a6e22e">err</span>, <span style="color:#e6db74">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Exit</span>(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è¯¥æ–¹æ³•åˆå§‹åŒ–kubeconfigçš„é¡ºåºæ˜¯&ndash;kubeconfigæ ‡ç­¾ï¼ŒKUBECONFIGç¯å¢ƒå˜é‡ï¼ŒIn-clusteré›†ç¾¤å†…SAï¼Œ$HOME/.kube/configæ–‡ä»¶ã€‚</p>
<p>åœ¨åˆå§‹åŒ–çš„configçš„åŒæ—¶ï¼Œè®¾ç½®äº†è¯·æ±‚çš„QPSï¼Œé»˜è®¤20 QPS, 30 burstã€‚</p>
<p>åœ¨æŸäº›é«˜ç‰ˆæœ¬sdkä¸­ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•åˆå§‹åŒ–ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">//ctrl &#34;sigs.k8s.io/controller-runtime&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctrl</span>.<span style="color:#a6e22e">GetConfigOrDie</span>()
</span></span></code></pre></div><p>åŸç†åŒä¸Šã€‚</p>

      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        
        <span class="button next">
            <a href="http://hindung.cn/posts/post/">
                <span class="button__text">Hello World</span>
                <span class="button__icon">â†’</span>
            </a>
        </span>
        
    </div>
</div>

  

  
  

  
</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>Â© 2022 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="http://hindung.cn/assets/main.js"></script>
<script src="http://hindung.cn/assets/prism.js"></script>


  <script src="http://hindung.cn/assets/languageSelector.js"></script>






  
</div>

</body>
</html>
